<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Notes|笔记站</title>
  
  
  <link href="https://zhongye1.github.io/Arknight-notes/rss.xml" rel="self"/>
  
  <link href="https://zhongye1.github.io/Arknight-notes/"/>
  <updated>2025-11-23T06:45:25.064Z</updated>
  <id>https://zhongye1.github.io/Arknight-notes/</id>
  
  <author>
    <name>柊野</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>前端项目安装和配置指南 Vite + React + TypeScript + Tailwind CSS</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/39845.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/39845.html</id>
    <published>2025-11-23T04:38:32.000Z</published>
    <updated>2025-11-23T06:45:25.064Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Vite-React-TypeScript-Tailwind-CSS-脚手架搭建指南"><a href="#Vite-React-TypeScript-Tailwind-CSS-脚手架搭建指南" class="headerlink" title="Vite + React + TypeScript + Tailwind CSS 脚手架搭建指南"></a>Vite + React + TypeScript + Tailwind CSS 脚手架搭建指南</h2><p>本文记录从零搭建 <code>Vite + React + Tailwind CSS</code> 项目，省去一个个官网去查阅文档，旨在方便快速丝滑的创建项目</p><h3 id="概览"><a href="#概览" class="headerlink" title="概览"></a>概览</h3><ul><li><strong>Vite 4.2.0</strong> - 新一代构建工具，提供极快的冷启动和热更新。基于原生 ES 模块实现，开发时按需编译，相比传统打包工具具有显著的速度优势。</li><li><strong>React 18.2.0</strong> - 流行的前端 UI 库，采用组件化架构和虚拟 DOM 技术，提供高效的渲染性能和良好的开发体验。</li><li><strong>TypeScript 5.3.3</strong> - JavaScript 的超集，提供静态类型检查，在编译阶段发现潜在错误，增强代码可维护性和开发效率。</li><li><strong>Tailwind CSS 3.3.1</strong> - 实用优先的 CSS 框架，通过组合预定义的原子类来构建界面，无需编写自定义 CSS 即可实现复杂设计。</li><li><strong>ESLint &amp; Prettier</strong> - 代码规范和格式化工具。ESLint 用于检测代码质量问题和潜在错误，Prettier 专注于代码格式统一，共同保障代码质量。</li><li><strong>Husky &amp; lint-staged</strong> - Git 钩子工具，用于提交前代码检查。Husky 简化 Git 钩子配置，lint-staged 仅对暂存文件执行操作，提升提交前检查效率。</li><li><strong>React Router DOM 6</strong> - React 应用的路由管理工具，提供声明式路由配置，支持动态路由、嵌套路由等特性，是构建单页应用的核心组件。</li></ul><h3 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs bash">BDdraw_DEV/<br>├── .husky/                     <span class="hljs-comment"># Git hooks 配置</span><br>├── .vscode/                    <span class="hljs-comment"># VSCode 配置</span><br>├── docs/                       <span class="hljs-comment"># 文档目录</span><br>├── public/                     <span class="hljs-comment"># 静态资源目录</span><br>├── src/                        <span class="hljs-comment"># 源代码主目录</span><br>│   ├── api/                    <span class="hljs-comment"># API 接口定义</span><br>│   ├── assets/                 <span class="hljs-comment"># 静态资源文件</span><br>│   ├── components/             <span class="hljs-comment"># 公共组件</span><br>│   ├── hooks/                  <span class="hljs-comment"># 自定义 React Hooks</span><br>│   ├── lib/                    <span class="hljs-comment"># 工具库和核心功能模块</span><br>│   ├── pages/                  <span class="hljs-comment"># 页面组件</span><br>│   ├── router/                 <span class="hljs-comment"># 路由配置</span><br>│   │   └── router.tsx          <span class="hljs-comment"># 路由定义</span><br>│   ├── stores/                 <span class="hljs-comment"># 状态管理</span><br>│   ├── styles/                 <span class="hljs-comment"># 样式文件</span><br>│   ├── app.tsx                 <span class="hljs-comment"># 应用入口组件</span><br>│   ├── main.tsx                <span class="hljs-comment"># 主入口文件</span><br>│   └── vite-env.d.ts           <span class="hljs-comment"># Vite 环境声明文件</span><br>├── .editorconfig               <span class="hljs-comment"># 编辑器配置</span><br>├── .eslintrc                  <span class="hljs-comment"># ESLint 配置</span><br>├── .gitignore                 <span class="hljs-comment"># Git 忽略文件配置</span><br>├── .prettierrc.js             <span class="hljs-comment"># Prettier 配置</span><br>├── .stylelintrc.json          <span class="hljs-comment"># Stylelint 配置</span><br>├── commitlint.config.cjs      <span class="hljs-comment"># Commitlint 配置</span><br>├── components.json            <span class="hljs-comment"># 组件配置</span><br>├── index.html                 <span class="hljs-comment"># HTML 入口</span><br>├── lint-staged.config.js      <span class="hljs-comment"># Lint-staged 配置</span><br>├── package.json               <span class="hljs-comment"># 项目依赖和脚本配置</span><br>├── postcss.config.js          <span class="hljs-comment"># PostCSS 配置</span><br>├── tailwind.config.js         <span class="hljs-comment"># Tailwind CSS 配置</span><br>├── transmart.config.ts        <span class="hljs-comment"># Transmart 配置</span><br>├── tsconfig.json              <span class="hljs-comment"># TypeScript 配置</span><br>├── tsconfig.node.json         <span class="hljs-comment"># Node.js TypeScript 配置</span><br>├── vite.config.ts             <span class="hljs-comment"># Vite 配置</span><br>└── README.md                  <span class="hljs-comment"># 项目说明文档</span><br><br></code></pre></td></tr></table></figure><h3 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h3><p>使用 Vite 创建项目</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm create vite@latest [项目名] -- --template react-ts<br><span class="hljs-built_in">cd</span> [项目名]<br></code></pre></td></tr></table></figure><p>安装依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install<br></code></pre></td></tr></table></figure><h3 id="集成-Tailwind-CSS-v3"><a href="#集成-Tailwind-CSS-v3" class="headerlink" title="集成 Tailwind CSS v3"></a>集成 Tailwind CSS v3</h3><p>Tailwind CSS 是一个功能类优先的 CSS 框架，它提供了大量的实用类，可以直接在 HTML 中组合使用来构建任何设计。通过配置文件可以自定义主题、颜色、间距等设计系统，并且只生成实际使用的样式，使得最终的 CSS 文件非常精简。其 JIT（Just-In-Time）模式可以按需生成样式，大大提高了编译速度并支持更多功能。</p><p>安装 Tailwind CSS v3 及其依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -D tailwindcss postcss autoprefixer<br>npx tailwindcss init -p<br></code></pre></td></tr></table></figure><p>如果出问题可以去翻一下官方文档，v4 改变了一些部署方式</p><p>配置 Tailwind CSS</p><p>编辑 <code>tailwind.config.js</code> 文件：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">import('tailwindcss').Config</span>} */</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {<br>  <span class="hljs-attr">content</span>: [<span class="hljs-string">"./index.html"</span>, <span class="hljs-string">"./src/**/*.{js,ts,jsx,tsx}"</span>],<br>  <span class="hljs-attr">theme</span>: {<br>    <span class="hljs-attr">extend</span>: {},<br>  },<br>  <span class="hljs-attr">plugins</span>: [],<br>};<br></code></pre></td></tr></table></figure><h3 id="引入-Tailwind-CSS-v3"><a href="#引入-Tailwind-CSS-v3" class="headerlink" title="引入 Tailwind CSS v3"></a>引入 Tailwind CSS v3</h3><p>在 <code>src/index.css</code> 文件中添加：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-keyword">@tailwind</span> base;<br><span class="hljs-keyword">@tailwind</span> components;<br><span class="hljs-keyword">@tailwind</span> utilities;<br></code></pre></td></tr></table></figure><p>并在入口文件中导入该 CSS 文件：</p><p>Tailwind CSS 的三个核心层：</p><ul><li><code>@tailwind base</code> - 包含 Normalize.css 和一些基础样式重置</li><li><code>@tailwind components</code> - 包含框架的组件类，可用于添加结构样式</li><li><code>@tailwind utilities</code> - 包含所有实用类，这是 Tailwind 的核心部分</li></ul><p>通过这种分层方式，Tailwind 提供了一种灵活的方式来组织和扩展样式。</p><h3 id="配置-TypeScript"><a href="#配置-TypeScript" class="headerlink" title="配置 TypeScript"></a>配置 TypeScript</h3><p>TypeScript 是 JavaScript 的超集，添加了可选的静态类型。它可以帮助开发者在编码阶段捕获错误，提供更好的代码补全和重构支持。通过配置 <code>tsconfig.json</code>，我们可以控制 TypeScript 编译器的行为，如目标 JavaScript 版本、模块解析策略、严格性级别等。在本项目中，我们启用了严格的类型检查，同时配置了 React JSX 支持。</p><p>项目中的 <code>tsconfig.json</code> 文件已经包含了基本的 TypeScript 配置。根据项目需求，我们可以对其进行定制：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">{</span><br>  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><br>    <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"useDefineForClassFields"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"lib"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"DOM"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"DOM.Iterable"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"allowJs"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"skipLibCheck"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"esModuleInterop"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"allowSyntheticDefaultImports"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"strict"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"forceConsistentCasingInFileNames"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"moduleResolution"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Node"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"resolveJsonModule"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"isolatedModules"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"noEmit"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"jsx"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"react-jsx"</span><br>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"src"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">"references"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span> <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./tsconfig.node.json"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">}</span><br></code></pre></td></tr></table></figure><h3 id="配置-ESLint-和-Prettier"><a href="#配置-ESLint-和-Prettier" class="headerlink" title="配置 ESLint 和 Prettier"></a>配置 ESLint 和 Prettier</h3><p>ESLint 是一个可插拔的 JavaScript 和 TypeScript 代码质量检查工具，它可以识别语法错误和代码风格问题。Prettier 是一个代码格式化工具，专注于代码风格统一。两者结合使用可以确保团队代码质量和风格的一致性。通过配置规则，我们可以自定义检查标准，例如是否使用分号、引号类型、缩进大小等。</p><p>安装相关依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -D eslint prettier eslint-config-prettier eslint-plugin-prettier eslint-plugin-react eslint-plugin-react-hooks @typescript-eslint/eslint-plugin @typescript-eslint/parser<br></code></pre></td></tr></table></figure><p>配置 ESLint</p><p>创建 <code>.eslintrc</code> 文件：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">{</span><br>  <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><br>    <span class="hljs-attr">"browser"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"es2021"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">"extends"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-string">"eslint:recommended"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">"plugin:@typescript-eslint/recommended"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">"plugin:react/recommended"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">"plugin:react-hooks/recommended"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">"prettier"</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">"parser"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"@typescript-eslint/parser"</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">"parserOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><br>    <span class="hljs-attr">"ecmaVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"latest"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"sourceType"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"module"</span><br>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">"plugins"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"@typescript-eslint"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"react"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"prettier"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">"rules"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><br>    <span class="hljs-attr">"prettier/prettier"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"error"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"react/react-in-jsx-scope"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"off"</span><br>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">"settings"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><br>    <span class="hljs-attr">"react"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><br>      <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"detect"</span><br>    <span class="hljs-punctuation">}</span><br>  <span class="hljs-punctuation">}</span><br><span class="hljs-punctuation">}</span><br></code></pre></td></tr></table></figure><p>配置 Prettier</p><p>创建 <code>.prettierrc</code> 文件：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">{</span><br>  <span class="hljs-attr">"semi"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">"singleQuote"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">"tabWidth"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">"trailingComma"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"es5"</span><br><span class="hljs-punctuation">}</span><br></code></pre></td></tr></table></figure><h3 id="配置-Git-Hooks"><a href="#配置-Git-Hooks" class="headerlink" title="配置 Git Hooks"></a>配置 Git Hooks</h3><p>Git Hooks 允许我们在 Git 操作的不同阶段执行自定义脚本。通过 Husky 和 lint-staged，我们可以在代码提交前自动运行 ESLint 和 Prettier，确保只有符合规范的代码才能进入代码库。lint-staged 只会针对暂存区的文件运行检查，提高效率。这有助于保持整个项目的代码质量和一致性。</p><p>使用 Husky 和 lint-staged 在代码提交前自动运行代码检查和格式化。</p><p>安装依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -D husky lint-staged<br></code></pre></td></tr></table></figure><p>初始化 Husky</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npx husky install<br></code></pre></td></tr></table></figure><p>配置 lint-staged</p><p>创建 <code>lint-staged.config.js</code> 文件：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {<br>  <span class="hljs-string">"*.{ts,tsx}"</span>: [<span class="hljs-string">"eslint --fix"</span>, <span class="hljs-string">"prettier --write"</span>],<br>  <span class="hljs-string">"*.{css,md}"</span>: <span class="hljs-string">"prettier --write"</span>,<br>};<br></code></pre></td></tr></table></figure><p>添加 pre-commit 钩子</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npx husky add .husky/pre-commit <span class="hljs-string">"npx lint-staged"</span><br></code></pre></td></tr></table></figure><h3 id="集成-React-Router"><a href="#集成-React-Router" class="headerlink" title="集成 React Router"></a>集成 React Router</h3><p>React Router 是 React 应用中最流行的路由解决方案，它允许我们构建单页应用程序(SPA)，通过 URL 的变化来展示不同的视图组件。它提供了声明式的路由配置，支持嵌套路由、动态路由参数、编程式导航等功能。通过使用 React Router，我们可以轻松地管理应用的不同页面和视图之间的导航关系。</p><p>安装 React Router</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install react-router-dom<br>npm install -D @types/react-router-dom<br></code></pre></td></tr></table></figure><p>创建路由配置</p><p>创建 <code>src/router/router.tsx</code> 文件：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> { createBrowserRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../pages/Home"</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../pages/About"</span>;<br><br><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createBrowserRouter</span>([<br>  {<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">"/"</span>,<br>    <span class="hljs-attr">element</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Home</span> /&gt;</span></span>,<br>  },<br>  {<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">"/about"</span>,<br>    <span class="hljs-attr">element</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">About</span> /&gt;</span></span>,<br>  },<br>]);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router;<br></code></pre></td></tr></table></figure><p>在应用中使用路由</p><p>更新 <code>src/App.tsx</code> 文件：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">RouterProvider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;<br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">"./router/router"</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) {<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">RouterProvider</span> <span class="hljs-attr">router</span>=<span class="hljs-string">{router}</span> /&gt;</span></span>;<br>}<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;<br></code></pre></td></tr></table></figure><p>创建页面组件</p><p>创建 <code>src/pages/Home.tsx</code> 和 <code>src/pages/About.tsx</code> 文件：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// src/pages/Home.tsx</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Home</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>};<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Home</span>;<br></code></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// src/pages/About.tsx</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">About</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>关于<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>  );<br>};<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">About</span>;<br></code></pre></td></tr></table></figure><p>React Router 是 React 应用中最流行的路由解决方案，它允许我们构建单页应用程序(SPA)，通过 URL 的变化来展示不同的视图组件。它提供了声明式的路由配置，支持嵌套路由、动态路由参数、编程式导航等功能。通过使用 React Router，我们可以轻松地管理应用的不同页面和视图之间的导航关系。</p><h3 id="配置-Vite"><a href="#配置-Vite" class="headerlink" title="配置 Vite"></a>配置 Vite</h3><p>项目的 <code>vite.config.ts</code> 文件配置如下：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">"vite"</span>;<br><span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">"@vitejs/plugin-react"</span>;<br><span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">"path"</span>;<br><br><span class="hljs-comment">// https://vitejs.dev/config/</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({<br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">react</span>()],<br>  <span class="hljs-attr">resolve</span>: {<br>    <span class="hljs-attr">alias</span>: {<br>      <span class="hljs-string">"@"</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">"./src"</span>),<br>    },<br>  },<br>  <span class="hljs-attr">css</span>: {<br>    <span class="hljs-attr">postcss</span>: <span class="hljs-string">"./postcss.config.js"</span>,<br>  },<br>  <span class="hljs-attr">server</span>: {<br>    <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>,<br>  },<br>});<br></code></pre></td></tr></table></figure><h3 id="配置-PostCSS"><a href="#配置-PostCSS" class="headerlink" title="配置 PostCSS"></a>配置 PostCSS</h3><p>PostCSS 是一个使用 JavaScript 插件转换 CSS 的工具。在这个项目中，我们使用了两个关键插件：</p><ul><li>Tailwind CSS 插件：处理 Tailwind CSS 相关的样式生成</li><li>Autoprefixer 插件：自动添加厂商前缀以确保样式在不同浏览器中的兼容性</li></ul><p>通过 PostCSS，我们可以自动化处理 CSS，减少手动工作并提高样式兼容性。</p><p><code>postcss.config.js</code> 文件配置如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {<br>  <span class="hljs-attr">plugins</span>: {<br>    <span class="hljs-attr">tailwindcss</span>: {},<br>    <span class="hljs-attr">autoprefixer</span>: {},<br>  },<br>};<br></code></pre></td></tr></table></figure><h3 id="添加常用组件和工具"><a href="#添加常用组件和工具" class="headerlink" title="添加常用组件和工具"></a>添加常用组件和工具</h3><p>通过创建可复用的 UI 组件和自定义 Hooks，可以大大提高开发效率并保证界面一致性。路径别名的配置使得导入模块更加简洁，避免了复杂的相对路径引用。</p><p>创建基础 UI 组件：在 <code>src/components/ui</code> 目录下创建一些基础 UI 组件，例如按钮、输入框等</p><p>创建自定义 Hooks：在 <code>src/hooks</code> 目录下创建常用的自定义 Hooks，例如 <code>useLocalStorage</code>、<code>useToggle</code> 等</p><p>配置路径别名：在 <code>tsconfig.json</code> 中配置路径别名，方便导入模块：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">{</span><br>  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><br>    <span class="hljs-comment">// ... 其他配置</span><br>    <span class="hljs-attr">"baseUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"."</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"paths"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><br>      <span class="hljs-attr">"@/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"src/*"</span><span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">}</span><br>  <span class="hljs-punctuation">}</span><br><span class="hljs-punctuation">}</span><br></code></pre></td></tr></table></figure><p>通过创建可复用的 UI 组件和自定义 Hooks，可以大大提高开发效率并保证界面一致性。路径别名的配置使得导入模块更加简洁，避免了复杂的相对路径引用。</p><h3 id="其他重要配置文件说明"><a href="#其他重要配置文件说明" class="headerlink" title="其他重要配置文件说明"></a>其他重要配置文件说明</h3><h4 id="gitignore"><a href="#gitignore" class="headerlink" title=".gitignore"></a>.gitignore</h4><p><code>.gitignore</code> 文件用于指定 Git 应当忽略的文件和目录，防止不必要的文件被提交到代码仓库。在本项目中，该文件包含了以下几类被忽略的内容：</p><ol><li><strong>系统文件</strong>：如 macOS 系统生成的 <code>.DS_Store</code> 文件</li><li><strong>日志文件</strong>：如 npm、yarn 等生成的日志文件</li><li><strong>依赖目录</strong>：如 <code>node_modules/</code> 目录</li><li><strong>构建输出</strong>：如构建工具生成的 <code>dist/</code>、<code>.next/</code> 等目录</li><li><strong>缓存文件</strong>：如各种工具生成的缓存文件</li><li><strong>环境变量文件</strong>：如 <code>.env</code> 及其变体文件，防止敏感信息泄露</li><li><strong>编辑器配置</strong>：如编辑器生成的临时文件</li></ol><p>通过合理配置 <code>.gitignore</code>，可以减小代码仓库体积，保护敏感信息，并避免无关文件干扰开发。</p><h4 id="editorconfig"><a href="#editorconfig" class="headerlink" title=".editorconfig"></a>.editorconfig</h4><p><code>.editorconfig</code> 文件用于统一不同编辑器和 IDE 的代码格式设置。在团队协作中，不同开发者可能使用不同的编辑器，该文件可以确保所有人使用相同的编码规范：</p><ul><li>使用空格缩进，缩进大小为 2 个空格</li><li>行尾符使用 LF (Unix 风格)</li><li>字符编码使用 UTF-8</li><li>自动删除行尾空白字符</li><li>文件末尾自动添加新行</li></ul><p>这有助于保持代码风格的一致性，避免因编辑器差异导致的格式混乱。</p><h4 id="prettierrc-js"><a href="#prettierrc-js" class="headerlink" title=".prettierrc.js"></a>.prettierrc.js</h4><p>Prettier 配置文件，用于统一代码格式化风格：</p><ul><li>不使用分号结尾</li><li>对象和数组末尾保留逗号</li><li>使用单引号而非双引号</li><li>单行最大宽度为 120 字符</li><li>缩进使用 2 个空格</li><li>行尾符自动适应操作系统</li></ul><p>Prettier 会在保存文件或执行格式化命令时自动应用这些规则，确保整个项目的代码风格统一。</p><h4 id="commitlint-config-cjs"><a href="#commitlint-config-cjs" class="headerlink" title="commitlint.config.cjs"></a>commitlint.config.cjs</h4><p>Commitlint 配置文件，用于校验 Git 提交信息的格式。它继承了 <code>@commitlint/config-conventional</code> 规则，要求提交信息遵循约定式提交规范：</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs fortran">&lt;<span class="hljs-keyword">type</span>&gt;[<span class="hljs-keyword">optional</span> scope]: &lt;description&gt;<br><br>[<span class="hljs-keyword">optional</span> body]<br><br>[<span class="hljs-keyword">optional</span> footer(s)]<br></code></pre></td></tr></table></figure><p>其中 type 必须是以下几种之一：</p><ul><li>feat: 新功能</li><li>fix: 修复 bug</li><li>chore: 构建过程或辅助工具的变动</li><li>docs: 文档更新</li><li>style: 代码格式调整</li><li>refactor: 重构</li><li>perf: 性能优化</li><li>test: 测试用例</li></ul><p>这有助于生成标准化的变更日志，便于团队理解和维护项目历史。</p><h4 id="stylelintrc-json"><a href="#stylelintrc-json" class="headerlink" title=".stylelintrc.json"></a>.stylelintrc.json</h4><p>Stylelint 配置文件，用于检查 CSS/LESS 样式代码的质量和风格。该项目配置了：</p><ul><li>继承标准规则集和 Prettier 推荐规则</li><li>支持 LESS 语法</li><li>启用 Prettier 规则</li><li>自定义类名命名规范（小写字母和连字符）</li><li>允许未知的 at-rule（为了支持 LESS 特性）</li></ul><p>通过 Stylelint 可以确保样式代码的一致性和质量，避免常见的样式错误。</p><h4 id="lint-staged-config-js"><a href="#lint-staged-config-js" class="headerlink" title="lint-staged.config.js"></a>lint-staged.config.js</h4><p>Lint-staged 配置文件，用于对 Git 暂存区的文件执行检查和格式化：</p><ul><li>对 TypeScript 文件执行 ESLint 和 Prettier</li><li>对 JavaScript 文件执行 ESLint 和 Prettier</li><li>对 LESS 和 CSS 文件执行 Stylelint</li><li>对其他文件执行相应检查</li></ul><p>这确保只有符合规范的代码才能被提交到仓库，提升整体代码质量。</p><h3 id="开发环境和生产环境配置"><a href="#开发环境和生产环境配置" class="headerlink" title="开发环境和生产环境配置"></a>开发环境和生产环境配置</h3><p>开发环境启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm run dev<br></code></pre></td></tr></table></figure><p>构建生产版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm run build<br></code></pre></td></tr></table></figure><p>预览生产构建</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm run preview<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Vite-React-TypeScript-Tailwind-CSS-脚手架搭建指南&quot;&gt;&lt;a href=&quot;#Vite-React-TypeScript-Tailwind-CSS-脚手架搭建指南&quot; class=&quot;headerlink&quot; title=&quot;Vite + R</summary>
      
    
    
    
    <category term="Github" scheme="https://zhongye1.github.io/Arknight-notes/categories/Github/"/>
    
    
    <category term="前端开发" scheme="https://zhongye1.github.io/Arknight-notes/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>2025-11-22- 使用 GitHub Actions 自动部署基于vite的项目到 GitHub Pages</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/33040.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/33040.html</id>
    <published>2025-11-22T17:59:24.000Z</published>
    <updated>2025-11-22T18:14:24.776Z</updated>
    
    <content type="html"><![CDATA[<p>本文讲了在新创建前端项目后，如何通过 GitHub-Actions 实现每次 push 到 main 分支后，GitHub 自动构建 → 自动发布页面的操作</p><p>参考 <a href="https://zhongye1.github.io/BDdraw_DEV/#/">https://zhongye1.github.io/BDdraw_DEV/#/</a><br>其从仓库 <a href="https://github.com/Zhongye1/BDdraw_DEV">https://github.com/Zhongye1/BDdraw_DEV</a> 实现自动构建和部署</p><h3 id="0-前置条件"><a href="#0-前置条件" class="headerlink" title="0.前置条件"></a>0.前置条件</h3><ul><li>GitHub 账户 + 一个 public 仓库（私有仓库需要 GitHub Pro 才能开 Pages）</li></ul><h3 id="1-创建-GitHub-Actions-工作流"><a href="#1-创建-GitHub-Actions-工作流" class="headerlink" title="1. 创建 GitHub Actions 工作流"></a>1. 创建 GitHub Actions 工作流</h3><p>在仓库根目录创建文件： .github/workflows/deploy.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">to</span> <span class="hljs-string">GitHub</span> <span class="hljs-string">Pages</span><br><br><span class="hljs-attr">on:</span><br>  <span class="hljs-attr">push:</span><br>    <span class="hljs-attr">branches:</span> [<span class="hljs-string">main</span>]<br>  <span class="hljs-attr">workflow_dispatch:</span><br><br><span class="hljs-attr">permissions:</span><br>  <span class="hljs-attr">contents:</span> <span class="hljs-string">read</span><br>  <span class="hljs-attr">pages:</span> <span class="hljs-string">write</span><br>  <span class="hljs-attr">id-token:</span> <span class="hljs-string">write</span><br><br><span class="hljs-attr">jobs:</span><br>  <span class="hljs-attr">deploy:</span><br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">github-pages</span><br>      <span class="hljs-attr">url:</span> <span class="hljs-string">${{</span> <span class="hljs-string">steps.deployment.outputs.page_url</span> <span class="hljs-string">}}</span><br>    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span><br>    <span class="hljs-attr">steps:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Checkout</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v4</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">Bun</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">oven-sh/setup-bun@v1</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">bun-version:</span> <span class="hljs-string">latest</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">dependencies</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">bun</span> <span class="hljs-string">install</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span><br>        <span class="hljs-attr">run:</span> <span class="hljs-string">bun</span> <span class="hljs-string">run</span> <span class="hljs-string">build</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">Pages</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/configure-pages@v5</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Upload</span> <span class="hljs-string">artifact</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/upload-pages-artifact@v3</span><br>        <span class="hljs-attr">with:</span><br>          <span class="hljs-attr">path:</span> <span class="hljs-string">"./dist"</span><br><br>      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">to</span> <span class="hljs-string">GitHub</span> <span class="hljs-string">Pages</span><br>        <span class="hljs-attr">id:</span> <span class="hljs-string">deployment</span><br>        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/deploy-pages@v4</span><br></code></pre></td></tr></table></figure><h3 id="2-配置-vite-config-ts-的-base"><a href="#2-配置-vite-config-ts-的-base" class="headerlink" title="2. 配置 vite.config.ts 的 base"></a>2. 配置 vite.config.ts 的 base</h3><p>打开 vite.config.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs TypeScript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span><br><span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-react'</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({<br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">react</span>()],<br>  <span class="hljs-attr">base</span>: <span class="hljs-string">'/BDdraw_DEV/'</span>,   <span class="hljs-comment">// 必须和你的仓库名完全一致！大小写也要一样</span><br>})<br></code></pre></td></tr></table></figure><p>如果想让它在本地开发和 GitHub Pages 都正常，可以写成动态 base：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs TypeScript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({<br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">react</span>()],<br>  <span class="hljs-attr">base</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> ? <span class="hljs-string">'/BDdraw_DEV/'</span> : <span class="hljs-string">'/'</span>,<br>})<br></code></pre></td></tr></table></figure><h3 id="3-GitHub-仓库设置-Pages-为-Actions-模式"><a href="#3-GitHub-仓库设置-Pages-为-Actions-模式" class="headerlink" title="3. GitHub 仓库设置 Pages 为 Actions 模式"></a>3. GitHub 仓库设置 Pages 为 Actions 模式</h3><ol><li>进入仓库 → Settings → Pages（左侧菜单）</li><li>Build and deployment → Source 选 <strong>GitHub Actions</strong></li><li>保存</li></ol><h3 id="4-提交代码触发第一次部署"><a href="#4-提交代码触发第一次部署" class="headerlink" title="4. 提交代码触发第一次部署"></a>4. 提交代码触发第一次部署</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Bash">git add .<br>git commit -m <span class="hljs-string">"chore: 新建 GitHub Actions 部署工作流"</span><br>git push origin main<br></code></pre></td></tr></table></figure><p>然后去仓库 → Actions 标签页，就能看到正在跑的 “Deploy to GitHub Pages” 工作流。</p><p>成功后可以前往对应的 GitHub Pages 地址查看效果</p><p class='item-img' data-src='https://pica.zhimg.com/v2-25ed9b20ac34367edf61581afc6742ea_r.jpg'><img src="https://pica.zhimg.com/v2-25ed9b20ac34367edf61581afc6742ea_r.jpg" alt="alt text"></p><p>只要 push 到 main 分支，GitHub Actions 就会自动触发工作流，实现自动部署。</p><blockquote><p>如果是私有仓库，需要 GitHub Pro 才能开 Pages</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本文讲了在新创建前端项目后，如何通过 GitHub-Actions 实现每次 push 到 main 分支后，GitHub 自动构建 → 自动发布页面的操作&lt;/p&gt;
&lt;p&gt;参考 &lt;a href=&quot;https://zhongye1.github.io/BDdraw_DEV/#</summary>
      
    
    
    
    <category term="Github" scheme="https://zhongye1.github.io/Arknight-notes/categories/Github/"/>
    
    
    <category term="前端开发" scheme="https://zhongye1.github.io/Arknight-notes/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>2025-11-22- 关于前端包管理器npm,pnpm,yarn和bun以及我为何选择后者</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/15722.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/15722.html</id>
    <published>2025-11-22T13:21:15.000Z</published>
    <updated>2025-11-22T13:39:37.145Z</updated>
    
    <content type="html"><![CDATA[<p><strong>因为快。</strong></p><p>2025 年，Bun 作为一个「全能型」运行时 + 包管理器，在实际项目中对传统包管理器（npm/yarn/pnpm）确实有相当大的优势，很多人已经开始抛弃 npm/yarn/pnpm，转用 Bun 作为前端项目的包管理器</p><h3 id="初识-Bun-管理器"><a href="#初识-Bun-管理器" class="headerlink" title="初识 Bun 管理器"></a>初识 Bun 管理器</h3><p>Bun 是 JavaScript 和 TypeScript 应用程序的一站式工具包。它作为一个名为<code>bun</code>的单个可执行文件提供。</p><p>其核心是 Bun 运行时，这是一个快速的 JavaScript 运行时，设计为 Node.js 的即插即用替代品。它是用 Zig 编写的，在底层由 JavaScriptCore 驱动，大大减少了启动时间和内存使用。</p><h3 id="对比其他包管理器"><a href="#对比其他包管理器" class="headerlink" title="对比其他包管理器"></a>对比其他包管理器</h3><h4 id="1-npm（Node-Package-Manager）"><a href="#1-npm（Node-Package-Manager）" class="headerlink" title="1. npm（Node Package Manager）"></a>1. npm（Node Package Manager）</h4><p><strong>核心实现</strong>：</p><ul><li><strong>依赖存储与解析</strong>：使用扁平化依赖树（flattened dependency tree，自 v3+ 引入），但仍依赖传统的 node_modules 目录结构。每个包及其子依赖都会下载 tarball（压缩包），然后解压到本地 node_modules 中。如果有版本冲突，会创建嵌套的 node_modules 子目录（hoisting 机制试图扁平化，但不总是完美）。</li><li><strong>锁文件</strong>：package-lock.json，记录精确的依赖树和哈希值，确保可重现安装。</li><li><strong>缓存机制</strong>：全局缓存在 ~/.npm（或 Windows 的 %AppData%\npm-cache），存储 tarball 和元数据。安装时先检查缓存，命中则直接解压。</li><li><strong>下载与并行</strong>：自 v7+ 支持并行下载（自 v5+），使用 HTTP/1.1 或 HTTP/2，但解析依赖树时仍依赖 JavaScript 引擎（Node.js），导致启动开销大。</li><li><strong>monorepo 支持</strong>：基本支持（通过 workspaces），但需手动配置，效率一般。</li></ul><p><strong>技术栈</strong>：纯 Node.js 实现，CLI 基于 npm-cli。</p><h4 id="2-pnpm（Performant-NPM）"><a href="#2-pnpm（Performant-NPM）" class="headerlink" title="2. pnpm（Performant NPM）"></a>2. pnpm（Performant NPM）</h4><p><strong>核心实现</strong>：</p><ul><li><strong>依赖存储与解析</strong>：引入<strong>内容寻址存储（content-addressable store）</strong>，所有包统一存储在全局 .pnpm/store（硬链接 + 符号链接）。项目中只生成一个扁平的 node_modules/.pnpm 目录，通过符号链接（symlinks）指向全局包，避免重复下载。严格的 peer dependency 隔离，防止“幽灵依赖”（phantom dependencies）。</li><li><strong>锁文件</strong>：pnpm-lock.yaml，YAML 格式，记录依赖图和完整哈希链。</li><li><strong>缓存机制</strong>：全局 store + 硬链接，安装时直接链接现有包（无解压开销）。支持范围补丁（patching），允许动态修改依赖。</li><li><strong>下载与并行</strong>：并行下载 + 增量更新，自 v8+ 优化为“聪明缓存”，只下载变化部分。monorepo 原生支持（workspace 协议），通过过滤命令（如 pnpm -r）高效处理多包。</li><li><strong>monorepo 支持</strong>：最佳，原生高效，节省 70-80% 磁盘。</li></ul><p><strong>技术栈</strong>：Node.js 实现，但使用 Rust-like 的高效链接系统（实际是 JS + 文件系统优化）。</p><h4 id="3-Yarn-Berry（Yarn-v2-）"><a href="#3-Yarn-Berry（Yarn-v2-）" class="headerlink" title="3. Yarn Berry（Yarn v2+）"></a>3. Yarn Berry（Yarn v2+）</h4><p><strong>核心实现</strong>：</p><ul><li><strong>依赖存储与解析</strong>：革命性 <strong>Plug’n’Play (PnP)</strong> 模式，默认<strong>完全消除 node_modules</strong>。依赖通过 .pnp.cjs（或 .pnp.js）文件映射（类似虚拟文件系统），运行时动态解析路径，而非物理目录。备选 nodeLinker: node-modules 模式回退到传统结构。</li><li><strong>锁文件</strong>：yarn.lock（v2+ 格式），包含完整依赖树、校验和和 ZIP 存档引用。</li><li><strong>缓存机制</strong>：项目级 .yarn/cache，存储 ZIP 压缩的包（可提交到 Git，实现“零安装”——clone 后直接运行）。支持“零安装”（zero-installs），CI/CD 无需重新下载。</li><li><strong>下载与并行</strong>：并行下载 + 增量缓存，自 v3+ 引入 Constraints（依赖规则检查）。monorepo 通过 Workspaces + Plug’n’Play 实现高效共享。</li><li><strong>monorepo 支持</strong>：优秀，支持 Constraints 和 Patch 协议，适合大型团队。</li></ul><p><strong>技术栈</strong>：Node.js 实现，但 PnP 使用自定义加载器（loader）拦截模块解析。</p><h4 id="4-Bun"><a href="#4-Bun" class="headerlink" title="4. Bun"></a>4. Bun</h4><p><strong>核心实现</strong>：</p><ul><li><strong>依赖存储与解析</strong>：<strong>无 node_modules</strong>，所有包存储在全局单例缓存（~/.bun/install/cache），项目只生成极小的 .bun 文件夹（二进制锁文件）。使用<strong>极致压缩 + 硬链接</strong>，运行时直接从缓存加载（跳过解压）。兼容 npm 注册表，但内置 JSR（JavaScript Registry）支持。</li><li><strong>锁文件</strong>：bun.lockb，二进制格式（超小、超快解析）。</li><li><strong>缓存机制</strong>：全局缓存 + 内容哈希，安装时并行下载并验证哈希。支持“热缓存”（hot cache），CI 复用率近 100%。</li><li><strong>下载与并行</strong>：使用 Zig 语言编写的超快解析器（非 JS），HTTP/3 支持 + 原生并行。monorepo 自动识别，无需额外配置。</li><li><strong>monorepo 支持</strong>：优秀，极速安装，但生态仍在完善（2025 年已稳定）。</li></ul><p><strong>技术栈</strong>：Zig + JavaScriptCore（WebKit 引擎），非 Node.js 依赖，实现全栈（包管理 + bundler + 测试运行器）。</p><p>基于 pnpm 官方基准（2025-11-16 更新）、Bun 团队报告和社区测试，四个包管理器中<strong>Bun 整体最快，pnpm/Yarn Berry 在磁盘效率上领先，npm 最稳但最慢</strong>。</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>Bun 支持 Linux（x64 和 arm64）和 macOS（x64 和 Apple Silicon）。</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 使用npm</span><br>npm install -g bun<br></code></pre></td></tr></table></figure><h3 id="升级"><a href="#升级" class="headerlink" title="升级"></a>升级</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text">bun upgrade<br></code></pre></td></tr></table></figure><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p><code>bun</code>命令行工具实现了测试运行器、脚本运行器和与 Node.js 兼容的包管理器。Bun 的内置工具明显比现有选项快，并且在现有 Node.js 项目中几乎不需要进行任何更改。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">bun <span class="hljs-built_in">test</span>                      <span class="hljs-comment"># 运行测试</span><br>bun run start                 <span class="hljs-comment"># 运行`package.json`中的`start`脚本</span><br>bun install &lt;pkg&gt;             <span class="hljs-comment"># 安装包</span><br>bunx cowsay <span class="hljs-string">'Hello, world!'</span>   <span class="hljs-comment"># 执行包</span><br>bun run index.tsx             <span class="hljs-comment"># 默认支持TS和JSX</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;因为快。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;2025 年，Bun 作为一个「全能型」运行时 + 包管理器，在实际项目中对传统包管理器（npm/yarn/pnpm）确实有相当大的优势，很多人已经开始抛弃 npm/yarn/pnpm，转用 Bun 作为前端项目的包</summary>
      
    
    
    
    <category term="Github项目" scheme="https://zhongye1.github.io/Arknight-notes/categories/Github%E9%A1%B9%E7%9B%AE/"/>
    
    
    <category term="前端开发" scheme="https://zhongye1.github.io/Arknight-notes/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>2025-11-22-canvas状态管理杂记3</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/15704.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/15704.html</id>
    <published>2025-11-22T08:43:45.000Z</published>
    <updated>2025-11-22T13:39:37.144Z</updated>
    
    <content type="html"><![CDATA[<p>撤销栈中并不全是快照命令。系统中至少有两种不同类型的命令：</p><ol><li><p><strong>快照命令（SnapshotCommand）</strong>：</p><ul><li>用于记录整个画布状态的变化</li><li>通常用于添加元素、删除元素等较大范围的操作</li><li>保存完整的状态快照</li></ul></li><li><p><strong>更新元素命令（UpdateElementCommand）</strong>：</p><ul><li>用于记录特定元素的属性变化</li><li>主要用于拖拽移动和调整大小操作</li><li>只保存相关元素的特定属性变化</li></ul></li></ol><h2 id="操作序列和撤销栈状态变化"><a href="#操作序列和撤销栈状态变化" class="headerlink" title="操作序列和撤销栈状态变化"></a>操作序列和撤销栈状态变化</h2><h3 id="初始状态"><a href="#初始状态" class="headerlink" title="初始状态"></a>初始状态</h3><p>撤销栈：空 重做栈：空</p><h3 id="1-创建元素A"><a href="#1-创建元素A" class="headerlink" title="1. 创建元素A"></a>1. 创建元素A</h3><p>当创建元素A时，系统会生成一个快照命令，记录整个画布状态的变化。</p><p>撤销栈：[SnapshotCommand_A] (大小: 1) 重做栈：空</p><h3 id="2-移动A到一个位置"><a href="#2-移动A到一个位置" class="headerlink" title="2. 移动A到一个位置"></a>2. 移动A到一个位置</h3><p>当移动元素A时，系统会生成一个更新元素命令（UpdateElementCommand），只记录A元素位置的变化。</p><p>撤销栈：[SnapshotCommand_A, UpdateElementCommand_MoveA] (大小: 2) 重做栈：空</p><h3 id="3-创建元素B"><a href="#3-创建元素B" class="headerlink" title="3. 创建元素B"></a>3. 创建元素B</h3><p>当创建元素B时，系统会生成另一个快照命令，记录添加B元素后的状态。</p><p>撤销栈：[SnapshotCommand_A, UpdateElementCommand_MoveA, SnapshotCommand_B] (大小: 3) 重做栈：空</p><h3 id="4-缩放B到一个位置"><a href="#4-缩放B到一个位置" class="headerlink" title="4. 缩放B到一个位置"></a>4. 缩放B到一个位置</h3><p>当缩放元素B时，系统会生成一个更新元素命令，记录B元素尺寸和位置的变化。</p><p>撤销栈：[SnapshotCommand_A, UpdateElementCommand_MoveA, SnapshotCommand_B, UpdateElementCommand_ResizeB] (大小: 4) 重做栈：空</p><h3 id="5-移动B到一个位置"><a href="#5-移动B到一个位置" class="headerlink" title="5. 移动B到一个位置"></a>5. 移动B到一个位置</h3><p>当再次移动元素B时，系统会生成另一个更新元素命令，记录B元素位置的新变化。</p><p>撤销栈：[SnapshotCommand_A, UpdateElementCommand_MoveA, SnapshotCommand_B, UpdateElementCommand_ResizeB, UpdateElementCommand_MoveB] (大小: 5) 重做栈：空</p><h2 id="执行撤销操作时的状态变化"><a href="#执行撤销操作时的状态变化" class="headerlink" title="执行撤销操作时的状态变化"></a>执行撤销操作时的状态变化</h2><h3 id="第一次撤销（移动B操作）"><a href="#第一次撤销（移动B操作）" class="headerlink" title="第一次撤销（移动B操作）"></a>第一次撤销（移动B操作）</h3><ol><li>从撤销栈弹出最后一个命令：UpdateElementCommand_MoveB</li><li>执行该命令的undo()方法，将B元素恢复到缩放后的位置</li><li>将该命令推入重做栈</li></ol><p>撤销栈：[SnapshotCommand_A, UpdateElementCommand_MoveA, SnapshotCommand_B, UpdateElementCommand_ResizeB] (大小: 4) 重做栈：[UpdateElementCommand_MoveB] (大小: 1)</p><h3 id="第二次撤销（缩放B操作）"><a href="#第二次撤销（缩放B操作）" class="headerlink" title="第二次撤销（缩放B操作）"></a>第二次撤销（缩放B操作）</h3><ol><li>从撤销栈弹出最后一个命令：UpdateElementCommand_ResizeB</li><li>执行该命令的undo()方法，将B元素恢复到刚创建时的尺寸和位置</li><li>将该命令推入重做栈</li></ol><p>撤销栈：[SnapshotCommand_A, UpdateElementCommand_MoveA, SnapshotCommand_B] (大小: 3) 重做栈：[UpdateElementCommand_MoveB, UpdateElementCommand_ResizeB] (大小: 2)</p><h3 id="第三次撤销（创建B操作）"><a href="#第三次撤销（创建B操作）" class="headerlink" title="第三次撤销（创建B操作）"></a>第三次撤销（创建B操作）</h3><ol><li>从撤销栈弹出最后一个命令：SnapshotCommand_B</li><li>执行该命令的undo()方法，将整个画布状态恢复到创建B之前的状态（即只包含A元素的状态）</li><li>将该命令推入重做栈</li></ol><p>撤销栈：[SnapshotCommand_A, UpdateElementCommand_MoveA] (大小: 2) 重做栈：[UpdateElementCommand_MoveB, UpdateElementCommand_ResizeB, SnapshotCommand_B] (大小: 3)</p><h3 id="第四次撤销（移动A操作）"><a href="#第四次撤销（移动A操作）" class="headerlink" title="第四次撤销（移动A操作）"></a>第四次撤销（移动A操作）</h3><ol><li>从撤销栈弹出最后一个命令：UpdateElementCommand_MoveA</li><li>执行该命令的undo()方法，将A元素恢复到初始位置</li><li>将该命令推入重做栈</li></ol><p>撤销栈：[SnapshotCommand_A] (大小: 1) 重做栈：[UpdateElementCommand_MoveB, UpdateElementCommand_ResizeB, SnapshotCommand_B, UpdateElementCommand_MoveA] (大小: 4)</p><h3 id="第五次撤销（创建A操作）"><a href="#第五次撤销（创建A操作）" class="headerlink" title="第五次撤销（创建A操作）"></a>第五次撤销（创建A操作）</h3><ol><li>从撤销栈弹出最后一个命令：SnapshotCommand_A</li><li>执行该命令的undo()方法，将整个画布状态恢复到初始状态（空画布）</li><li>将该命令推入重做栈</li></ol><p>撤销栈：空 重做栈：[UpdateElementCommand_MoveB, UpdateElementCommand_ResizeB, SnapshotCommand_B, UpdateElementCommand_MoveA, SnapshotCommand_A] (大小: 5)</p><p><code>undoRedoManager.lock()</code> 锁定管理器</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;撤销栈中并不全是快照命令。系统中至少有两种不同类型的命令：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;快照命令（SnapshotCommand）&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用于记录整个画布状态的变化&lt;/li&gt;
&lt;li&gt;通常用于添加元素、删除元素等较</summary>
      
    
    
    
    <category term="归档" scheme="https://zhongye1.github.io/Arknight-notes/categories/%E5%BD%92%E6%A1%A3/"/>
    
    
  </entry>
  
  <entry>
    <title>2025-11-22-canvas项目实现杂记其一</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/17360.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/17360.html</id>
    <published>2025-11-22T04:34:05.000Z</published>
    <updated>2025-11-23T04:30:29.283Z</updated>
    
    <content type="html"><![CDATA[<h3 id="DSF-MA"><a href="#DSF-MA" class="headerlink" title="DSF-MA"></a>DSF-MA</h3><p>进入了字节工训营，干的前端方向，发了个任务要实现一个画布类产品对标 Excalidraw 和飞书 Slide 这种</p><p>库的话不允许使用 react-flow、tldraw、konva 等开源图形库，允许使用基础渲染库（pixi），局部功能使用三方库可接受，主要业务逻辑需自行实现，允许使用 Cursor/Trae 等 AI 编辑器，限制目前是这些</p><p>整理一份计划文稿具体拆解一下任务，如下所示</p><h3 id="任务列表"><a href="#任务列表" class="headerlink" title="任务列表"></a>任务列表</h3><h4 id="【P0】基础渲染"><a href="#【P0】基础渲染" class="headerlink" title="【P0】基础渲染"></a>【P0】基础渲染</h4><ul><li>支持图形渲染，需要支持至少 3 种不同图形，比如矩形、圆角矩形、圆形、直线、箭头、菱形等。需要支持以下图形属性：<ul><li>背景色（background）</li><li>边框宽度（border-width）</li><li>边框颜色（border-color）</li></ul></li><li>支持图片渲染，需要支持 png、jpeg 格式，支持设置三种简单滤镜</li><li>支持富文本文字渲染，需要支持以下文本属性：<ul><li>字体（font-family）</li><li>字号（font-size）</li><li>颜色（color）</li><li>背景色（background）</li><li>BIUS（加粗、斜体、下划线、删除线）</li></ul></li></ul><h4 id="【P0】画布交互"><a href="#【P0】画布交互" class="headerlink" title="【P0】画布交互"></a>【P0】画布交互</h4><ul><li>支持无限画布的缩放、滚动、拖拽<ul><li>【挑战】支持无限画布滚动条</li><li>【挑战】支持无限画布的 minimap 功能</li></ul></li><li>支持选区功能：<ul><li><strong>点击选中单个元素</strong></li><li><strong>框选选中多个元素</strong></li></ul></li><li>支持数据持久化，每次操作后自动保存数据，刷新页面数据仍然存在</li><li>快捷键复制选中元素，粘贴后刷新页面还存在</li><li>【挑战】支持辅助线功能</li></ul><h4 id="【P0】调参工具栏"><a href="#【P0】调参工具栏" class="headerlink" title="【P0】调参工具栏"></a>【P0】调参工具栏</h4><ul><li>浮动工具栏<ul><li>当选中文本元素时出现在上方，支持设置不同文本属性</li><li>当选中图形元素时出现在上方，支持设置不同图形属性</li><li>当选中图片元素时出现在上方，支持设置不同图片属性</li><li>【挑战】选中文本元素的部分文字时也能够出现，支持设置局部文本的文本属性</li></ul></li></ul><h4 id="【P0】元素编辑"><a href="#【P0】元素编辑" class="headerlink" title="【P0】元素编辑"></a>【P0】元素编辑</h4><ul><li>支持双击文本进入编辑，可以输入/删除文本内容</li><li>支持对选中元素（单个或多个）删除</li><li>支持对选中元素（单个或多个）拖拽</li><li>支持对选中元素（单个或多个）缩放</li><li>【挑战】支持对选中元素（单个或多个）旋转</li><li>【挑战】支持对多个元素进行组合操作，组合可以嵌套</li><li>【挑战】支持对多个元素进行打组、解组</li></ul><h4 id="【P0】性能优化"><a href="#【P0】性能优化" class="headerlink" title="【P0】性能优化"></a>【P0】性能优化</h4><ul><li>画布存在 100 个元素，打开页面到渲染完成 &lt; 3s</li><li>【挑战】同时操作 100 个元素，FPS 50+</li></ul><h4 id="【P1】协同"><a href="#【P1】协同" class="headerlink" title="【P1】协同"></a>【P1】协同</h4><ul><li>【挑战】支持 undo &amp; redo 操作</li><li>【挑战】支持协同编辑，多人打开同一个画布可以协同编辑</li><li>【挑战】支持离线编辑，断网后仍然可以对画布编辑，恢复网络后自动提交数据</li></ul><h3 id="技术选型"><a href="#技术选型" class="headerlink" title="技术选型"></a>技术选型</h3><p>这时候需要简单做一个技术选型分析，根据任务拆解，选择了如下技术栈</p><p><strong>【框架】</strong>【技术方案：采用 React 18 + TypeScript 5 构建应用，React 提供完整的 UI 生态，TypeScript 提供更清晰可靠的类型安全，相比 JavaScript 更易于维护】</p><p><strong>【构建工具】</strong>【技术方案：使用 Vite 5 作为构建工具，其开发服务器启动和热模块替换（HMR）速度明显快于 Webpack】</p><p><strong>【路由】</strong>【技术方案：采用 React Router DOM 6 实现路由管理，API 稳定且文档完善】</p><p><strong>【样式】</strong>【技术方案：使用 Tailwind CSS 3 + PostCSS 处理样式，开发时编写样式更快，生产环境会自动进行 tree-shaking 优化，相比 CSS Modules 和 styled-components 更高效且原子化更直观，对 AI 工具友好】</p><p><strong>【样式扩展】</strong>【技术方案：少量使用 Less 覆盖 Tailwind 主题变量，保持兼容性】</p><p><strong>【SVG 处理】</strong>【技术方案：使用 SVGR 1.5 处理 SVG，Vite 原生支持，可以将 SVG 作为 React 组件使用，比直接使用 SVG 或 SVG sprite 更灵活】</p><p><strong>【UI 组件库】</strong>【技术方案：采用 shadcn/ui（latest）和 Arco Design 2 实现 UI 组件，易于使用，符合字节项目使用字节组件库的习惯】</p><p><strong>【数据获取】</strong>【技术方案：使用 TanStack Query v5 进行数据获取，具备自动缓存、后台重试、预取等功能，并配有 Devtools】</p><p><strong>【全局状态】</strong>【技术方案：采用 Zustand 4 管理全局状态，API 简洁、性能良好且无样板代码，相比 Redux Toolkit、Pinia、Jotai 代码量更少且配有 Devtools】</p><p><strong>【图形/画布】</strong>【技术方案：使用 PixiJS 8 + pixi-viewport 实现图形和画布功能，基于 WebGL 渲染，适合处理大量精灵元素，相比其他可选方案性能更高】</p><p><strong>【富文本编辑器】</strong>【技术方案：采用 WangEditor 5 作为富文本编辑器，轻量且文档和社区均为中文，相比 Slate/TipTap 等编辑器，默认输出的 HTML 可直接给 PixiJS HTMLText 进行渲染】</p><p><strong>【图标】</strong>【技术方案：使用 Lucide React 图标库，图标数量多、风格统一且支持 Tree-shaking】</p><p><strong>【工具库】</strong>【技术方案：采用 nanoid 3 为画布元素生成唯一标识符等操作，轻量实用】</p><p><strong>【代码质量】</strong>【技术方案：使用 ESLint + Stylelint + Prettier + Husky + lint-staged + commitlint 保证团队代码风格一致，这是中大型项目的基本配置，有利于多人协作开发】</p><p>此外，还配置了 react 开发者工具 react-dev-inspector，配置了一下，开发环境下 ctrl+q 可以实现点击页面上的组件，在 VSCode 中自动跳转到对应文件，并定位到对应行号，方便调试（先前写 vue 也用过类似的）</p><p>项目 <a href="https://react-dev-inspector.zthxxx.me/docs">https://react-dev-inspector.zthxxx.me/docs</a></p><h3 id="功能要素和方案"><a href="#功能要素和方案" class="headerlink" title="功能要素和方案"></a>功能要素和方案</h3><p>分析以上需求，查阅相关资料后，进行各个核心模块的技术方案选型，确定初步实现方案</p><p><strong>【基础渲染引擎】</strong>【技术方案：PixiJS v8（WebGL）提供高性能 2D 渲染，根据不同元素类型创建对应的 Pixi 对象（图形、文本、图像），通过 pixi-viewport 实现无限画布的视口控制，支持缩放、拖拽等交互】</p><p><strong>【无限画布视口】</strong>【技术方案：pixi-viewport（内置 zoom、drag、decelerate、clampZoom）库创建无限画布，在 StageManagerCore.ts 中初始化 viewport，并添加拖拽、缩放等交互功能，支持鼠标中键拖拽画布、滚轮缩放等常见操作】</p><p><strong>【富文本编辑】</strong>【技术方案：WangEditor 5 作为富文本编辑器，提供完整的文本编辑功能，编辑结果以 HTML 格式存储在元素的 text/string 属性中，元素使用 PixiJS 内置的 HTMLText 进行渲染实现富文本效果】</p><p><strong>【状态管理与数据结构】</strong>【技术方案：Zustand 作为全局状态管理库，通过 structuredClone 函数手动创建状态快照，管理画布元素、选中状态、工具类型等，通过中间件监听状态变化并触发重渲染，在特定的 ts 中定义所有状态和操作方法】</p><p><strong>【图片上传显示与滤镜】</strong>【技术方案：PixiJS 内置 Filter 系统包括 BlurFilter、ColorMatrixFilter（黑白、对比度、饱和度）实现图像处理效果，支持模糊、亮度调整、灰度等多种滤镜效果，在 ElementRenderer.ts 中根据元素的 filter 属性应用相应滤镜，支持 blur（模糊）、brightness（亮度）、grayscale（灰度）等滤镜类型】</p><p><strong>【选中与变换系统】</strong>【技术方案：SelectionManager + TransformOverlay（8 个把手 + 旋转把手）实现变换控件渲染，支持单个元素选中和多个元素群组选中，提供 8 个控制点和 1 个旋转点进行变换操作，根据不同元素类型提供不同的控制方式】</p><p><strong>【旋转与组合嵌套】</strong>【技术方案：每个元素维护自己的 matrix（局部矩阵），组合后父容器统一应用矩阵变换，支持多层级嵌套和复杂变换】</p><p><strong>【Minimap】</strong>【技术方案：单独一个小的 Pixi.Application（共享 texture 缓存）实现缩略图功能，主画布所有容器使用 cacheAsBitmap 后生成低分辨率 texture，实时更新到小画布，视口框用一个半透明矩形表示在主画布中的位置】</p><p><strong>【元素永久缓存】</strong>【技术方案：使用 spriteMap 来存储 PIXI 对象，元素更新时只修改属性并设置 container.dirty = true，而不是销毁重建，来解决拖拽中断、光标丢失、闪烁等问题】</p><p><strong>【辅助对齐线】</strong>【技术方案：拖拽时实时遍历所有元素 bounds，计算对齐情况（水平/垂直/间距相等），差值&lt;6px 就吸附并画蓝线，支持水平、垂直对齐以及等间距对齐等多种对齐方式，当距离小于阈值时自动吸附并对齐】</p><p><strong>【Undo/Redo】</strong>【技术方案：Command Pattern + structuredClone 完整快照（每步 before/after）实现撤销/重做功能，通过管理命令栈（undo，redo 栈），使用 structuredClone 创建状态快照，记录操作前后的完整状态，来支持添加元素、删除元素、修改元素属性等操作的撤销/重做，针对拖拽和调整大小操作的命令生成逻辑可能还要具体再处理一套】</p><p><strong>【数据持久化与离线】</strong>【技术方案：Zustand-persist + localForage（IndexedDB）实现数据持久化和离线使用，使用 Zustand 的持久化中间件保存状态，通过 localForage 将数据存储到 IndexedDB 中，实现数据的自动保存和恢复功能】</p><p><strong>【实时协同】</strong>【技术方案：Y.js + y-websocket（或自己写 CRDT）+ Operation Transform 合并策略实现无冲突的实时协同编辑，通过 y-websocket 插件实现服务端同步（问的 AI），有个思路是把操作打给时间 tag，然后然后按时间合并】</p><hr><h3 id="项目架构设计"><a href="#项目架构设计" class="headerlink" title="项目架构设计"></a>项目架构设计</h3><p>项目采用数据驱动视图（Data-Driven View）模式，使用<strong>React (UI) + Zustand (数据) + PixiJS (渲染)</strong>的三层架构</p><p>React 只负责 UI 和事件入口<br>Zustand 是唯一的真实数据源（纯 JSON，可持久化、可协同）<br>PixiJS 层只做”渲染 + 交互计算”，所有对象永久缓存（Map），绝不每帧重建<br>所有变换（拖拽、缩放、旋转、组合）都在 Pixi 层完成，最后再同步回 Zustand（单向数据流）</p><p>项目主要划分为三个层次：渲染层、状态管理层和逻辑层，来实现关注点分离，提高代码的可维护性和可扩展性。</p><h4 id="渲染层"><a href="#渲染层" class="headerlink" title="渲染层"></a><strong>渲染层</strong></h4><p>主要由 PixiJS (WebGL) 负责处理图形渲染，包括创建、更新和删除图形对象。这一层负责将状态管理层的数据转换为可视化的图形元素，并处理用户的交互操作，如拖拽、缩放和旋转等</p><h4 id="状态管理层"><a href="#状态管理层" class="headerlink" title="状态管理层"></a><strong>状态管理层</strong></h4><p>采用 Zustand 管理 JSON 画布数据。<br>先定义一个 CanvasState 接口（JSON 数据结构，包含 id, type, x, y, width, height 等属性）</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">CanvasState</span> {<br>  <span class="hljs-attr">tool</span>: <span class="hljs-title class_">ToolType</span>; <span class="hljs-comment">// 当前工具类型</span><br>  <span class="hljs-attr">elements</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">CanvasElement</span>&gt;; <span class="hljs-comment">// 画布元素集合</span><br>  <span class="hljs-attr">selectedIds</span>: <span class="hljs-built_in">string</span>[]; <span class="hljs-comment">// 选中元素ID列表</span><br>  <span class="hljs-attr">editingId</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>; <span class="hljs-comment">// 正在编辑的元素ID</span><br>  <span class="hljs-attr">clipboard</span>: <span class="hljs-title class_">CanvasElement</span>[] | <span class="hljs-literal">null</span>; <span class="hljs-comment">// 剪贴板数据</span><br>  <span class="hljs-attr">pasteOffset</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// 粘贴偏移计数</span><br>  <span class="hljs-attr">currentStyle</span>: {<br>    <span class="hljs-attr">fill</span>: <span class="hljs-built_in">string</span>;<br>    <span class="hljs-attr">stroke</span>: <span class="hljs-built_in">string</span>;<br>    <span class="hljs-attr">strokeWidth</span>: <span class="hljs-built_in">number</span>;<br>    <span class="hljs-comment">// ... 其他样式属性</span><br>  };<br>}<br></code></pre></td></tr></table></figure><p>使用 Zustand 状态管理库，其中 elements 被定义为 Record<string, CanvasElement="">类型，表示一个以 id 为键，CanvasElement 为值的对象，用于存储画布上的所有元素。更新元素时使用 structuredClone 函数来克隆状态数据。后续持久化存储和撤销重做机制也是基于这一套状态管理来实现。这一层作为数据核心，主要维护画布上所有元素的状态信息，通过集中管理状态，确保了数据的一致性，便于后续的协同编辑和撤销重做功能的开发。</string,></p><h4 id="逻辑层"><a href="#逻辑层" class="headerlink" title="逻辑层"></a><strong>逻辑层</strong></h4><p>核心是 StageManagerCore 类，通过 StageManagerState 接口管理交互状态，包括当前交互模式、起始位置、当前元素 ID、初始元素状态等，处理多种交互模式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">idle - 空闲状态<br>panning - 画布平移<br>selecting - 选择元素<br>dragging - 拖拽元素<br>resizing - 调整元素大小<br>drawing - 绘制元素<br>texting - 文本编辑<br>erasing - 擦除元素<br></code></pre></td></tr></table></figure><p>处理多种元素操作逻辑：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">创建元素 - 根据不同工具类型创建相应元素<br>选择元素 - 支持单选和多选<br>拖拽元素 - 记录初始状态，计算偏移量<br>调整大小 - 通过控制手柄调整元素尺寸<br>删除元素 - 通过橡皮擦工具删除元素<br></code></pre></td></tr></table></figure><p>通过这种方式来实现面向对象编程并封装业务逻辑，提高代码的可维护性，利用后续拓展</p><hr><h3 id="数据流程"><a href="#数据流程" class="headerlink" title="数据流程"></a>数据流程</h3><p class='item-img' data-src='https://picx.zhimg.com/v2-f31564e4cf50242b6d2a363b40f638f3_r.jpg'><img src="https://picx.zhimg.com/v2-f31564e4cf50242b6d2a363b40f638f3_r.jpg" alt=""><br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">graph TD<br>    A[用户交互] --&gt; B{交互类型}<br>    B --&gt;|创建元素| C[StageManagerCore.onPointerDown]<br>    B --&gt;|拖拽元素| D[StageManagerCore.onPointerMove]<br>    B --&gt;|调整大小| E[StageManagerCore.onHandleDown]<br>    B --&gt;|选择元素| F[StageManagerCore.onPointerUp]<br><br>    C --&gt; G[Zustand Store.addElement]<br>    D --&gt; H[Zustand Store.updateElement]<br>    E --&gt; I[Zustand Store.updateElement]<br>    F --&gt; J[Zustand Store.setSelected]<br><br>    G --&gt; K[Zustand 状态更新]<br>    H --&gt; K<br>    I --&gt; K<br>    J --&gt; K<br><br>    K --&gt; L{状态变化}<br>    L --&gt;|元素变化| M[ElementRenderer.renderElements]<br>    L --&gt;|选择变化| N[TransformerRenderer.renderTransformer]<br><br>    M --&gt; O[PixiJS 图形渲染]<br>    N --&gt; O<br><br>    O --&gt; P[用户看到更新结果]<br><br>    K --&gt; Q[Zustand 持久化]<br>    Q --&gt; R[本地存储/IndexedDB]<br><br>    K --&gt; S[撤销/重做管理]<br>    S --&gt; T[命令栈管理]<br><br>    style A fill:#e1f5fe<br>    style O fill:#e8f5e8<br>    style K fill:#fff3e0<br>    style Q fill:#fce4ec<br></code></pre></td></tr></table></figure></p><p>流程如下：</p><h4 id="用户交互输入"><a href="#用户交互输入" class="headerlink" title="用户交互输入"></a>用户交互输入</h4><p>所有用户交互事件由 StageManagerCore 处理<br>用户通过鼠标、键盘等方式与画布进行交互：</p><ul><li>创建新元素（点击工具栏选择图形类型后在画布上绘制）</li><li>拖拽元素（选中元素后拖动）</li><li>调整元素大小（拖拽元素控制点）</li><li>选择元素（点击或框选元素）</li></ul><h4 id="创建元素流程"><a href="#创建元素流程" class="headerlink" title="创建元素流程"></a>创建元素流程</h4><ol><li>用户在画布上按下鼠标开始绘制</li><li><a href="">onPointerDown</a>捕获事件，创建新元素</li><li>调用 Zustand store 的<a href="">addElement</a>方法添加元素</li></ol><blockquote><p>创建元素时的中间状态要锁定撤销/重做管理器防止记录中间的一堆状态</p></blockquote><h4 id="拖拽元素流程"><a href="#拖拽元素流程" class="headerlink" title="拖拽元素流程"></a>拖拽元素流程</h4><ol><li>用户按下并拖动已选中的元素</li><li><a href="">onPointerMove</a>持续捕获鼠标移动事件</li><li>实时调用 Zustand store 的<a href="">updateElement</a>更新元素位置</li></ol><blockquote><p>拖拽元素时也是中间状态要锁定撤销/重做管理器防止记录中间的一堆状态</p></blockquote><h4 id="调整大小流程"><a href="#调整大小流程" class="headerlink" title="调整大小流程"></a>调整大小流程</h4><ol><li>用户拖拽元素的控制点（resize handle）</li><li><a href="">onHandleDown</a>捕获控制点拖拽事件</li><li><a href="">onPointerMove</a>计算缩放比例并更新元素大小</li><li>调用 Zustand store 的<a href="">updateElement</a>更新元素属性</li></ol><blockquote><p>调整元素大小时也是中间状态要锁定撤销/重做管理器防止记录中间的一堆状态</p></blockquote><h4 id="交互结束处理"><a href="#交互结束处理" class="headerlink" title="交互结束处理"></a>交互结束处理</h4><ol><li>用户释放鼠标按键，<a href="">onPointerUp</a>处理交互结束,解锁撤销/重做管理器</li><li>创建相应的命令（<a href="">UpdateElementCommand</a>并添加到命令栈中</li><li>清理临时状态</li></ol><h4 id="状态更新"><a href="#状态更新" class="headerlink" title="状态更新"></a>状态更新</h4><p>Zustand 作为全局状态管理器，处理所有状态更新：</p><ol><li><strong>状态更新</strong>：自定义一套<a href="">originalSet</a>方法更新状态</li><li><strong>撤销/重做处理</strong>：创建状态快照并生成命令对象</li><li><strong>状态订阅</strong>：通知所有订阅者状态变化</li></ol><h4 id="渲染更新"><a href="#渲染更新" class="headerlink" title="渲染更新"></a>渲染更新</h4><p>Zustand 状态变化触发 StageManagerCore 的订阅回调：</p><ol><li><a href="">ElementRenderer.renderElements</a> 根据元素数据更新 PixiJS 图形对象</li><li><a href="">TransformerRenderer.renderTransformer</a> 更新选中元素的变换控制器</li><li>PixiJS 自动进行渲染</li></ol><h4 id="撤销-重做管理"><a href="#撤销-重做管理" class="headerlink" title="撤销/重做管理"></a>撤销/重做管理</h4><p>通过命令模式实现撤销/重做功能：</p><ol><li>每个操作生成对应的命令对象（<a href="">UpdateElementCommand</a>、<a href="">SnapshotCommand</a>等）</li><li>命令对象保存操作前后的状态快照</li><li>通过<a href="">UndoRedoManager</a>管理命令栈，实现撤销和重做功能</li></ol><blockquote><p>目前 undo 栈 redo 栈有一些不能稳定复现的小概率触发的 bug，还在修</p></blockquote><h4 id="数据持久化阶段"><a href="#数据持久化阶段" class="headerlink" title="数据持久化阶段"></a>数据持久化阶段</h4><p>Zustand 状态变化同时触发数据持久化：</p><ol><li>状态通过<a href="">persist</a>中间件自动保存到本地存储</li><li>数据存储在 IndexedDB 中，来支持离线使用</li></ol><blockquote><p>这一块还在写</p></blockquote><hr><h3 id="设计的相关考虑"><a href="#设计的相关考虑" class="headerlink" title="设计的相关考虑"></a>设计的相关考虑</h3><p><strong>解耦</strong>：渲染层、状态管理层和逻辑层相互独立，便于维护和扩展</p><p><strong>便于后续的协同编辑</strong>：实现多人协同，要监听 WebSocket 消息，然后更新 Zustand Store。StageManager 可以去监听到 Store 的变化，并作出相应的渲染更新</p><p><strong>对撤销/重做的实现</strong>：因为所有状态都在 Store 里，只需要保存/恢复 Store 的快照</p><p><strong>序列化/反序列化</strong>：保存项目只需 JSON.stringify(store.elements)</p><h4 id="目前的问题"><a href="#目前的问题" class="headerlink" title="目前的问题"></a>目前的问题</h4><p>【待补充】</p><h3 id="项目预览图"><a href="#项目预览图" class="headerlink" title="项目预览图"></a>项目预览图</h3><p class='item-img' data-src='../assets/image-20251122221056789.png'><img src="../assets/image-20251122221056789.png" alt="image-20251122221056789"></p><p class='item-img' data-src='../assets/image-20251122221138270.png'><img src="../assets/image-20251122221138270.png" alt="image-20251122221138270"></p><h3 id="具体模块设计文档"><a href="#具体模块设计文档" class="headerlink" title="具体模块设计文档"></a>具体模块设计文档</h3><p>【待补充】</p><hr><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ol><li>React 官方文档 <a href="https://react.dev/">https://react.dev</a></li><li>TypeScript 官方文档 <a href="https://www.typescriptlang.org/">https://www.typescriptlang.org</a></li><li>Vite 官方文档 <a href="https://vitejs.dev/">https://vitejs.dev</a></li><li>React Router 官方文档 <a href="https://reactrouter.com/">https://reactrouter.com</a></li><li>Tailwind CSS 3 官方文档 <a href="https://tailwindcss.com/">https://tailwindcss.com</a></li><li>Zustand 官方文档 <a href="https://docs.pmnd.rs/zustand">https://docs.pmnd.rs/zustand</a></li><li>PixiJS 官方文档 <a href="https://pixijs.download/release/docs">https://pixijs.download/release/docs</a></li><li>pixi-viewport 官方文档 + 示例 <a href="https://davidfig.github.io/pixi-viewport/">https://davidfig.github.io/pixi-viewport/</a></li><li>WangEditor 5 官方文档（中文） <a href="https://www.wangeditor.com/v5/">https://www.wangeditor.com/v5/</a></li><li>ESLint 官方文档 <a href="https://eslint.org/">https://eslint.org</a></li><li>Prettier 官方文档 <a href="https://prettier.io/">https://prettier.io</a></li><li>Husky 官方文档 <a href="https://typicode.github.io/husky">https://typicode.github.io/husky</a></li><li>commitlint 官方文档 <a href="https://commitlint.js.org/">https://commitlint.js.org</a></li><li>Y.js 官方文档（实时协同） <a href="https://docs.yjs.dev/">https://docs.yjs.dev</a></li><li>Excalidraw 主仓库（白板核心） <a href="https://github.com/excalidraw/excalidraw">https://github.com/excalidraw/excalidraw</a></li><li>Excalidraw-room（多人协作服务端） <a href="https://github.com/excalidraw/excalidraw-room">https://github.com/excalidraw/excalidraw-room</a></li><li>react-dev-inspector <a href="https://github.com/zthxxx/react-dev-inspector">https://github.com/zthxxx/react-dev-inspector</a></li><li>localForage <a href="https://github.com/localForage/localForage">https://github.com/localForage/localForage</a></li><li>PixiJS 官方示例合集 <a href="https://pixijs.download/release/examples">https://pixijs.download/release/examples</a></li><li>Quilljou/vite-react-ts-tailwind-starter（优秀脚手架） <a href="https://github.com/Quilljou/vite-react-ts-tailwind-starter">https://github.com/Quilljou/vite-react-ts-tailwind-starter</a></li></ol><p><strong>其他参考文章</strong></p><ol><li>前端研发链路之脚手架 - 阿里云开发者社区 <a href="https://developer.aliyun.com/article/1624016">https://developer.aliyun.com/article/1624016</a></li><li>Excalidraw 案例研究：成功应用与最佳实践 - CSDN <a href="https://blog.csdn.net/gitblog_00992/article/details/151003851">https://blog.csdn.net/gitblog_00992/article/details/151003851</a></li><li>产品经理：客户想要个画板，你们前端能不能做？ | 学习笔记 <a href="https://wang1xiang.github.io/blog/docs/work/excalidraw-use.html#缺点">https://wang1xiang.github.io/blog/docs/work/excalidraw-use.html#缺点</a></li><li>从手绘到架构：Excalidraw React 组件设计的优雅实践 - CSDN <a href="https://blog.csdn.net/gitblog_00090/article/details/150998508">https://blog.csdn.net/gitblog_00090/article/details/150998508</a></li><li>Arco Design - 企业级产品设计与开发解决方案 <a href="https://arco.design/">https://arco.design/</a></li><li>开发者工具 | TanStack Query React 文档 <a href="https://tanstack.com.cn/query/latest/docs/framework/react/devtools">https://tanstack.com.cn/query/latest/docs/framework/react/devtools</a></li><li>react-dev-inspector 使用指南（踩坑） - 掘金 <a href="https://juejin.cn/post/6904438522749386759">https://juejin.cn/post/6904438522749386759</a></li><li>React 状态管理终极指南：深挖 Redux、Zustand 与 MobX 的生存法则（2025） - 掘金 <a href="https://juejin.cn/post/7475715128682217509">https://juejin.cn/post/7475715128682217509</a></li><li>[pixi.js] 刚学 pixi.js 做记录 创建应用 添加图片精灵 - CSDN <a href="https://blog.csdn.net/towrabbit/article/details/82465109">https://blog.csdn.net/towrabbit/article/details/82465109</a></li><li>zustand-pub（跨应用/跨框架状态管理及共享） <a href="https://awesomedevin.github.io/zustand-vue/docs/introduce/start/zustand-pub">https://awesomedevin.github.io/zustand-vue/docs/introduce/start/zustand-pub</a></li><li>从 v6 升级 | React Router 中文文档 <a href="https://reactrouter.remix.org.cn/upgrading/v6">https://reactrouter.remix.org.cn/upgrading/v6</a></li><li>Chrome 插件：Redux DevTools 让你的状态管理调试更高效 - 知乎 <a href="https://zhuanlan.zhihu.com/p/716637376">https://zhuanlan.zhihu.com/p/716637376</a></li><li>devtools | zustand 中文网 <a href="https://zustand.vscing.com/docs/middlewares/devtools">https://zustand.vscing.com/docs/middlewares/devtools</a></li><li>优势 | wangEditor <a href="https://www.wangeditor.com/v5/">https://www.wangeditor.com/v5/</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;DSF-MA&quot;&gt;&lt;a href=&quot;#DSF-MA&quot; class=&quot;headerlink&quot; title=&quot;DSF-MA&quot;&gt;&lt;/a&gt;DSF-MA&lt;/h3&gt;&lt;p&gt;进入了字节工训营，干的前端方向，发了个任务要实现一个画布类产品对标 Excalidraw 和飞书 Slide</summary>
      
    
    
    
    <category term="笔记" scheme="https://zhongye1.github.io/Arknight-notes/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="前端开发" scheme="https://zhongye1.github.io/Arknight-notes/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>2025-11-21-canvas设计项目杂记其二</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/39691.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/39691.html</id>
    <published>2025-11-21T10:10:06.000Z</published>
    <updated>2025-11-22T18:43:14.827Z</updated>
    
    <content type="html"><![CDATA[<p>设计还原 Excalidraw 顶部栏工具样式</p><div class="table-container"><table><thead><tr><th>工具</th><th>对应代码操作</th></tr></thead><tbody><tr><td><strong>选择工具 (select)</strong></td><td>1. 当点击画布上的元素时，在  onPointerDown  方法中会设置该元素为选中状态<br>2. 当点击空白区域时，会清空选中状态<br>3. 当拖动时，会移动元素位置</td></tr><tr><td><strong>手型工具 (hand)</strong></td><td>目前代码中没有实现手型工具的具体功能，仅在工具栏进行了切换</td></tr><tr><td><strong>矩形工具 (rect)</strong></td><td>1. 在  onPointerDown  中创建新的矩形元素<br>2. 在  onPointerMove  中调整矩形大小<br>3. 在  render  方法中使用  <code>graphic.rect()</code>  或  <code>graphic.roundRect()</code>  绘制矩形</td></tr><tr><td><strong>菱形工具 (diamond)</strong></td><td>代码中有定义但未实现具体功能，目前不会绘制菱形</td></tr><tr><td><strong>圆形工具 (circle)</strong></td><td>1. 在  onPointerDown  中创建新的圆形元素<br>2. 在  onPointerMove  中调整圆形大小<br>3. 在  render  方法中使用  <code>graphic.ellipse()</code>  绘制圆形</td></tr><tr><td><strong>箭头工具 (arrow)</strong></td><td>代码中有定义但未实现具体功能，目前不会绘制箭头</td></tr><tr><td><strong>直线工具 (line)</strong></td><td>代码中有定义但未实现具体功能，目前不会绘制直线</td></tr><tr><td><strong>铅笔工具 (pencil)</strong></td><td>代码中有定义但未实现具体功能，目前不会进行自由绘制</td></tr><tr><td><strong>文本工具 (text)</strong></td><td>代码中有定义但未实现具体功能，目前不会添加文本</td></tr><tr><td><strong>图像工具 (image)</strong></td><td>代码中有定义但未实现具体功能，目前不会插入图片</td></tr><tr><td><strong>橡皮擦工具 (eraser)</strong></td><td>代码中有定义但未实现具体功能，目前不会删除元素</td></tr></tbody></table></div><h3 id="重构-Pixi-stageManager-ts"><a href="#重构-Pixi-stageManager-ts" class="headerlink" title="重构  Pixi_stageManager.ts"></a>重构  Pixi_stageManager.ts</h3><p>我们需要做比较大的改动：</p><ol><li>引入  Viewport  并将其添加到  app.stage。</li><li>所有的绘图元素（Graphics）现在都添加到  viewport  中，而不是  app.stage。</li><li>根据当前工具（hand vs rect/select）来启用或禁用 Viewport 的拖拽插件。</li></ol><h3 id="如何实现-Minimap（小地图）"><a href="#如何实现-Minimap（小地图）" class="headerlink" title="如何实现 Minimap（小地图）"></a>如何实现 Minimap（小地图）</h3><p>你提到了 Minimap，虽然代码量较大不便在此全部贴出，但我可以告诉你<strong>行业标准的实现思路</strong>。</p><p>有了  pixi-viewport  和 Zustand Store，实现 Minimap 其实就是做一个<strong>数据映射</strong></p><h4 id="1-原理"><a href="#1-原理" class="headerlink" title="1. 原理"></a>1. 原理</h4><p>Minimap 本质上是一个独立的、微缩的视图。不要尝试去截取 Pixi Canvas 的图（性能太差）。你应该再画一遍，用简化的图形。</p><h4 id="2-实现步骤"><a href="#2-实现步骤" class="headerlink" title="2. 实现步骤"></a>2. 实现步骤</h4><p><strong>A. 创建 Minimap 组件</strong><br>创建一个 React 组件，它固定在右下角。</p><p><strong>B. 坐标映射 (World -&gt; Minimap)</strong><br>假设你的 Minimap 大小是 200x150px。<br>你需要计算当前所有元素的<strong>包围盒 (Bounding Box)</strong>：</p><ul><li>minX, minY: 最左上角的元素位置</li><li>maxX, maxY: 最右下角的元素位置</li><li>contentWidth = maxX - minX</li><li>scale = minimapWidth / contentWidth</li></ul><p><strong>C. 渲染内容</strong><br>因为我们已经在 Zustand Store 里存了  { type: ‘rect’, x: 100, y: 100 … }  这样的纯数据，所以 Minimap 不需要 PixiJS。直接用 HTML5 <canvas>  或 SVG 渲染即可！</canvas></p><p>codeTsx</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-comment">// 伪代码示例：Minimap SVG 实现</span><br>&lt;svg width=<span class="hljs-string">"200"</span> height=<span class="hljs-string">"150"</span> viewBox={`${minX} ${minY} ${width} ${height}`}&gt;<br>   {elements.<span class="hljs-built_in">map</span>(el =&gt; (<br>      &lt;rect x={el.x} y={el.y} width={el.width} height={el.height} fill=<span class="hljs-string">"#ccc"</span> /&gt;<br>   ))}<br><br>   {<span class="hljs-comment">/* 视口框：显示当前你正在看哪个区域 */</span>}<br>   &lt;rect<br>     x={viewport.center.x - viewport.worldScreenWidth/<span class="hljs-number">2</span>}<br>     y={viewport.center.y - viewport.worldScreenHeight/<span class="hljs-number">2</span>}<br>     width={viewport.worldScreenWidth}<br>     height={viewport.worldScreenHeight}<br>     stroke=<span class="hljs-string">"red"</span> fill=<span class="hljs-string">"none"</span><br>   /&gt;<br>&lt;/svg&gt;<br></code></pre></td></tr></table></figure><h4 id="3-双向绑定"><a href="#3-双向绑定" class="headerlink" title="3. 双向绑定"></a>3. 双向绑定</h4><ol><li><strong>View -&gt; Map</strong>: 当主画布  viewport  移动 (moved  事件) 时，更新 Minimap 里的红框位置。</li><li><strong>Map -&gt; View</strong>: 当拖拽 Minimap 里的红框时，调用  stageManager.viewport.moveCenter(x, y)  来移动主画布。</li></ol><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ol><li><strong>无限画布</strong>：使用  pixi-viewport  代替原生  app.stage  容器。</li><li><p><strong>手型工具</strong>：</p><ul><li>当  tool === ‘hand’  时，调用  viewport.drag()  启用拖拽。</li><li>当  tool !== ‘hand’  时，viewport.plugins.pause(‘drag’)  暂停拖拽，以便进行绘图。</li></ul></li><li><p><strong>Minimap</strong>：使用 SVG 或第二个轻量 Canvas，通过 Store 数据渲染所有元素的微缩版，并计算一个“视口矩形”覆盖在上面。</p></li></ol><h3 id="改动说明"><a href="#改动说明" class="headerlink" title="改动说明"></a>改动说明</h3><ol><li><p><strong>updateViewportState  逻辑变更</strong>：</p><ul><li>之前：hand  模式开启 drag，其他模式暂停 drag。</li><li>现在：所有模式都开启 drag。<ul><li>普通模式：drag({ mouseButtons: ‘middle’ })。中键拖动画布，左键留给选择。</li><li>手型模式：drag({ mouseButtons: ‘all’ })。左键或中键都可以拖动画布。</li></ul></li></ul></li><li><p><strong>onPointerDown  拦截</strong>：</p><ul><li>新增  if (e.button === 1) return。</li><li>这样当用户按下中键时，Pixi_stageManager  的自定义逻辑（选择元素、创建元素）会被跳过，控制权完全交给  pixi-viewport  进行画布平移。</li></ul></li><li><p><strong>默认行为阻止</strong>：</p><ul><li>在  initApp  中添加了  container.addEventListener(‘mousedown’, …)  来阻止中键点击时的默认滚动图标出现，体验更顺滑。</li></ul></li></ol><p>现在，你可以在保持“选择工具”激活的情况下，直接按住鼠标中键来拖拽画布，释放中键后继续使用左键选择或移动元素。同时，左侧工具栏的“手型工具”和“空格键”快捷键依然有效（它们会把左键也变成拖拽）。</p><h2 id="“Rubber-band-Selection”-框选-和-“Transformer-Gizmo”-变换控制器-。"><a href="#“Rubber-band-Selection”-框选-和-“Transformer-Gizmo”-变换控制器-。" class="headerlink" title="“Rubber-band Selection” (框选)  和  “Transformer / Gizmo” (变换控制器)。"></a><strong>“Rubber-band Selection” (框选)</strong>  和  <strong>“Transformer / Gizmo” (变换控制器)</strong>。</h2><p>对  Pixi_stageManager.ts  进行较大幅度的扩展。为了保持代码清晰，我们将逻辑分为两部分：</p><ol><li><strong>框选逻辑</strong>：在空白处拖拽绘制蓝色半透明矩形，松开时计算碰撞。</li><li><strong>变换逻辑</strong>：选中元素时绘制 8 个控制点，拖拽控制点改变元素尺寸。</li></ol><p>以下是完整的实现方案。</p><h3 id="1-核心逻辑修改思路"><a href="#1-核心逻辑修改思路" class="headerlink" title="1. 核心逻辑修改思路"></a>1. 核心逻辑修改思路</h3><p>我们需要引入一个新的图层概念（UI Layer），确保框选框和控制手柄永远画在元素之上。</p><ul><li><strong>状态增加</strong>：增加  interactionMode  状态，区分  idle | panning | dragging (拖拽元素) | selecting (框选) | resizing (调整大小)。</li><li><strong>Resize 算法</strong>：根据当前拖拽的是哪个角（如 Top-Left），反向计算  x, y, width, height。</li></ul><h3 id="2-更新-Pixi-stageManager-ts"><a href="#2-更新-Pixi-stageManager-ts" class="headerlink" title="2. 更新  Pixi_stageManager.ts"></a>2. 更新  Pixi_stageManager.ts</h3><hr><p>改用世界坐标系进行计算：</p><ol><li>通过  <code>e.getLocalPosition(this.viewport)</code>  获取鼠标在世界坐标系中的当前位置</li><li>计算当前位置与起始位置的差值  <code>dx</code>  和  <code>dy</code></li><li>直接将这个差值应用到元素的位置上，无需考虑缩放因子</li><li>更新起始位置为当前位置，为下次移动计算做准备</li></ol><hr><p>StageManager 类<br>├── 类属性定义模块<br>│ ├── PIXI 应用和视口<br>│ ├── 图层管理<br>│ ├── 元素映射<br>│ ├── 交互状态<br>│ ├── 辅助图形<br>│ └── 变换/拖拽相关数据<br>├── 构造函数与初始化模块<br>│ ├── 主构造函数<br>│ │ ├── 应用初始化<br>│ │ ├── 视口设置<br>│ │ ├── 图层结构初始化<br>│ │ ├── UI 元素初始化<br>│ │ ├── 交互设置<br>│ │ └── 状态订阅<br>│ └── 应用初始化方法 (initApp)<br>├── 视口管理模块<br>│ └── 视口设置 (setupViewport)<br>├── 渲染核心模块<br>│ ├── 画布元素渲染 (renderElements)<br>│ └── 变换控制器渲染 (renderTransformer)<br>├── 交互逻辑模块<br>│ ├── 交互设置 (setupInteraction)<br>│ ├── 指针按下处理 (onPointerDown)<br>│ ├── 手柄按下处理 (onHandleDown)<br>│ ├── 指针移动处理 (onPointerMove)<br>│ └── 指针抬起处理 (onPointerUp)<br>├── 辅助函数模块<br>│ ├── 获取手柄光标样式 (getCursorForHandle)<br>│ ├── 更新视口状态 (updateViewportState)<br>│ ├── 设置空格键状态 (setSpacePressed)<br>│ ├── 更新光标 (updateCursor)<br>│ └── 销毁方法 (destroy)</p><hr><p>修复了图像创建后没有立即渲染的问题。主要的修改包括：</p><ol><li>当图像纹理正在加载时，创建一个占位符图形（灰色矩形）立即显示在画布上，这样用户就能立即看到图像的位置和大小。</li><li>在纹理加载完成后，更新纹理缓存并直接更新已存在的图形，而不是等待下一次重新渲染。</li><li>移除了使用非空断言操作符（<code>!</code>）的代码，使类型检查更加安全。</li><li>简化了图像渲染逻辑，确保在纹理加载完成前也能显示占位符。</li></ol><p>这些修改确保了图像元素在创建时能够立即显示（虽然是占位符），而不是完全不可见直到其他操作触发重新渲染。当图像纹理加载完成后，占位符会自动更新为实际的图像。</p><h2 id="图像加载机制详解"><a href="#图像加载机制详解" class="headerlink" title="图像加载机制详解"></a>图像加载机制详解</h2><h3 id="1-整体流程"><a href="#1-整体流程" class="headerlink" title="1. 整体流程"></a>1. 整体流程</h3><p>图像加载采用异步方式处理，主要分为以下几个步骤：</p><ol><li><strong>检查缓存</strong>：首先检查纹理是否已经在缓存中存在</li><li><strong>加载纹理</strong>：如果不存在，则启动纹理加载过程</li><li><strong>显示占位符</strong>：在纹理加载期间，显示一个灰色占位符矩形</li><li><strong>更新显示</strong>：纹理加载完成后，将占位符替换为实际图像</li></ol><h3 id="2-核心组件"><a href="#2-核心组件" class="headerlink" title="2. 核心组件"></a>2. 核心组件</h3><p>typescript</p><p><code>private spriteMap: Map&lt;string, PIXI.Graphics | HTMLText | PIXI.Sprite&gt; = new Map() private textureCache: Map&lt;string, PIXI.Texture&gt; = new Map() private loadingSet: Set&lt;string&gt; = new Set()</code></p><ul><li><strong>spriteMap</strong>：存储所有已创建的图形对象（包括占位符和实际图像）</li><li><strong>textureCache</strong>：缓存已加载的纹理，避免重复加载</li><li><strong>loadingSet</strong>：记录正在加载的 URL，防止重复发起加载请求</li></ul><h3 id="3-加载过程详解"><a href="#3-加载过程详解" class="headerlink" title="3. 加载过程详解"></a>3. 加载过程详解</h3><h4 id="3-1-检查缓存"><a href="#3-1-检查缓存" class="headerlink" title="3.1 检查缓存"></a>3.1 检查缓存</h4><p>typescript</p><p><code>let texture = this.textureCache.get(data.imageUrl)</code></p><p>如果纹理已存在缓存中，直接使用，无需重新加载。</p><h4 id="3-2-防止重复加载"><a href="#3-2-防止重复加载" class="headerlink" title="3.2 防止重复加载"></a>3.2 防止重复加载</h4><p>typescript</p><p><code>if (!this.loadingSet.has(data.imageUrl)) {   this.loadingSet.add(data.imageUrl)   // 开始加载 }</code></p><p>通过 loadingSet 确保同一 URL 不会被重复加载。</p><h4 id="3-3-异步加载"><a href="#3-3-异步加载" class="headerlink" title="3.3 异步加载"></a>3.3 异步加载</h4><p>typescript</p><p><code>PIXI.Assets.load(data.imageUrl)   .then((loadedTexture) =&gt; {     // 加载成功处理   })   .catch((err) =&gt; {     // 加载失败处理   })</code></p><p>使用 PIXI 的资源加载器进行异步加载。</p><h4 id="3-4-占位符显示"><a href="#3-4-占位符显示" class="headerlink" title="3.4 占位符显示"></a>3.4 占位符显示</h4><p>在纹理加载期间，创建一个灰色矩形作为占位符：</p><p>typescript</p><p><code>graphic = new PIXI.Graphics() graphic.rect(0, 0, data.width, data.height) graphic.fill({ color: 0xdddddd }) graphic.stroke({ width: 1, color: 0x999999 })</code></p><h4 id="3-5-加载完成后更新"><a href="#3-5-加载完成后更新" class="headerlink" title="3.5 加载完成后更新"></a>3.5 加载完成后更新</h4><p>纹理加载完成后，立即替换占位符：</p><p>typescript</p><p><code>// 替换占位符为真实图像 elementLayer.removeChild(graphic) graphic.destroy() // 创建新的Sprite const sprite = new PIXI.Sprite(loadedTexture) // 设置属性... elementLayer.addChild(sprite) this.spriteMap.set(id, sprite)</code></p><h3 id="4-性能优化措施"><a href="#4-性能优化措施" class="headerlink" title="4. 性能优化措施"></a>4. 性能优化措施</h3><ol><li><strong>缓存机制</strong>：避免重复加载相同 URL 的图像</li><li><strong>防止重复请求</strong>：通过 loadingSet 避免对同一 URL 发起多次加载请求</li><li><strong>及时清理</strong>：元素移除时清理相关资源和引用</li><li><strong>立即更新</strong>：纹理加载完成后立即更新显示，无需等待其他操作</li></ol><h3 id="5-错误处理"><a href="#5-错误处理" class="headerlink" title="5. 错误处理"></a>5. 错误处理</h3><p>当图像加载失败时，会输出错误日志并从加载集合中移除 URL：</p><p>typescript</p><p><code>.catch((err) =&gt; {   console.error('Failed to load asset:', err)   this.loadingSet.delete(data.imageUrl) })</code></p><h3 id="6-资源清理"><a href="#6-资源清理" class="headerlink" title="6. 资源清理"></a>6. 资源清理</h3><p>当元素被移除时，会进行适当的资源清理：</p><ol><li>移除图形对象</li><li>销毁不再使用的纹理</li><li>清理相关引用和定时器</li></ol><p>这套机制确保了图像加载既高效又用户友好，在图像加载期间提供视觉反馈，并在加载完成后立即显示图像。</p><ol><li><strong>types.ts</strong>: 增加了  initialElementsMap  和  initialGroupBounds  来存储多选时的初始状态。</li><li><p><strong>StageManagerCore.ts</strong>:</p><ul><li>onHandleDown: 现在会捕捉所有选中元素的快照，并计算初始的群组包围盒。</li><li>onPointerMove: 重写了  resizing  逻辑。它不再单纯调整单个元素，而是先计算鼠标移动导致的<strong>新包围盒</strong>，计算出<strong>宽高的缩放比例</strong>，然后应用到所有选中元素上（包括坐标、宽高和内部点集）。</li></ul></li></ol><p>这是一个典型的多选缩放问题。</p><p><strong>问题原因：</strong><br>在现有的  StageManagerCore.ts  中，onPointerMove  的  resizing  逻辑只处理了单体元素 (this.state.currentId) 的更新。当你选中多个元素时，虽然  TransformerRenderer  画出了一个大的包围盒，但交互逻辑实际上只在操作第一个被选中的元素，导致其他元素不动，或者计算逻辑完全错误（因为没有基于群组包围盒进行整体缩放），从而出现“锚点脱离”和“大小失控”的现象。</p><p><strong>解决方案：</strong><br>我们需要修改  StageManagerCore.ts  和  types.ts。</p><ol><li><strong>状态存储</strong>：在  onHandleDown  时，不再只存储单个元素的初始状态，而是需要计算并存储<strong>整个选区的初始包围盒 (Group Bounds)</strong>  以及<strong>所有被选元素的初始状态</strong>。</li><li><strong>移动计算</strong>：在  onPointerMove  时，根据鼠标位移计算出<strong>新的群组包围盒</strong>，得出宽高的<strong>缩放比例 (scaleX, scaleY)</strong>，然后根据这个比例更新所有被选元素的坐标和尺寸。</li></ol><hr><ol><li><p><strong>使用 Command Pattern</strong>：</p><ul><li>实现了基本的命令接口  Command</li><li>提供了  SnapshotCommand  类处理完整的状态快照</li><li>使用两个栈管理撤销和重做操作</li></ul></li><li><p><strong>使用 structuredClone 进行快照</strong>：</p><ul><li>对整个 store 状态进行深克隆</li><li>保证状态回退时不会出现引用问题</li></ul></li><li><p><strong>自动捕获状态变更</strong>：</p><ul><li>通过包装 Zustand 的 set 方法自动捕获所有状态变更</li><li>无需手动在每个操作后调用记录方法</li></ul></li><li><p><strong>防止递归记录</strong>：</p><ul><li>使用锁定机制避免在执行撤销/重做操作时记录新命令</li></ul></li><li><p><strong>键盘快捷键支持</strong>：</p><ul><li>支持标准的 Ctrl+Z 撤销和 Ctrl+Y/Ctrl+Shift+Z 重做</li></ul></li></ol><p>这种实现方式简单有效，能够满足大部分撤销/重做需求，并且与现有的项目架构很好地集成。</p><ol><li><p><strong>使用  <code>structuredClone()</code> API</strong>：</p><ul><li>我们使用浏览器内置的  <a href="https://developer.mozilla.org/en-US/docs/Web/API/structuredClone">structuredClone()</a>  函数来创建状态对象的深拷贝</li><li>这个 API 可以创建对象的完整副本，包括嵌套的对象和数组</li></ul></li><li><p><strong>只克隆数据部分</strong>：</p><ul><li>由于 Zustand store 状态既包含数据属性也包含函数属性，而  <code>structuredClone()</code>  无法克隆函数，所以我们需要分离这两部分</li><li>使用解构赋值语法排除所有函数属性：<br>javascript<br><code>const {    setTool, addElement, updateElement, removeElements, setSelected,   setEditingId, copyElements, pasteElements, undo, redo, canUndo, canRedo,   ...dataOnlyState  } = state;</code></li><li>这样  dataOnlyState  就只包含纯数据属性，如  tool、elements、selectedIds  等</li></ul></li><li><p><strong>在撤销/重做系统中的应用</strong>：</p><ul><li>在每次状态更改前后捕获快照</li><li>将这些快照传递给  SnapshotCommand  来记录状态变化</li><li>当用户执行撤销或重做操作时，可以从这些快照恢复到之前的状态</li></ul></li></ol><p>这种机制确保我们可以准确地跟踪和恢复画布状态的变化历史，同时避免了尝试克隆不可序列化函数的错误。</p><p>你提到的问题非常准确。目前的实现方式确实会在创建选框等操作过程中记录每一步的状态变化，这会导致撤销/重做系统产生过多不必要的快照。</p><p>对于绘图应用来说，用户期望的行为通常是：</p><ol><li>在开始绘制时标记操作起点</li><li>在绘制结束时才生成一个完整的撤销点</li><li>而不是记录过程中的每个微小变化</li></ol><p>针对这个问题，常见的解决方案有几种：</p><ol><li><strong>批量操作机制</strong>：允许临时锁定 undo/redo 系统，在一系列连续操作完成后再解锁并记录最终状态。</li><li><strong>防抖动机制</strong>：在快速连续的操作中，只记录特定时间间隔的状态。</li><li><strong>操作分组</strong>：将相关的操作归为一组，作为一个整体进行撤销/重做。</li></ol><p>考虑到你们项目的情况，我觉得第一种方案比较适合，即增加开始和结束批量操作的方法。</p><p>不过目前的实现也有它的优势，就是可以精确还原到任意一个中间状态。在实际使用中可以根据用户体验需求来权衡是否需要优化这一点。</p><p><del>添加一个防抖动机制。这样可以避免在连续操作（如绘制矩形）过程中产生过多的快照。</del></p><p>更好的方法是在绘制开始时记录初始状态，在绘制结束时记录最终状态，形成一个完整的操作单元。让我来实现这个机制：</p><h3 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h3><p>你当前的代码存在两个主要问题：</p><ol><li><strong>Middleware 过于激进</strong>：subscribeWithSelector  会拦截每一次  set  调用。当你拖拽一个矩形移动 100px 时，会触发约 60 次  set，导致历史记录里塞满了 60 个微小的移动快照。这会导致内存爆炸且撤销体验极差（按一次撤销只动 1px）。</li><li><strong>逻辑分散</strong>：你试图在  UndoRedoManager  里用计时器（setTimeout）来判断什么时候结束创建，这非常不稳定。</li></ol><h3 id="核心思路：Excalidraw-模式"><a href="#核心思路：Excalidraw-模式" class="headerlink" title="核心思路：Excalidraw 模式"></a>核心思路：Excalidraw 模式</h3><p>Excalidraw 的核心逻辑是：</p><ol><li><strong>PointerDown (开始)</strong>：记录当前画布的快照（作为“旧状态”）。</li><li><strong>PointerMove (过程)</strong>：疯狂更新 Store（瞬时状态），<strong>但不</strong>推入历史记录。</li><li><strong>PointerUp (结束)</strong>：对比当前状态和旧状态。如果有变化，将“旧状态”和“新状态”封装成一个命令，推入历史栈。</li></ol><hr><h3 id="重构方案"><a href="#重构方案" class="headerlink" title="重构方案"></a>重构方案</h3><p>我们将移除 Store 中的自动拦截中间件，改为由<strong>交互层 (StageManagerCore)</strong>  主动控制历史记录的时机。</p><h4 id="1-重写-UndoRedoManager-ts-简化版"><a href="#1-重写-UndoRedoManager-ts-简化版" class="headerlink" title="1. 重写  UndoRedoManager.ts (简化版)"></a>1. 重写  UndoRedoManager.ts (简化版)</h4><p>不再需要复杂的计时器和模式判断，回归纯粹的栈管理。</p><ol><li><p><strong>移动（Move/Drag）操作丢失</strong>：</p><ul><li>在  onPointerDown  中，当检测到点击元素（dragging  模式）时，你调用了  undoRedoManager.lock()。</li><li>在  onPointerMove  中，元素位置被更新，但因为处于锁定状态，canvasStore  的中间件忽略了这些更新（这是正确的，防止产生大量快照）。</li><li><strong>关键缺漏</strong>：在  onPointerUp  中，当  mode === ‘dragging’  结束时，代码只执行了  unlock()，<strong>没有创建并执行任何 Command</strong>。</li><li><strong>结果</strong>：Store 中的状态变成了 B，但撤销栈里什么都没记。当你后续进行 Resize 操作（B -&gt; C）并记录了 Command 后，一旦撤销，Resize Command 会把状态恢复到 B。再次撤销时，由于 Move 操作没记录，状态无法回到 A，或者表现为“跳过”了某些步骤。</li></ul></li><li><p><strong>Resize 操作的 “Redo 直接到 B” 现象</strong>：</p><ul><li>这通常是由于历史栈的不连续性造成的。如果 “Move A-&gt;B” 没被记录，那么栈里可能是  [Create(A), Resize(B-&gt;C), Resize(C-&gt;D)]。</li><li>当你撤销  Resize(C-&gt;D) -&gt; 变回 C。</li><li>撤销  Resize(B-&gt;C) -&gt; 变回 B。</li><li>此时再撤销，会直接遇到  Create(A)  或空栈，导致状态突变。</li><li>此外，如果 Resize 的逻辑只依赖于  initialMap，而没有正确处理连续操作间的状态同步，也可能导致此问题。</li></ul></li></ol><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>我们需要做一个通用的  <strong>UpdateElementCommand</strong>（替换或扩展  ResizeCommand），并在  StageManagerCore  的  onPointerUp  中，<strong>为移动（Dragging）和调整大小（Resizing）都创建并执行这个命令</strong>。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;设计还原 Excalidraw 顶部栏工具样式&lt;/p&gt;
&lt;div class=&quot;table-container&quot;&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;工具&lt;/th&gt;
&lt;th&gt;对应代码操作&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;t</summary>
      
    
    
    
    <category term="归档" scheme="https://zhongye1.github.io/Arknight-notes/categories/%E5%BD%92%E6%A1%A3/"/>
    
    
  </entry>
  
  <entry>
    <title>2025-11-21-canvas项目杂记</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/14933.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/14933.html</id>
    <published>2025-11-21T06:50:48.000Z</published>
    <updated>2025-11-22T19:37:35.292Z</updated>
    
    <content type="html"><![CDATA[<h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>要做的就是一个<strong>类 Canva / Figma 的在线图形绘板</strong>，完整需求优先级和覆盖范围如下：</p><div class="table-container"><table><thead><tr><th>优先级</th><th>功能模块</th><th>具体需求</th><th>是否必须</th><th>难度</th></tr></thead><tbody><tr><td>P0</td><td>基础渲染</td><td>矩形、圆形、三角形任意填充色、边框色、边框宽度、圆角、透明度</td><td>Yes</td><td>★☆</td></tr><tr><td>P0</td><td>图片支持</td><td>上传 png/jpg/webp，任意缩放、圆角、模糊、灰度、亮度调节、裁剪掩模</td><td>Yes</td><td>★★</td></tr><tr><td>P0</td><td>富文本</td><td>字体、字号、颜色、加粗、斜体、下划线、删除线、文本背景色、文字对齐、行距、局部样式支持</td><td>Yes</td><td>★★★★</td></tr><tr><td>P0</td><td>基本交互</td><td>单选、多选（框选 + Shift）、拖拽、删除、复制粘贴、缩放把手（8 个方向）、旋转把手</td><td>Yes</td><td>★★</td></tr><tr><td>P0</td><td>无限画布 + 缩放平移</td><td>Ctrl+滚轮缩放、空格拖拽平移、无限滚动</td><td>Yes</td><td>★☆</td></tr><tr><td>P0</td><td>数据持久化</td><td>自动 localStorage 保存、打开页面自动恢复</td><td>Yes</td><td>★☆</td></tr><tr><td>P1</td><td>高级交互</td><td>组合（Group）、解散组合、图层排序、辅助对齐线、吸附、旋转任意角度</td><td>Yes</td><td>★★★</td></tr><tr><td>P1</td><td>工具栏 &amp; 属性面板</td><td>顶部工具栏（切换文本/形状/图片模式）、右侧属性面板实时编辑属性</td><td>Yes</td><td>★★</td></tr><tr><td>P1</td><td>历史记录</td><td>Undo / Redo（支持跨会话）</td><td>Yes</td><td>★★</td></tr><tr><td>P1</td><td>性能要求</td><td>100 个复杂元素（图片+富文本）打开 &lt; 3s，拖拽 60fps 不闪烁</td><td>Yes</td><td>★★★★</td></tr><tr><td>P2</td><td>未来可扩展</td><td>实时协同编辑、离线编辑、模板库、导出 PNG/SVG/PDF、激光笔、箭头、自由画笔等</td><td>No</td><td>★★★★</td></tr></tbody></table></div><h1 id="架构方案"><a href="#架构方案" class="headerlink" title="架构方案"></a>架构方案</h1><ul><li><strong>渲染层</strong>：PixiJS (WebGL) 处理高性能图形渲染 + HTML DOM 处理文本编辑/输入框。</li><li><strong>状态管理</strong>：Zustand / Pinia (管理庞大的 JSON 画布数据)。</li><li><strong>逻辑层</strong>：自定义 Class 结构（如  Shape, Tool, History）实现面向对象编程。</li></ul><h3 id="二、项目设计要素"><a href="#二、项目设计要素" class="headerlink" title="二、项目设计要素"></a>二、项目设计要素</h3><div class="table-container"><table><thead><tr><th>设计维度</th><th>推荐技术方案</th><th></th></tr></thead><tbody><tr><td>1. 渲染引擎</td><td>PixiJS v8（WebGL） + HTMLText</td><td>WebGL 抗锯齿完美 + 高分屏不模糊；HTMLText 是目前唯一能轻松实现富文本局部样式的方案</td></tr><tr><td>2. 状态管理</td><td>Zustand（或 Jotai + signals）</td><td>轻量、响应式、支持中间件（持久化、历史栈）</td></tr><tr><td>3. 元素对象缓存</td><td>Map<string, Container=""> 永久缓存（一个元素一个 Container，永不 destroy）</string,></td><td>彻底解决闪烁、拖拽中断、光标丢失的根本方案</td></tr><tr><td>4. 历史栈</td><td>Command Pattern + structuredClone 快照（每操作记录 before/after）</td><td>简单可靠，支持跨页面 Undo</td></tr><tr><td>5. 选中/变换系统</td><td>单独的 SelectionManager + TransformHandles（旋转、缩放把手层也缓存）</td><td>tldraw/Figma 标配</td></tr><tr><td>6. 辅助对齐线</td><td>拖拽时实时遍历所有元素 bounds，差值 &lt; 5px 就吸附并画蓝线</td><td>提升专业感</td></tr><tr><td>7. 组合（Group）</td><td>元素加 groupId 字段；选中时绘制大虚线框；拖拽/缩放/旋转时整体应用矩阵变换</td><td>必须有，属于 P1 核心</td></tr><tr><td>8. 数据持久化</td><td>Zustand middleware persist + localForage（IndexedDB）</td><td>防止 localStorage 炸掉</td></tr><tr><td>9. 图片处理</td><td>Sprite + Graphics mask（圆角）+ BlurFilter + ColorMatrixFilter</td><td>PixiJS 原生支持</td></tr><tr><td>10. 架构分层</td><td>- store（纯数据） - rendering（Pixi 元素缓存 &amp; 更新） - interaction（拖拽、选中逻辑） - ui（React 面板）</td></tr></tbody></table></div><p>installed pixi.js@8.14.3<br>installed zustand@5.0.8<br>installed nanoid@5.1.6</p><p><strong>数据驱动视图”（Data-Driven View）</strong>  模式，采用了  <strong>React (UI) + Zustand (数据) + PixiJS (渲染)</strong>  的三层分离架构</p><p>这种架构的核心理念是：<strong>PixiJS 实例不保存“业务状态”，它只是 Zustand 数据的“投影”</strong></p><p class='item-img' data-src='Pasted%20image%2020251121155817.png'><img src="Pasted%20image%2020251121155817.png" alt=""></p><p>其中，</p><ul><li>React 只负责 UI 和事件入口</li><li>Zustand 是唯一的真实数据源（纯 JSON，可持久化、可协同）</li><li>PixiJS 层只做“渲染 + 交互计算”，所有对象永久缓存（Map），绝不每帧重建</li><li>所有变换（拖拽、缩放、旋转、组合）都在 Pixi 层完成，最后再同步回 Zustand（单向数据流）</li></ul><h3 id="三层架构详解"><a href="#三层架构详解" class="headerlink" title="三层架构详解"></a>三层架构详解</h3><h4 id="第一层：数据层-The-Source-of-Truth-canvasStore-ts"><a href="#第一层：数据层-The-Source-of-Truth-canvasStore-ts" class="headerlink" title="第一层：数据层 (The Source of Truth) - canvasStore.ts"></a>第一层：数据层 (The Source of Truth) - canvasStore.ts</h4><p>这是整个应用的大脑。</p><ul><li><strong>职责</strong>：只存储纯 JSON 数据（Serializable），不包含任何 UI 实例或 Pixi 对象。</li><li><strong>存储内容</strong>：<ul><li>elements: 一个 Map 对象（Record<id, Element="">），存储所有矩形、圆形的坐标、颜色等。</id,></li><li>selectedIds: 当前选中的 ID 列表。</li><li>tool: 当前使用的工具。</li></ul></li><li><strong>特点</strong>：<ul><li><strong>单一数据源</strong>：画布上显示什么，完全由这里的数据决定。</li><li><strong>无副作用</strong>：这里的 Action 只修改数据，不直接操作 DOM 或 Canvas。</li></ul></li></ul><h4 id="第二层：适配层-The-Bridge-StageManager-ts"><a href="#第二层：适配层-The-Bridge-StageManager-ts" class="headerlink" title="第二层：适配层 (The Bridge) - StageManager.ts"></a>第二层：适配层 (The Bridge) - StageManager.ts</h4><p>这是连接 React/Zustand 和 PixiJS 的胶水层，也是架构中最复杂的部分。</p><ul><li><strong>职责</strong>：将“声明式”的数据（Zustand）转换为“命令式”的 Pixi 调用。</li><li><strong>核心机制 - 增量更新 (Diffing)</strong>：<ul><li>它维护了一个  spriteMap (Map<id, PIXI.Graphics="">)。</id,></li><li><strong>订阅 (Subscribe)</strong>：它监听 Store 的变化。</li><li><strong>同步 (Sync/Render Loop)</strong>：<ul><li><strong>Create</strong>: Store 有 ID，Map 里没有 -&gt; new PIXI.Graphics()。</li><li><strong>Update</strong>: Store 有，Map 里也有 -&gt; 更新  x, y, width, color。</li><li><strong>Delete</strong>: Store 没有，Map 里有 -&gt; destroy()。</li></ul></li></ul></li><li><strong>事件转换</strong>：<ul><li>它监听 Pixi 的  pointerdown/move/up  事件，将屏幕坐标转换为逻辑坐标，然后调用 Store 的 Action。</li></ul></li></ul><h4 id="第三层：视图层-The-Container-Canvas-tsx"><a href="#第三层：视图层-The-Container-Canvas-tsx" class="headerlink" title="第三层：视图层 (The Container) - Canvas.tsx"></a>第三层：视图层 (The Container) - Canvas.tsx</h4><p>这是 React 组件层。</p><ul><li><strong>职责</strong>：<ul><li>提供  div  容器供 Pixi 挂载。</li><li>渲染 HTML UI（工具栏、属性面板）。</li><li>生命周期管理：组件 Mount 时初始化  StageManager，Unmount 时销毁。</li></ul></li></ul><hr><h3 id="3-关键数据流转-Data-Flow"><a href="#3-关键数据流转-Data-Flow" class="headerlink" title="3. 关键数据流转 (Data Flow)"></a>3. 关键数据流转 (Data Flow)</h3><p>让我们以  <strong>“拖拽矩形移动”</strong>  为例，看数据如何在架构中流转：</p><p><strong>Input (输入)</strong>:</p><ul><li>用户在画布上按住矩形并移动鼠标。</li><li>StageManager  的  onPointerMove  被触发。</li></ul><p><strong>Logic (逻辑处理)</strong>:</p><ul><li>StageManager  计算鼠标的偏移量  (dx, dy)。</li><li>它<strong>不直接修改</strong> Pixi 图形的  graphics.x (这是关键！)。</li><li>它调用  store.updateElement(id, { x: newX, y: newY })。</li></ul><p><strong>State Update (状态更新)</strong>:</p><ul><li>Zustand Store 更新内部的 JSON 数据。</li><li>Zustand 触发订阅回调 (subscribe)。</li></ul><p><strong>Render Sync (渲染同步)</strong>:</p><ul><li>StageManager  的  render  方法被调用。</li><li>它从  spriteMap  找到对应的 Pixi 实例。</li><li>执行  graphic.position.set(newX, newY)。</li><li>PixiJS 在下一个  requestAnimationFrame  自动重绘 Canvas。</li></ul><hr><h3 id="4-为什么选择这种架构？"><a href="#4-为什么选择这种架构？" class="headerlink" title="4. 为什么选择这种架构？"></a>4. 为什么选择这种架构？</h3><h4 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h4><p><strong>解耦 (Decoupling)</strong>：渲染引擎可以随时替换（比如换成 Konva 或原生 Canvas），只需要重写  StageManager，数据层和 UI 层不需要动。</p><p><strong>协同编辑 (Collaboration) 友好</strong>：</p><ul><li>如果要实现多入协同，只需要监听 WebSocket 消息，然后更新 Zustand Store。StageManager  会自动把队友的操作画出来，无需写额外的同步绘图逻辑。<br><strong>撤销/重做 (Undo/Redo) 容易</strong>：</li><li>因为所有状态都在 Store 里，只需要保存/恢复 Store 的快照（或 Patch）即可。<br><strong>序列化/反序列化</strong>：</li><li>保存项目只需  JSON.stringify(store.elements)。</li></ul><h4 id="潜在挑战（及优化方案）："><a href="#潜在挑战（及优化方案）：" class="headerlink" title="潜在挑战（及优化方案）："></a>潜在挑战（及优化方案）：</h4><p><strong>性能瓶颈</strong>：</p><ul><li>问题：高频触发  Store Update -&gt; Diff  循环可能在元素极多时（&gt;2000 个）产生开销。</li><li>优化：对于拖拽这种 60FPS 的操作，可以引入“临时层” (Transient State)。即拖拽时直接修改 Pixi 对象，鼠标松开时再同步到 Store。<br><strong>复杂性</strong>：</li><li>相比直接用 Canvas API 画图，这种架构代码量更大，需要维护 ID 映射和 Diff 逻辑。</li></ul><p>feat(canvas): 重构画布实现，应项目要求，删除了基于tldraw的实现转而选择PixiJS 库重构以进行渲染操作，基于Zustand 进行状态管理。新增的文件中canvasStore.ts主要负责维护整个画布项目的全局可序列化状态，是渲染画布系统中唯一数据来源。Pixi_stageManager.ts 负责将声明式数据（Zustand）实时、高性能地映射为命令式渲染实例（PixiJS），并处理所有用户交互的计算与反馈。canvas下的index.ts最轻量的一层，仅负责生命周期管理与组件组装。三层数据驱动架构详情可见文档</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;分析&quot;&gt;&lt;a href=&quot;#分析&quot; class=&quot;headerlink&quot; title=&quot;分析&quot;&gt;&lt;/a&gt;分析&lt;/h2&gt;&lt;p&gt;要做的就是一个&lt;strong&gt;类 Canva / Figma 的在线图形绘板&lt;/strong&gt;，完整需求优先级和覆盖范围如下：&lt;/p&gt;
&lt;d</summary>
      
    
    
    
    <category term="归档" scheme="https://zhongye1.github.io/Arknight-notes/categories/%E5%BD%92%E6%A1%A3/"/>
    
    
  </entry>
  
  <entry>
    <title>2025-11-19-重拾编程语言设计与计科相关概念</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/29484.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/29484.html</id>
    <published>2025-11-19T03:06:20.000Z</published>
    <updated>2025-11-19T03:22:30.204Z</updated>
    
    <content type="html"><![CDATA[<p>计算机类专业结果这些都得自己学，整理一套编程语言设计与计算机科学核心概念集，日后开坑学习，博客狠狠写，知识学爆</p><h2 id="一、内存管理"><a href="#一、内存管理" class="headerlink" title="一、内存管理"></a>一、内存管理</h2><h3 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h3><ul><li>指针（Pointer）</li><li>引用（Reference）</li><li>堆（Heap）</li><li>栈（Stack）</li><li>内存布局（Memory Layout）</li><li>垃圾回收（Garbage Collection）</li><li>内存泄漏（Memory Leak）</li><li>悬挂指针/引用（Dangling Pointer/Reference）</li><li>内存序（Memory Ordering）</li><li>写时复制（Copy-on-Write）</li><li>内存映射文件（Memory-mapped Files）</li><li>缓存一致性协议（Cache Coherence Protocol）</li><li>虚拟内存机制（Virtual Memory）</li><li>内存屏障（Memory Barrier）</li><li>内存对齐（Memory Alignment）</li><li>内存分配器（Memory Allocator）</li><li>内存池（Memory Pool）</li><li>引用计数（Reference Counting）</li><li>弱引用（Weak Reference）</li><li>循环引用（Circular Reference）</li><li>内存碎片（Memory Fragmentation）：包括内部碎片和外部碎片</li><li>分页与分段（Paging and Segmentation）：虚拟内存管理技术</li><li>垃圾回收算法：如标记-清除、复制、标记-整理等具体算法</li><li>内存管理单元（Memory Management Unit）</li><li>内存保护（Memory Protection）</li><li>内存访问（Memory Access）</li></ul><h3 id="存储类别"><a href="#存储类别" class="headerlink" title="存储类别"></a>存储类别</h3><ul><li>自动存储期（Automatic Storage Duration）</li><li>静态存储期（Static Storage Duration）</li><li>动态存储期（Dynamic Storage Duration）</li><li>线程存储期（Thread Storage Duration）</li><li>寄存器变量（Register Variable）</li></ul><h2 id="二、程序执行模型"><a href="#二、程序执行模型" class="headerlink" title="二、程序执行模型"></a>二、程序执行模型</h2><h3 id="函数调用机制"><a href="#函数调用机制" class="headerlink" title="函数调用机制"></a>函数调用机制</h3><ul><li>调用栈（Call Stack）</li><li>栈帧（Stack Frame）</li><li>调用约定（Calling Convention）</li><li>参数传递（Parameter Passing）</li><li>尾调用优化（Tail Call Optimization）</li><li>尾递归（Tail Recursion）</li><li>Trampoline 机制</li><li>Thunk：延迟计算的代码块</li><li>Thunk 函数：用于实现惰性求值的技术</li></ul><h3 id="执行上下文"><a href="#执行上下文" class="headerlink" title="执行上下文"></a>执行上下文</h3><ul><li>作用域（Scope）</li><li>词法作用域（Lexical Scope）</li><li>动态作用域（Dynamic Scope）</li><li>作用域链（Scope Chain）</li><li>闭包（Closure）</li><li>执行上下文（Execution Context）</li><li>变量环境（Variable Environment）</li><li>词法环境（Lexical Environment）</li><li>延续（Continuation）</li><li>协程（Coroutine）</li><li>生成器（Generator）</li></ul><h3 id="控制流"><a href="#控制流" class="headerlink" title="控制流"></a>控制流</h3><ul><li>事件循环（Event Loop）</li><li>计算器模型（Evaluator Model）</li><li>消息传递接口（Message Passing）</li><li>Actor 模型</li><li>CSP（Communicating Sequential Processes）</li><li>控制流图（Control Flow Graph）</li><li>数据流分析（Data Flow Analysis）</li></ul><h2 id="三、并发与并行"><a href="#三、并发与并行" class="headerlink" title="三、并发与并行"></a>三、并发与并行</h2><h3 id="并发模型"><a href="#并发模型" class="headerlink" title="并发模型"></a>并发模型</h3><ul><li>并发（Concurrency）</li><li>并行（Parallelism）</li><li>绿色线程（Green Threads）</li><li>内核线程（Kernel Threads）</li><li>用户态线程（User-level Threads）</li><li>线程池（Thread Pool）</li><li>工作窃取（Work Stealing）</li><li>屏障（Barrier）：同步原语</li><li>fork-join 模型：并行任务执行模型</li><li>数据竞争（Data Race）：并发访问共享数据的问题</li></ul><h3 id="同步机制"><a href="#同步机制" class="headerlink" title="同步机制"></a>同步机制</h3><ul><li>原子操作（Atomic Operations）</li><li>比较并交换（Compare-and-Swap）</li><li>锁（Lock）</li><li>自旋锁（Spinlock）</li><li>互斥锁（Mutex）</li><li>读写锁（Read-Write Lock）</li><li>信号量（Semaphore）</li><li>条件变量（Condition Variable）</li><li>无锁编程（Lock-free Programming）</li><li>内存模型（Memory Model）</li><li>顺序一致性（Sequential Consistency）</li><li>释放获取语义（Release-Acquire Semantics）</li></ul><h3 id="异步编程"><a href="#异步编程" class="headerlink" title="异步编程"></a>异步编程</h3><ul><li>Promise/Future</li><li>async/await</li><li>响应式编程（Reactive Programming）</li><li>数据并行（Data Parallelism）</li><li>任务并行（Task Parallelism）</li><li>事务内存（Transactional Memory）</li></ul><h2 id="四、类型系统"><a href="#四、类型系统" class="headerlink" title="四、类型系统"></a>四、类型系统</h2><h3 id="类型分类"><a href="#类型分类" class="headerlink" title="类型分类"></a>类型分类</h3><ul><li>静态类型（Static Typing）</li><li>动态类型（Dynamic Typing）</li><li>强类型（Strong Typing）</li><li>弱类型（Weak Typing）</li><li>基本数据类型（Primitive Data Types）</li><li>复合数据类型（Composite Data Types）</li><li>引用类型（Reference Types）</li><li>值类型（Value Types）</li><li>类型推导（Type Inference）</li><li>类型检查（Type Checking）</li><li>类型擦除（Type Erasure）</li><li>类型转换（Type Casting）</li><li>类型别名（Type Alias）</li><li>类型注解（Type Annotation）</li><li>泛型（Generics）</li><li>类型参数（Type Parameter）</li><li>类型变量（Type Variable）</li><li>类型约束（Type Constraint）</li><li>类型构造器（Type Constructor）</li><li>类型等价（Type Equality）</li><li>类型子类型（Type Subtyping）</li><li>类型上界（Type Upper Bound）</li><li>类型下界（Type Lower Bound）</li><li>类型推断（Type Inference）</li><li>类型检查（Type Checking）</li><li>子类型（Subtyping）：类型之间的关系</li><li>型变（Covariance/Contravariance）：更详细的变型规则说明</li><li>不透明类型（Opaque Types）：隐藏实现细节的类型</li></ul><h3 id="高级类型概念"><a href="#高级类型概念" class="headerlink" title="高级类型概念"></a>高级类型概念</h3><ul><li>行多态（Row Polymorphism）</li><li>存在类型（Existential Types）</li><li>高阶类型（Higher-Kinded Types）</li><li>依赖类型（Dependent Types）</li><li>渐进类型（Gradual Typing）</li><li>类型类（Type Classes）</li><li>泛型（Generics）</li><li>变型（Variance）：协变、逆变、不变</li><li>类型安全（Type Safety）</li><li>类型擦除（Type Erasure）</li><li>单态化（Monomorphization）</li></ul><h2 id="五、函数与抽象"><a href="#五、函数与抽象" class="headerlink" title="五、函数与抽象"></a>五、函数与抽象</h2><h3 id="函数概念"><a href="#函数概念" class="headerlink" title="函数概念"></a>函数概念</h3><ul><li>高阶函数（Higher-Order Function）</li><li>回调函数（Callback）</li><li>递归（Recursion）</li><li>匿名函数（Anonymous Function）</li><li>Lambda 表达式</li><li>柯里化（Currying）</li><li>部分应用（Partial Application）</li><li>函数组合（Function Composition）</li></ul><h3 id="抽象机制"><a href="#抽象机制" class="headerlink" title="抽象机制"></a>抽象机制</h3><ul><li>控制抽象（Control Abstraction）</li><li>数据抽象（Data Abstraction）</li><li>迭代器（Iterator）</li><li>流处理（Stream Processing）</li><li>声明式编程（Declarative Programming）</li><li>函子（Functor）：映射结构的抽象概念</li><li>单子（Monad）：具有绑定操作的计算容器</li></ul><h2 id="六、面向对象编程"><a href="#六、面向对象编程" class="headerlink" title="六、面向对象编程"></a>六、面向对象编程</h2><h3 id="核心概念"><a href="#核心概念" class="headerlink" title="核心概念"></a>核心概念</h3><ul><li>类（Class）</li><li>对象（Object）</li><li>封装（Encapsulation）</li><li>继承（Inheritance）</li><li>多态（Polymorphism）</li><li>接口（Interface）</li><li>抽象类（Abstract Class）</li><li>混入（Mixin）</li><li>特质（Trait）</li></ul><h3 id="对象模型"><a href="#对象模型" class="headerlink" title="对象模型"></a>对象模型</h3><ul><li>虚函数表（Virtual Method Table）</li><li>方法解析顺序（Method Resolution Order）</li><li>对象布局（Object Layout）</li><li>多重继承（Multiple Inheritance）</li><li>虚继承（Virtual Inheritance）</li><li>原型继承（Prototypal Inheritance）</li><li>消息传递（Message Passing）：对象间的通信机制</li><li>委托（Delegation）：替代继承的复用机制</li></ul><h2 id="七、元编程与反射"><a href="#七、元编程与反射" class="headerlink" title="七、元编程与反射"></a>七、元编程与反射</h2><h3 id="元编程技术"><a href="#元编程技术" class="headerlink" title="元编程技术"></a>元编程技术</h3><ul><li>反射（Reflection）</li><li>内省（Introspection）</li><li>宏系统（Macro System）</li><li>卫生宏（Hygienic Macro）</li><li>语法宏（Syntax Macro）</li><li>过程宏（Procedural Macro）</li><li>模板元编程（Template Metaprogramming）</li><li>注解处理（Annotation Processing）</li><li>属性导向编程（Attribute-Oriented Programming）</li></ul><h3 id="运行时元编程"><a href="#运行时元编程" class="headerlink" title="运行时元编程"></a>运行时元编程</h3><ul><li>动态代理（Dynamic Proxy）</li><li>方法缺失处理（Method Missing）</li><li>代码生成（Code Generation）</li><li>AST 操作（Abstract Syntax Tree Manipulation）</li></ul><h2 id="八、编译与解释"><a href="#八、编译与解释" class="headerlink" title="八、编译与解释"></a>八、编译与解释</h2><h3 id="编译原理"><a href="#编译原理" class="headerlink" title="编译原理"></a>编译原理</h3><ul><li>词法分析（Lexical Analysis）</li><li>语法分析（Syntax Analysis）</li><li>语义分析（Semantic Analysis）</li><li>中间代码生成（Intermediate Code Generation）</li><li>代码优化（Code Optimization）</li><li>目标代码生成（Target Code Generation）</li><li>编译器架构（Compiler Architecture）</li><li>编译器设计（Compiler Design）</li><li>编译器实现（Compiler Implementation）</li><li>链接时优化（Link Time Optimization, LTO）：跨模块优化技术</li><li>Profile-Guided Optimization (PGO)：基于运行时信息的优化</li></ul><h3 id="执行引擎"><a href="#执行引擎" class="headerlink" title="执行引擎"></a>执行引擎</h3><ul><li>解释器（Interpreter）</li><li>字节码（Bytecode）</li><li>即时编译（Just-In-Time Compilation）</li><li>抽象语法树（Abstract Syntax Tree, AST）</li><li>单态化（Monomorphization）</li><li>类型擦除（Type Erasure）</li><li>中间表示（Intermediate Representation）</li><li>SSA 形式（Static Single Assignment）</li></ul><h2 id="九、系统接口"><a href="#九、系统接口" class="headerlink" title="九、系统接口"></a>九、系统接口</h2><h3 id="操作系统交互"><a href="#操作系统交互" class="headerlink" title="操作系统交互"></a>操作系统交互</h3><ul><li>系统调用（System Call）</li><li>文件描述符（File Descriptor）</li><li>ABI（Application Binary Interface）</li><li>系统 V ABI</li><li>TLS（Thread Local Storage）</li><li>信号处理（Signal Handling）</li></ul><h2 id="十、异常与错误处理"><a href="#十、异常与错误处理" class="headerlink" title="十、异常与错误处理"></a>十、异常与错误处理</h2><h3 id="错误处理机制"><a href="#错误处理机制" class="headerlink" title="错误处理机制"></a>错误处理机制</h3><ul><li>异常处理（Exception Handling）</li><li>返回值错误（Error Return Values）</li><li>Result 类型</li><li>可选值（Option/Maybe）</li><li>断言（Assertion）</li><li>契约编程（Design by Contract）</li></ul><h3 id="资源管理"><a href="#资源管理" class="headerlink" title="资源管理"></a>资源管理</h3><ul><li>RAII（Resource Acquisition Is Initialization）</li><li>所有权系统（Ownership System）</li><li>借用检查（Borrow Checking）</li><li>生命周期（Lifetime）</li><li>析构函数（Destructor）</li><li>finally 块</li></ul><h2 id="十一、模块化与代码组织"><a href="#十一、模块化与代码组织" class="headerlink" title="十一、模块化与代码组织"></a>十一、模块化与代码组织</h2><h3 id="代码组织"><a href="#代码组织" class="headerlink" title="代码组织"></a>代码组织</h3><ul><li>模块化（Modularity）</li><li>命名空间（Namespace）</li><li>包管理（Package Management）</li><li>依赖注入（Dependency Injection）</li><li>接口隔离（Interface Segregation）</li></ul><h3 id="链接与加载"><a href="#链接与加载" class="headerlink" title="链接与加载"></a>链接与加载</h3><ul><li>静态链接（Static Linking）</li><li>动态链接（Dynamic Linking）</li><li>符号解析（Symbol Resolution）</li><li>重定位（Relocation）</li><li>名称修饰（Name Mangling）</li></ul><h2 id="十二、性能优化"><a href="#十二、性能优化" class="headerlink" title="十二、性能优化"></a>十二、性能优化</h2><h3 id="编译器优化"><a href="#编译器优化" class="headerlink" title="编译器优化"></a>编译器优化</h3><ul><li>内联优化（Inlining）</li><li>常量传播（Constant Propagation）</li><li>死代码消除（Dead Code Elimination）</li><li>循环优化（Loop Optimization）</li><li>向量化（Vectorization）</li><li>分支目标缓冲（Branch Target Buffer）：提高分支预测准确性的硬件机制</li><li>指令级并行（Instruction Level Parallelism）：CPU 级别的并行执行</li></ul><h3 id="运行时优化"><a href="#运行时优化" class="headerlink" title="运行时优化"></a>运行时优化</h3><ul><li>内联缓存（Inline Cache）</li><li>方法缓存（Method Cache）</li><li>逃逸分析（Escape Analysis）</li><li>栈上替换（On-Stack Replacement）</li><li>热点代码检测（Hotspot Detection）</li></ul><h3 id="硬件优化"><a href="#硬件优化" class="headerlink" title="硬件优化"></a>硬件优化</h3><ul><li>缓存局部性（Cache Locality）</li><li>分支预测（Branch Prediction）</li><li>流水线冒险（Pipeline Hazard）</li><li>预取（Prefetching）</li><li>SIMD（Single Instruction Multiple Data）</li></ul><h2 id="十三、形式化方法与理论"><a href="#十三、形式化方法与理论" class="headerlink" title="十三、形式化方法与理论"></a>十三、形式化方法与理论</h2><h3 id="形式化验证"><a href="#形式化验证" class="headerlink" title="形式化验证"></a>形式化验证</h3><ul><li>霍尔逻辑（Hoare Logic）</li><li>指称语义（Denotational Semantics）</li><li>操作语义（Operational Semantics）</li><li>公理语义（Axiomatic Semantics）</li><li>进展定理（Progress Theorem）</li><li>保持定理（Preservation Theorem）</li></ul><h3 id="计算理论"><a href="#计算理论" class="headerlink" title="计算理论"></a>计算理论</h3><ul><li>λ 演算（Lambda Calculus）</li><li>组合子逻辑（Combinatory Logic）</li><li>图灵完备性（Turing Completeness）</li><li>邱奇-图灵论题（Church-Turing Thesis）</li><li>停机问题（Halting Problem）</li></ul><h2 id="十四、现代语言特性"><a href="#十四、现代语言特性" class="headerlink" title="十四、现代语言特性"></a>十四、现代语言特性</h2><h3 id="语言设计趋势"><a href="#语言设计趋势" class="headerlink" title="语言设计趋势"></a>语言设计趋势</h3><ul><li>空安全（Null Safety）</li><li>模式匹配（Pattern Matching）</li><li>异步/等待（Async/Await）</li><li>记录类型（Record Types）</li><li>代数数据类型（Algebraic Data Types）</li><li>效应系统（Effect System）</li><li>资源安全（Resource Safety）</li><li>所有权与借用（Ownership and Borrowing）：Rust 中的内存安全机制</li><li>异构编程（Heterogeneous Programming）：利用多种计算设备的编程模型</li></ul><h3 id="表达式问题"><a href="#表达式问题" class="headerlink" title="表达式问题"></a>表达式问题</h3><ul><li>表达式问题（Expression Problem）</li><li>访问者模式（Visitor Pattern）</li><li>模式匹配解构</li></ul><h2 id="十五、编程范式"><a href="#十五、编程范式" class="headerlink" title="十五、编程范式"></a>十五、编程范式</h2><h3 id="主要范式"><a href="#主要范式" class="headerlink" title="主要范式"></a>主要范式</h3><ul><li>命令式编程（Imperative Programming）</li><li>声明式编程（Declarative Programming）</li><li>函数式编程（Functional Programming）</li><li>逻辑编程（Logic Programming）</li><li>面向对象编程（Object-Oriented Programming）</li><li>面向方面编程（Aspect-Oriented Programming）</li></ul><h3 id="混合范式"><a href="#混合范式" class="headerlink" title="混合范式"></a>混合范式</h3><ul><li>多范式编程（Multi-paradigm Programming）</li><li>函数响应式编程（Functional Reactive Programming）</li><li>元对象协议（Metaobject Protocol）</li></ul><h2 id="十六、软件开发基础"><a href="#十六、软件开发基础" class="headerlink" title="十六、软件开发基础"></a>十六、软件开发基础</h2><h3 id="基础概念-1"><a href="#基础概念-1" class="headerlink" title="基础概念"></a>基础概念</h3><ul><li>表达式与语句（Expressions vs Statements）</li><li>控制流（Control Flow）</li><li>数据结构（Data Structures）</li><li>算法（Algorithms）</li><li>复杂度分析（Complexity Analysis）</li><li>设计模式（Design Patterns）：常见问题的标准解决方案</li><li>SOLID 原则：面向对象设计的五个基本原则</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;计算机类专业结果这些都得自己学，整理一套编程语言设计与计算机科学核心概念集，日后开坑学习，博客狠狠写，知识学爆&lt;/p&gt;
&lt;h2 id=&quot;一、内存管理&quot;&gt;&lt;a href=&quot;#一、内存管理&quot; class=&quot;headerlink&quot; title=&quot;一、内存管理&quot;&gt;&lt;/a&gt;一、内存管</summary>
      
    
    
    
    <category term="笔记" scheme="https://zhongye1.github.io/Arknight-notes/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="日志" scheme="https://zhongye1.github.io/Arknight-notes/tags/%E6%97%A5%E5%BF%97/"/>
    
  </entry>
  
  <entry>
    <title>2025-11-17-Arch-Linux运行AppImage相关</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/11830.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/11830.html</id>
    <published>2025-11-17T01:59:59.000Z</published>
    <updated>2025-11-17T02:22:32.104Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://link.zhihu.com/?target=https%3A//appimage.org/">AppImage</a>是一种可执行文件格式，类似于 Windows 的 exe 文件，macOS 的 app 文件，不过 AppImage 是运行在 Linux 上的可执行文件，而且是可以运行在不同发行版本的 Linux，如 Ubuntu, Debian, openSUSE, RHEL, CentOS, Fedora, Arch Linux …</p></blockquote><p>运行时</p><ol><li>切换到文件路径 <code>cd [文件路径]</code></li><li>设置文件可以执行权限，<code>chmod +x my.AppImage</code></li><li>运行 AppImage <code>./my.AppImage</code></li></ol><p>第一次执行的时候可能会碰到<code>FUSE</code>相关的问题</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs log">dlopen(): error loading libfuse.so.2<br><br>AppImages require FUSE to run.<br>You might still be able to extract the contents of this AppImage<br>if you run it with the --appimage-extract option.<br>See https://github.com/AppImage/AppImageKit/wiki/FUSE<br>for more information<br></code></pre></td></tr></table></figure><p>此时在 Arch Linux 上需要安装<code>fuse2</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S fuse2<br></code></pre></td></tr></table></figure><p>更多关于 FUSE 的问题可以查看：<a href="https://link.zhihu.com/?target=https%3A//docs.appimage.org/user-guide/troubleshooting/fuse.html">I get some errors related to something called “FUSE”</a></p><p>在 Arch Linux 中创建 Desktop Entry（桌面条目）可以让你在应用启动器（如 GNOME、KDE 等）中显示应用图标。以下是创建步骤：</p><h4 id="创建-desktop文件"><a href="#创建-desktop文件" class="headerlink" title="创建 .desktop文件"></a><strong>创建 <code>.desktop</code>文件</strong></h4><p>在以下目录之一创建 <code>.desktop</code>文件：</p><p><strong>系统级</strong>（所有用户可用）：<code>/usr/share/applications/</code><br><strong>用户级</strong>（仅当前用户可用）：<code>~/.local/share/applications/</code></p><p>例如，为用户创建条目：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">mkdir -p ~/.<span class="hljs-keyword">local</span>/<span class="hljs-keyword">share</span>/applications<br>nano ~/.<span class="hljs-keyword">local</span>/<span class="hljs-keyword">share</span>/applications/myapp.desktop<br></code></pre></td></tr></table></figure><hr><p>模板参考（以 VSCode 为例）：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Desktop Entry]</span><br><span class="hljs-attr">Version</span>=<span class="hljs-number">1.0</span><br><span class="hljs-attr">Type</span>=Application<br><span class="hljs-attr">Name</span>=My Application<br><span class="hljs-attr">Comment</span>=应用描述<br><span class="hljs-attr">Exec</span>=/path/to/application/executable<br><span class="hljs-attr">Icon</span>=/path/to/icon/image.png<br><span class="hljs-attr">Terminal</span>=<span class="hljs-literal">false</span><br><span class="hljs-attr">Categories</span>=Utility<span class="hljs-comment">;Development;</span><br></code></pre></td></tr></table></figure><p><strong><code>Type</code></strong>: 固定为 <code>Application</code>（也可以是 <code>Link</code>或 <code>Directory</code>）<br><strong><code>Name</code></strong>: 显示在菜单中的名称<br><strong><code>Exec</code></strong>: 可执行文件的<strong>绝对路径</strong>（支持参数，如 <code>%F</code>表示文件）<br><strong><code>Icon</code></strong>: 图标路径（支持绝对路径或主题图标名，如 <code>firefox</code>）<br><strong><code>Terminal</code></strong>: 是否在终端中运行（<code>true/false</code>）<br><strong><code>Categories</code></strong>: 应用分类（参考 <a href="https://standards.freedesktop.org/menu-spec/latest/apa.html">freedesktop 规范</a>）</p><h4 id="设置权限"><a href="#设置权限" class="headerlink" title="设置权限"></a>设置权限</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">chmod +x ~<span class="hljs-regexp">/.local/</span>share<span class="hljs-regexp">/applications/my</span>app.desktop<br></code></pre></td></tr></table></figure><h4 id="验证语法"><a href="#验证语法" class="headerlink" title="验证语法"></a><strong>验证语法</strong></h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">desktop-<span class="hljs-keyword">file</span>-validate ~<span class="hljs-regexp">/.local/</span>share<span class="hljs-regexp">/applications/my</span>app.desktop<br></code></pre></td></tr></table></figure><h4 id="更新数据库"><a href="#更新数据库" class="headerlink" title="更新数据库"></a><strong>更新数据库</strong></h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">update</span>-desktop-<span class="hljs-keyword">database</span> ~/.<span class="hljs-keyword">local</span>/<span class="hljs-keyword">share</span>/applications/<br></code></pre></td></tr></table></figure><p>这时候就可以看到桌面上有相关的应用了</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//appimage.org/&quot;&gt;AppImage&lt;/a&gt;是一种可执行文件格式，类似于 Windows 的 exe 文件，macOS 的 app 文件，</summary>
      
    
    
    
    <category term="归档" scheme="https://zhongye1.github.io/Arknight-notes/categories/%E5%BD%92%E6%A1%A3/"/>
    
    
  </entry>
  
  <entry>
    <title>2025-11-16-ES6相关</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/9503.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/9503.html</id>
    <published>2025-11-16T09:21:25.000Z</published>
    <updated>2025-11-17T01:59:40.012Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h3><h3 id="1、let-和-const"><a href="#1、let-和-const" class="headerlink" title="1、let 和 const"></a>1、let 和 const</h3><div class="table-container"><table><thead><tr><th>名称</th><th>描述</th></tr></thead><tbody><tr><td>let</td><td>声明变量的关键字，let 声明的变量只在 let 命令所在的代码块内有效</td></tr><tr><td>const</td><td>声明常量的关键字，const 声明一个只读的常量，一旦声明，常量的值就不能改变。</td></tr></tbody></table></div><h3 id="2、模板字符串-和-箭头函数"><a href="#2、模板字符串-和-箭头函数" class="headerlink" title="2、模板字符串 和 箭头函数"></a>2、模板字符串 和 箭头函数</h3><div class="table-container"><table><thead><tr><th>名称</th><th>描述</th></tr></thead><tbody><tr><td>``</td><td>使用反引号``包裹的字符串</td></tr><tr><td>() =&gt;{}</td><td>使用箭头（=&gt;）声明函数，不用再书写 function 关键字 <br>示例： const add = () =&gt;{ console.log(‘add’)}</td></tr><tr><td>this</td><td>1、非箭头函数中的 this 指向函数的调用者 <br>2、箭头函数中的 this 指向定义时所在的对象 <br>3、全局作用域中 this 指向 window</td></tr></tbody></table></div><h3 id="3、解构赋值"><a href="#3、解构赋值" class="headerlink" title="3、解构赋值"></a>3、解构赋值</h3><div class="table-container"><table><thead><tr><th>名称</th><th>描述</th></tr></thead><tbody><tr><td>[] = []</td><td>数组的解构赋值 <br>示例：let [a, b, c] = [1, 2, 3]; 可以从数组中提取值，按照对应位置，给左侧变量赋值</td></tr><tr><td>{} = {}</td><td>对象的解构赋值 <br>示例：let { bar，foo } = { foo: ‘aaa’, bar: ‘bbb’ }; 按照对应的属性，给左侧的变量赋值，等号左边的两个变量的书写顺序，与等号右边两个同名属性的顺序可以不一致</td></tr><tr><td>[] = “” ，{} = “”</td><td>字符串的解构赋值，在解构前，字符串被转换成了一个类似数组的对象 （不常用，了解即可） <br>1、以数组的形式解构，const [a, b, c, d, e] = ‘hello’ <br>2、以对象的形式解构，let { 0: a } = ‘hello’</td></tr></tbody></table></div><h3 id="4、剩余参数，展开运算符"><a href="#4、剩余参数，展开运算符" class="headerlink" title="4、剩余参数，展开运算符"></a>4、剩余参数，展开运算符</h3><div class="table-container"><table><thead><tr><th>名称</th><th>描述</th></tr></thead><tbody><tr><td>…arg</td><td>将一个不定数量的参数表示为一个数组</td></tr><tr><td>…</td><td>将内容展开</td></tr></tbody></table></div><h3 id="5、数据结构"><a href="#5、数据结构" class="headerlink" title="5、数据结构"></a>5、数据结构</h3><div class="table-container"><table><thead><tr><th>名称</th><th>描述</th></tr></thead><tbody><tr><td>Set</td><td>是一系列无序、没有重复值的集合</td></tr><tr><td>Map</td><td>是键值对的集合，但是“键”的范围不限于字符串，各种类型的值（包括对象）都可以当作键</td></tr></tbody></table></div><h3 id="6、Set-和-Map-共有的方法和属性"><a href="#6、Set-和-Map-共有的方法和属性" class="headerlink" title="6、Set 和 Map 共有的方法和属性"></a>6、Set 和 Map 共有的方法和属性</h3><div class="table-container"><table><thead><tr><th>名称</th><th>描述</th></tr></thead><tbody><tr><td>has()</td><td>判断该值是否为 Set/Map 的成员。</td></tr><tr><td>delete()</td><td>删除某个成员</td></tr><tr><td>clear()</td><td>删除所有成员</td></tr><tr><td>forEach()</td><td>遍历每个成员</td></tr><tr><td>size</td><td>返回 Set/Map 实例的成员总数</td></tr></tbody></table></div><h3 id="7、Set-和-Map-实例的方法"><a href="#7、Set-和-Map-实例的方法" class="headerlink" title="7、Set 和 Map 实例的方法"></a>7、Set 和 Map 实例的方法</h3><div class="table-container"><table><thead><tr><th>方法名</th><th>描述</th></tr></thead><tbody><tr><td>add()</td><td>Set 实例的方法，添加成员</td></tr><tr><td>set()</td><td>Map 实例的方法，添加成员</td></tr><tr><td>get()</td><td>Map 实例的方法，获取成员</td></tr></tbody></table></div><h3 id="8、遍历器"><a href="#8、遍历器" class="headerlink" title="8、遍历器"></a>8、遍历器</h3><div class="table-container"><table><thead><tr><th>名称</th><th>描述</th></tr></thead><tbody><tr><td>Iterator</td><td>为各种不同的数据结构提供统一的访问机制</td></tr><tr><td>for…of</td><td>遍历成员，for…of 循环可以使用的范围包括数组、 <br>Set 和 Map 结构、某些类似数组的对象（比如 arguments 对象、DOM NodeList 对象）</td></tr></tbody></table></div><h3 id="9、数组的新增方法"><a href="#9、数组的新增方法" class="headerlink" title="9、数组的新增方法"></a>9、数组的新增方法</h3><div class="table-container"><table><thead><tr><th>方法名称</th><th>描述</th></tr></thead><tbody><tr><td>keys()</td><td>遍历索引</td></tr><tr><td>values()</td><td>遍历值</td></tr><tr><td>entries()</td><td>遍历索引和值</td></tr><tr><td>includes()</td><td>判断数组中是否含某个成员（不常用，了解即可）</td></tr><tr><td>Array.from()</td><td>将其他数据类型转换为数组</td></tr><tr><td>find()</td><td>返回第一个符合条件的数组成员</td></tr><tr><td>findIndex()</td><td>返回第一个符合条件的数组成员的位置</td></tr></tbody></table></div><h3 id="10、字符串的新增方法"><a href="#10、字符串的新增方法" class="headerlink" title="10、字符串的新增方法"></a>10、字符串的新增方法</h3><div class="table-container"><table><thead><tr><th>方法名称</th><th>描述</th></tr></thead><tbody><tr><td>includes()</td><td>判断字符串中是否包含某些字符</td></tr><tr><td>padStart()</td><td>补全字符串的长度，用于头部补全（不常用，了解即可）</td></tr><tr><td>padEnd()</td><td>补全字符串的长度，用于尾部补全（不常用，了解即可）</td></tr><tr><td>trimLeft() ，trimStart()</td><td>清除字符串头部的空格（不常用，了解即可）</td></tr><tr><td>trimEnd() ，trimRight()</td><td>清除字符串尾部的空格（不常用，了解即可）</td></tr></tbody></table></div><h3 id="11、对象的新增方法"><a href="#11、对象的新增方法" class="headerlink" title="11、对象的新增方法"></a>11、对象的新增方法</h3><div class="table-container"><table><thead><tr><th>方法名称</th><th>描述</th></tr></thead><tbody><tr><td>assign()</td><td>合并对象</td></tr><tr><td>Object.keys()</td><td>返回一个数组，成员是键名</td></tr><tr><td>Object.values()</td><td>返回一个数组，成员是键值</td></tr><tr><td>Object.entries()</td><td>返回一个数组，成员是键名和键值</td></tr></tbody></table></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;ES6&quot;&gt;&lt;a href=&quot;#ES6&quot; class=&quot;headerlink&quot; title=&quot;ES6&quot;&gt;&lt;/a&gt;ES6&lt;/h3&gt;&lt;h3 id=&quot;1、let-和-const&quot;&gt;&lt;a href=&quot;#1、let-和-const&quot; class=&quot;headerlink&quot; ti</summary>
      
    
    
    
    <category term="归档" scheme="https://zhongye1.github.io/Arknight-notes/categories/%E5%BD%92%E6%A1%A3/"/>
    
    
    <category term="前端开发" scheme="https://zhongye1.github.io/Arknight-notes/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>2025-11-09-关于软考高项网规</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/53411.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/53411.html</id>
    <published>2025-11-09T11:54:52.000Z</published>
    <updated>2025-11-17T04:17:47.505Z</updated>
    
    <content type="html"><![CDATA[<p class='item-img' data-src='https://pic1.zhimg.com/80/v2-64f704998685ee637755df7f76ed905c_720w.webp'><img src="https://pic1.zhimg.com/80/v2-64f704998685ee637755df7f76ed905c_720w.webp" alt=""></p><p class='item-img' data-src='https://pica.zhimg.com/80/v2-94e7dccfb5b4f6ef38ffa16111e52822_720w.webp'><img src="https://pica.zhimg.com/80/v2-94e7dccfb5b4f6ef38ffa16111e52822_720w.webp" alt=""></p><p>早八去东风路考试，上午选择大概考了网络基础概念 OSI 模型、编码传输之类，另外就是问企业内部网络规划（VLAN、路由交换）、路由协议（OSPF、BGP）、传输应用层（TCP/IP、DNS）及网络管理（SNMP），差不多还有广域网接入、无线与 IPv6，问了下网络安全解决方案（防火墙、VPN、加密认证）、服务器存储与容灾技术，网络规划设计与实施能力，加上一些操作系统、项目管理，专业英语之类的八股</p><p>然后案例分析问了网络安全、无线网络规划和存储容灾之类的内容，第一题问一家公司网络中存在大量用户敏感信息，还不进行网络安全等级保护测评，业务烂的要死被勒索病毒攻击事件还不立马断网还查资料把整个单位崩了之类的情况让你分析 <strong>（安全问题加钱就完了，开月薪 3000 谁给你写 waf）</strong></p><p>第二题问在图书馆、教学楼、宿舍、操场、体育馆等不同场景下进行无线网络部署的工作，​ 比较 2.4G、5G、6G 等不同无线频段的特性（答了穿透性、速率、干扰、信道数量），再问设备选型之类（密集放装型、面板型、室外定向天线），还问怎么写一万人使用的网络设计方案</p><p>第三题问某公司的数据备份和存储架构规划，问备份策略（全量/增量通过 IPSec VPN 传输）的不足（一眼带宽占用大、恢复时间长），提出改进措施（如改用专线、增量永久合成等技术，一时半会没想到都），然后就是问提升集中式存储可靠性的技术（如 RAID、双控制器、快照、镜像等）。再问技术选型，对比集中式存储和分布式存储在架构、冗余机制、扩展性和性能等方面的差异，比较堆叠和 MLAG 这两种提高网络可靠性的技术差异之类。</p><p>论文是讲国家教育数字化战略，推进智慧校园建设相关的内容，“论智慧校园网络规划与设计”，比如智慧校园要如何满足同城双校区网络互联，无线网络覆盖，智慧教室专网，校园安防专网等基本需求。<br>说是要结合自身参与规划、设计和实施的智慧校园网络建设项目，详细论述规划和设计方案，包括项目整体规划，网络架构，设备选型等，再结合自身参与实施的项目，分析智慧校园网络规划与设计中的难点和创新点。（哪个大三的会有这经验）</p><p>吃 408 计网老本还有平时一些积累考的，区别在于感觉题目更侧重问通信工程相关，做起来没啥太大压力，论文的话感觉没两年工作经验写不动，只能靠先前准备的内容糊上去，感觉会被卡 10%通过率，大概率寄了痛失两百块，下次考也许工作后罢。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p class=&#39;item-img&#39; data-src=&#39;https://pic1.zhimg.com/80/v2-64f704998685ee637755df7f76ed905c_720w.webp&#39;&gt;&lt;img src=&quot;https://pic1.zhimg.com/80/v</summary>
      
    
    
    
    <category term="归档" scheme="https://zhongye1.github.io/Arknight-notes/categories/%E5%BD%92%E6%A1%A3/"/>
    
    
    <category term="日志" scheme="https://zhongye1.github.io/Arknight-notes/tags/%E6%97%A5%E5%BF%97/"/>
    
  </entry>
  
  <entry>
    <title>2025-11-05-基于随机加权推断模型（IM）的参数估计算法</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/10893.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/10893.html</id>
    <published>2025-11-05T12:51:41.000Z</published>
    <updated>2025-11-17T04:31:38.490Z</updated>
    
    <content type="html"><![CDATA[<h2 id="基于随机加权推断模型（IM）的参数估计方法"><a href="#基于随机加权推断模型（IM）的参数估计方法" class="headerlink" title="基于随机加权推断模型（IM）的参数估计方法"></a>基于随机加权推断模型（IM）的参数估计方法</h2><p>不可观测的泊松过程 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="14.938ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 6602.6 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mo" transform="translate(1036.8,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mtext" transform="translate(2092.6,0)"><path data-c="50" d="M130 622Q123 629 119 631T103 634T60 637H27V683H214Q237 683 276 683T331 684Q419 684 471 671T567 616Q624 563 624 489Q624 421 573 372T451 307Q429 302 328 301H234V181Q234 62 237 58Q245 47 304 46H337V0H326Q305 3 182 3Q47 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM507 488Q507 514 506 528T500 564T483 597T450 620T397 635Q385 637 307 637H286Q237 637 234 628Q231 624 231 483V342H302H339Q390 342 423 349T481 382Q507 411 507 488Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(681,0)"></path><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(1181,0)"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1459,0)"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1853,0)"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(2247,0)"></path><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(2747,0)"></path></g><g data-mml-node="mo" transform="translate(5395.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(5784.6,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(6213.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container> 和 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="14.75ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 6519.6 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mo" transform="translate(922.8,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mtext" transform="translate(1978.6,0)"><path data-c="50" d="M130 622Q123 629 119 631T103 634T60 637H27V683H214Q237 683 276 683T331 684Q419 684 471 671T567 616Q624 563 624 489Q624 421 573 372T451 307Q429 302 328 301H234V181Q234 62 237 58Q245 47 304 46H337V0H326Q305 3 182 3Q47 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM507 488Q507 514 506 528T500 564T483 597T450 620T397 635Q385 637 307 637H286Q237 637 234 628Q231 624 231 483V342H302H339Q390 342 423 349T481 382Q507 411 507 488Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(681,0)"></path><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(1181,0)"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1459,0)"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1853,0)"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(2247,0)"></path><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(2747,0)"></path></g><g data-mml-node="mo" transform="translate(5281.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(5670.6,0)"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="mo" transform="translate(6130.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>，观测值 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="27.713ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 12249 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path></g><g data-mml-node="mo" transform="translate(1040.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(2096.6,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mo" transform="translate(3077.8,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(4078,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mo" transform="translate(5000.8,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mtext" transform="translate(6056.6,0)"><path data-c="50" d="M130 622Q123 629 119 631T103 634T60 637H27V683H214Q237 683 276 683T331 684Q419 684 471 671T567 616Q624 563 624 489Q624 421 573 372T451 307Q429 302 328 301H234V181Q234 62 237 58Q245 47 304 46H337V0H326Q305 3 182 3Q47 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM507 488Q507 514 506 528T500 564T483 597T450 620T397 635Q385 637 307 637H286Q237 637 234 628Q231 624 231 483V342H302H339Q390 342 423 349T481 382Q507 411 507 488Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(681,0)"></path><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(1181,0)"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1459,0)"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1853,0)"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(2247,0)"></path><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(2747,0)"></path></g><g data-mml-node="mo" transform="translate(9359.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(9748.6,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(10399.8,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(11400,0)"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="mo" transform="translate(11860,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container> 和辅助变量 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="19.213ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 8492 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mo" transform="translate(1325.8,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mtext" transform="translate(2381.6,0)"><path data-c="50" d="M130 622Q123 629 119 631T103 634T60 637H27V683H214Q237 683 276 683T331 684Q419 684 471 671T567 616Q624 563 624 489Q624 421 573 372T451 307Q429 302 328 301H234V181Q234 62 237 58Q245 47 304 46H337V0H326Q305 3 182 3Q47 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM507 488Q507 514 506 528T500 564T483 597T450 620T397 635Q385 637 307 637H286Q237 637 234 628Q231 624 231 483V342H302H339Q390 342 423 349T481 382Q507 411 507 488Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(681,0)"></path><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(1181,0)"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1459,0)"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1853,0)"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(2247,0)"></path><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(2747,0)"></path></g><g data-mml-node="mo" transform="translate(5684.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(6073.6,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(7173.8,0)"><path data-c="22C5" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250Z"></path></g><g data-mml-node="mi" transform="translate(7674,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(8103,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>，目标是估计参数 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.971ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 429 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container>、<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="1.041ex" height="1.439ex" role="img" focusable="false" viewBox="0 -442 460 636"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g></g></g></svg></mjx-container><br>m?</p><p>现提出基于随机加权推断模型（Inferential Model, IM）的算法通过引入随机权重处理离散分布，来构造置信区间</p><h3 id="方法概述"><a href="#方法概述" class="headerlink" title="方法概述"></a>方法概述</h3><p>随机加权 IM 方法的核心是通过引入均匀随机变量和权重，将离散泊松分布连续化，从而逆解参数<br>该方法假设 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.986ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 878 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container> 已知算法分为四个步骤：建立关联模型、引入随机权重连续化、逆解参数、模拟验证覆盖率</p><h3 id="算法步骤"><a href="#算法步骤" class="headerlink" title="算法步骤"></a>算法步骤</h3><h4 id="1-建立关联模型"><a href="#1-建立关联模型" class="headerlink" title="1: 建立关联模型"></a>1: 建立关联模型</h4><p>对观测值 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.726ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 763 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path></g></g></g></svg></mjx-container>，其分布函数为 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="5.262ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2325.6 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"></path></g><g data-mml-node="TeXAtom" transform="translate(676,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"></path></g></g></g><g data-mml-node="mo" transform="translate(1057.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(1446.6,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(1936.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>，其中 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="8.855ex" height="2.034ex" role="img" focusable="false" viewBox="0 -705 3914 899"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"></path></g><g data-mml-node="mo" transform="translate(746.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(1802.6,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(2453.8,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(3454,0)"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g></g></g></svg></mjx-container><br>引入辅助变量 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="17.519ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 7743.2 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(849.8,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mtext" transform="translate(1905.6,0)"><path data-c="55" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q57 680 180 680Q315 680 324 683H335V637H302Q262 636 251 634T233 622L232 418V291Q232 189 240 145T280 67Q325 24 389 24Q454 24 506 64T571 183Q575 206 575 410V598Q569 608 565 613T541 627T489 637H472V683H481Q496 680 598 680T715 683H724V637H707Q634 633 622 598L621 399Q620 194 617 180Q617 179 615 171Q595 83 531 31T389 -22Q304 -22 226 33T130 192Q129 201 128 412V622Z"></path><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(750,0)"></path><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(1306,0)"></path><path data-c="66" d="M273 0Q255 3 146 3Q43 3 34 0H26V46H42Q70 46 91 49Q99 52 103 60Q104 62 104 224V385H33V431H104V497L105 564L107 574Q126 639 171 668T266 704Q267 704 275 704T289 705Q330 702 351 679T372 627Q372 604 358 590T321 576T284 590T270 627Q270 647 288 667H284Q280 668 273 668Q245 668 223 647T189 592Q183 572 182 497V431H293V385H185V225Q185 63 186 61T189 57T194 54T199 51T206 49T213 48T222 47T231 47T241 46T251 46H282V0H273Z" transform="translate(1584,0)"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(1890,0)"></path><path data-c="72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z" transform="translate(2390,0)"></path><path data-c="6D" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q351 442 364 440T387 434T406 426T421 417T432 406T441 395T448 384T452 374T455 366L457 361L460 365Q463 369 466 373T475 384T488 397T503 410T523 422T546 432T572 439T603 442Q729 442 740 329Q741 322 741 190V104Q741 66 743 59T754 49Q775 46 803 46H819V0H811L788 1Q764 2 737 2T699 3Q596 3 587 0H579V46H595Q656 46 656 62Q657 64 657 200Q656 335 655 343Q649 371 635 385T611 402T585 404Q540 404 506 370Q479 343 472 315T464 232V168V108Q464 78 465 68T468 55T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(2782,0)"></path></g><g data-mml-node="mo" transform="translate(5520.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mn" transform="translate(5909.6,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(6409.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(6854.2,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(7354.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>，建立关联：</p><script type="math/tex; mode=display">F_{θ}(Y-1) \leq u < F_{θ}(Y)</script><p>对观测值 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="2.371ex" height="1.595ex" role="img" focusable="false" viewBox="0 -683 1048 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g></g></g></svg></mjx-container>，其分布函数为 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="7.114ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3144.2 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"></path></g><g data-mml-node="TeXAtom" transform="translate(676,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(878,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g><g data-mml-node="mo" transform="translate(1650.2,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(2039.2,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mo" transform="translate(2755.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>，引入辅助变量 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="17.322ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 7656.2 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></g><g data-mml-node="mo" transform="translate(762.8,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mtext" transform="translate(1818.6,0)"><path data-c="55" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q57 680 180 680Q315 680 324 683H335V637H302Q262 636 251 634T233 622L232 418V291Q232 189 240 145T280 67Q325 24 389 24Q454 24 506 64T571 183Q575 206 575 410V598Q569 608 565 613T541 627T489 637H472V683H481Q496 680 598 680T715 683H724V637H707Q634 633 622 598L621 399Q620 194 617 180Q617 179 615 171Q595 83 531 31T389 -22Q304 -22 226 33T130 192Q129 201 128 412V622Z"></path><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(750,0)"></path><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(1306,0)"></path><path data-c="66" d="M273 0Q255 3 146 3Q43 3 34 0H26V46H42Q70 46 91 49Q99 52 103 60Q104 62 104 224V385H33V431H104V497L105 564L107 574Q126 639 171 668T266 704Q267 704 275 704T289 705Q330 702 351 679T372 627Q372 604 358 590T321 576T284 590T270 627Q270 647 288 667H284Q280 668 273 668Q245 668 223 647T189 592Q183 572 182 497V431H293V385H185V225Q185 63 186 61T189 57T194 54T199 51T206 49T213 48T222 47T231 47T241 46T251 46H282V0H273Z" transform="translate(1584,0)"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(1890,0)"></path><path data-c="72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z" transform="translate(2390,0)"></path><path data-c="6D" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q351 442 364 440T387 434T406 426T421 417T432 406T441 395T448 384T452 374T455 366L457 361L460 365Q463 369 466 373T475 384T488 397T503 410T523 422T546 432T572 439T603 442Q729 442 740 329Q741 322 741 190V104Q741 66 743 59T754 49Q775 46 803 46H819V0H811L788 1Q764 2 737 2T699 3Q596 3 587 0H579V46H595Q656 46 656 62Q657 64 657 200Q656 335 655 343Q649 371 635 385T611 402T585 404Q540 404 506 370Q479 343 472 315T464 232V168V108Q464 78 465 68T468 55T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(2782,0)"></path></g><g data-mml-node="mo" transform="translate(5433.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mn" transform="translate(5822.6,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(6322.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(6767.2,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(7267.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>，建立关联：</p><script type="math/tex; mode=display">F_{mb}(W-1) \leq v \leq F_{mb}(W)</script><h4 id="2-引入随机权重进行连续化"><a href="#2-引入随机权重进行连续化" class="headerlink" title="2: 引入随机权重进行连续化"></a>2: 引入随机权重进行连续化</h4><p>引入随机权重 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="22.446ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 9921 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(1152.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msub" transform="translate(1597.2,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(3027.6,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mtext" transform="translate(4083.3,0)"><path data-c="55" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q57 680 180 680Q315 680 324 683H335V637H302Q262 636 251 634T233 622L232 418V291Q232 189 240 145T280 67Q325 24 389 24Q454 24 506 64T571 183Q575 206 575 410V598Q569 608 565 613T541 627T489 637H472V683H481Q496 680 598 680T715 683H724V637H707Q634 633 622 598L621 399Q620 194 617 180Q617 179 615 171Q595 83 531 31T389 -22Q304 -22 226 33T130 192Q129 201 128 412V622Z"></path><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(750,0)"></path><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(1306,0)"></path><path data-c="66" d="M273 0Q255 3 146 3Q43 3 34 0H26V46H42Q70 46 91 49Q99 52 103 60Q104 62 104 224V385H33V431H104V497L105 564L107 574Q126 639 171 668T266 704Q267 704 275 704T289 705Q330 702 351 679T372 627Q372 604 358 590T321 576T284 590T270 627Q270 647 288 667H284Q280 668 273 668Q245 668 223 647T189 592Q183 572 182 497V431H293V385H185V225Q185 63 186 61T189 57T194 54T199 51T206 49T213 48T222 47T231 47T241 46T251 46H282V0H273Z" transform="translate(1584,0)"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(1890,0)"></path><path data-c="72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z" transform="translate(2390,0)"></path><path data-c="6D" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q351 442 364 440T387 434T406 426T421 417T432 406T441 395T448 384T452 374T455 366L457 361L460 365Q463 369 466 373T475 384T488 397T503 410T523 422T546 432T572 439T603 442Q729 442 740 329Q741 322 741 190V104Q741 66 743 59T754 49Q775 46 803 46H819V0H811L788 1Q764 2 737 2T699 3Q596 3 587 0H579V46H595Q656 46 656 62Q657 64 657 200Q656 335 655 343Q649 371 635 385T611 402T585 404Q540 404 506 370Q479 343 472 315T464 232V168V108Q464 78 465 68T468 55T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(2782,0)"></path></g><g data-mml-node="mo" transform="translate(7698.3,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mn" transform="translate(8087.3,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(8587.3,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(9032,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(9532,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>，<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="19.622ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 8672.9 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(572,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(1016.7,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></g><g data-mml-node="mo" transform="translate(1779.4,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mtext" transform="translate(2835.2,0)"><path data-c="55" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q57 680 180 680Q315 680 324 683H335V637H302Q262 636 251 634T233 622L232 418V291Q232 189 240 145T280 67Q325 24 389 24Q454 24 506 64T571 183Q575 206 575 410V598Q569 608 565 613T541 627T489 637H472V683H481Q496 680 598 680T715 683H724V637H707Q634 633 622 598L621 399Q620 194 617 180Q617 179 615 171Q595 83 531 31T389 -22Q304 -22 226 33T130 192Q129 201 128 412V622Z"></path><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(750,0)"></path><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(1306,0)"></path><path data-c="66" d="M273 0Q255 3 146 3Q43 3 34 0H26V46H42Q70 46 91 49Q99 52 103 60Q104 62 104 224V385H33V431H104V497L105 564L107 574Q126 639 171 668T266 704Q267 704 275 704T289 705Q330 702 351 679T372 627Q372 604 358 590T321 576T284 590T270 627Q270 647 288 667H284Q280 668 273 668Q245 668 223 647T189 592Q183 572 182 497V431H293V385H185V225Q185 63 186 61T189 57T194 54T199 51T206 49T213 48T222 47T231 47T241 46T251 46H282V0H273Z" transform="translate(1584,0)"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(1890,0)"></path><path data-c="72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z" transform="translate(2390,0)"></path><path data-c="6D" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q351 442 364 440T387 434T406 426T421 417T432 406T441 395T448 384T452 374T455 366L457 361L460 365Q463 369 466 373T475 384T488 397T503 410T523 422T546 432T572 439T603 442Q729 442 740 329Q741 322 741 190V104Q741 66 743 59T754 49Q775 46 803 46H819V0H811L788 1Q764 2 737 2T699 3Q596 3 587 0H579V46H595Q656 46 656 62Q657 64 657 200Q656 335 655 343Q649 371 635 385T611 402T585 404Q540 404 506 370Q479 343 472 315T464 232V168V108Q464 78 465 68T468 55T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(2782,0)"></path></g><g data-mml-node="mo" transform="translate(6450.2,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mn" transform="translate(6839.2,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(7339.2,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(7783.9,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(8283.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>构造方程：</p><script type="math/tex; mode=display">G(θ): w_1 F_{θ}(Y-1) + (1-w_1) F_{θ}(Y) = u</script><script type="math/tex; mode=display">H(mb): w_2 F_{mb}(W-1) + (1-w_2) F_{mb}(W) = v</script><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="1.778ex" height="1.645ex" role="img" focusable="false" viewBox="0 -705 786 727"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"></path></g></g></g></svg></mjx-container> 和 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="2.009ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 888 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path></g></g></g></svg></mjx-container> 是关于参数的函数，且由于泊松分布函的单调性，逆函数 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="4.011ex" height="1.937ex" role="img" focusable="false" viewBox="0 -833.9 1772.7 855.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"></path></g><g data-mml-node="TeXAtom" transform="translate(819,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(778,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></g></g></svg></mjx-container> 和 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="4.361ex" height="1.887ex" role="img" focusable="false" viewBox="0 -833.9 1927.5 833.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path></g><g data-mml-node="TeXAtom" transform="translate(973.9,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(778,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g></g></g></svg></mjx-container> 存在</p><h4 id="3-逆解参数，使用-brentq-函数进行二分法求根"><a href="#3-逆解参数，使用-brentq-函数进行二分法求根" class="headerlink" title="3: 逆解参数，使用 brentq 函数进行二分法求根"></a>3: 逆解参数，使用 brentq 函数进行二分法求根</h4><p>从上述方程解出 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.023ex;" xmlns="http://www.w3.org/2000/svg" width="1.061ex" height="1.618ex" role="img" focusable="false" viewBox="0 -705 469 715"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"></path></g></g></g></svg></mjx-container> 和 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="2.957ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 1307 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(878,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container>：</p><script type="math/tex; mode=display">θ = G^{-1}(u), \quad mb = H^{-1}(v)</script><p>推导参数：</p><script type="math/tex; mode=display">b = \frac{H^{-1}(v)}{m}, \quad q = θ - b = G^{-1}(u) - \frac{H^{-1}(v)}{m}</script><p>得到 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.971ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 429 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container> 和 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="1.041ex" height="1.439ex" role="img" focusable="false" viewBox="0 -442 460 636"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g></g></g></svg></mjx-container> 的表达式</p><h4 id="4-验证覆盖率"><a href="#4-验证覆盖率" class="headerlink" title="4: 验证覆盖率"></a>4: 验证覆盖率</h4><ul><li><p>模拟目标：检查构造的置信区间覆盖真实 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="1.041ex" height="1.439ex" role="img" focusable="false" viewBox="0 -442 460 636"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g></g></g></svg></mjx-container> 的概率是否接近 95%</p></li><li><p>步骤：</p></li></ul><p>生成观测数据：从分布生成一对观测值 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.863ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3033.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path></g><g data-mml-node="mo" transform="translate(1152,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(1596.7,0)"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mo" transform="translate(2644.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container></p><p>对于固定 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.863ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3033.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path></g><g data-mml-node="mo" transform="translate(1152,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(1596.7,0)"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mo" transform="translate(2644.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>，生成大量样本（如 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex;" xmlns="http://www.w3.org/2000/svg" width="10.682ex" height="1.731ex" role="img" focusable="false" viewBox="0 -683 4721.6 765"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></g><g data-mml-node="mo" transform="translate(1165.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(2221.6,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1000,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(2000,0)"></path></g></g></g></svg></mjx-container> 个）的 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="26.849ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 11867.3 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(572,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(1016.7,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></g><g data-mml-node="mo" transform="translate(1501.7,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msub" transform="translate(1946.3,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g><g data-mml-node="mo" transform="translate(3098.9,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msub" transform="translate(3543.6,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mn" transform="translate(749,-150) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path></g></g><g data-mml-node="mo" transform="translate(4973.9,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mtext" transform="translate(6029.7,0)"><path data-c="55" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q57 680 180 680Q315 680 324 683H335V637H302Q262 636 251 634T233 622L232 418V291Q232 189 240 145T280 67Q325 24 389 24Q454 24 506 64T571 183Q575 206 575 410V598Q569 608 565 613T541 627T489 637H472V683H481Q496 680 598 680T715 683H724V637H707Q634 633 622 598L621 399Q620 194 617 180Q617 179 615 171Q595 83 531 31T389 -22Q304 -22 226 33T130 192Q129 201 128 412V622Z"></path><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(750,0)"></path><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(1306,0)"></path><path data-c="66" d="M273 0Q255 3 146 3Q43 3 34 0H26V46H42Q70 46 91 49Q99 52 103 60Q104 62 104 224V385H33V431H104V497L105 564L107 574Q126 639 171 668T266 704Q267 704 275 704T289 705Q330 702 351 679T372 627Q372 604 358 590T321 576T284 590T270 627Q270 647 288 667H284Q280 668 273 668Q245 668 223 647T189 592Q183 572 182 497V431H293V385H185V225Q185 63 186 61T189 57T194 54T199 51T206 49T213 48T222 47T231 47T241 46T251 46H282V0H273Z" transform="translate(1584,0)"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(1890,0)"></path><path data-c="72" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z" transform="translate(2390,0)"></path><path data-c="6D" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q351 442 364 440T387 434T406 426T421 417T432 406T441 395T448 384T452 374T455 366L457 361L460 365Q463 369 466 373T475 384T488 397T503 410T523 422T546 432T572 439T603 442Q729 442 740 329Q741 322 741 190V104Q741 66 743 59T754 49Q775 46 803 46H819V0H811L788 1Q764 2 737 2T699 3Q596 3 587 0H579V46H595Q656 46 656 62Q657 64 657 200Q656 335 655 343Q649 371 635 385T611 402T585 404Q540 404 506 370Q479 343 472 315T464 232V168V108Q464 78 465 68T468 55T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(2782,0)"></path></g><g data-mml-node="mo" transform="translate(9644.7,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mn" transform="translate(10033.7,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(10533.7,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(10978.3,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(11478.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container></p><p>计算 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="1.041ex" height="1.439ex" role="img" focusable="false" viewBox="0 -442 460 636"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g></g></g></svg></mjx-container> 的候选值：对于每个样本，计算 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.798ex;" xmlns="http://www.w3.org/2000/svg" width="26.9ex" height="3.301ex" role="img" focusable="false" viewBox="0 -1106.5 11889.8 1459.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="TeXAtom" transform="translate(479,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mtext"><path data-c="63" d="M370 305T349 305T313 320T297 358Q297 381 312 396Q317 401 317 402T307 404Q281 408 258 408Q209 408 178 376Q131 329 131 219Q131 137 162 90Q203 29 272 29Q313 29 338 55T374 117Q376 125 379 127T395 129H409Q415 123 415 120Q415 116 411 104T395 71T366 33T318 2T249 -11Q163 -11 99 53T34 214Q34 318 99 383T250 448T370 421T404 357Q404 334 387 320Z"></path><path data-c="61" d="M137 305T115 305T78 320T63 359Q63 394 97 421T218 448Q291 448 336 416T396 340Q401 326 401 309T402 194V124Q402 76 407 58T428 40Q443 40 448 56T453 109V145H493V106Q492 66 490 59Q481 29 455 12T400 -6T353 12T329 54V58L327 55Q325 52 322 49T314 40T302 29T287 17T269 6T247 -2T221 -8T190 -11Q130 -11 82 20T34 107Q34 128 41 147T68 188T116 225T194 253T304 268H318V290Q318 324 312 340Q290 411 215 411Q197 411 181 410T156 406T148 403Q170 388 170 359Q170 334 154 320ZM126 106Q126 75 150 51T209 26Q247 26 276 49T315 109Q317 116 318 175Q318 233 317 233Q309 233 296 232T251 223T193 203T147 166T126 106Z" transform="translate(444,0)"></path><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(944,0)"></path><path data-c="64" d="M376 495Q376 511 376 535T377 568Q377 613 367 624T316 637H298V660Q298 683 300 683L310 684Q320 685 339 686T376 688Q393 689 413 690T443 693T454 694H457V390Q457 84 458 81Q461 61 472 55T517 46H535V0Q533 0 459 -5T380 -11H373V44L365 37Q307 -11 235 -11Q158 -11 96 50T34 215Q34 315 97 378T244 442Q319 442 376 393V495ZM373 342Q328 405 260 405Q211 405 173 369Q146 341 139 305T131 211Q131 155 138 120T173 59Q203 26 251 26Q322 26 373 103V342Z" transform="translate(1500,0)"></path><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(2056,0)"></path><path data-c="64" d="M376 495Q376 511 376 535T377 568Q377 613 367 624T316 637H298V660Q298 683 300 683L310 684Q320 685 339 686T376 688Q393 689 413 690T443 693T454 694H457V390Q457 84 458 81Q461 61 472 55T517 46H535V0Q533 0 459 -5T380 -11H373V44L365 37Q307 -11 235 -11Q158 -11 96 50T34 215Q34 315 97 378T244 442Q319 442 376 393V495ZM373 342Q328 405 260 405Q211 405 173 369Q146 341 139 305T131 211Q131 155 138 120T173 59Q203 26 251 26Q322 26 373 103V342Z" transform="translate(2334,0)"></path><path data-c="61" d="M137 305T115 305T78 320T63 359Q63 394 97 421T218 448Q291 448 336 416T396 340Q401 326 401 309T402 194V124Q402 76 407 58T428 40Q443 40 448 56T453 109V145H493V106Q492 66 490 59Q481 29 455 12T400 -6T353 12T329 54V58L327 55Q325 52 322 49T314 40T302 29T287 17T269 6T247 -2T221 -8T190 -11Q130 -11 82 20T34 107Q34 128 41 147T68 188T116 225T194 253T304 268H318V290Q318 324 312 340Q290 411 215 411Q197 411 181 410T156 406T148 403Q170 388 170 359Q170 334 154 320ZM126 106Q126 75 150 51T209 26Q247 26 276 49T315 109Q317 116 318 175Q318 233 317 233Q309 233 296 232T251 223T193 203T147 166T126 106Z" transform="translate(2890,0)"></path><path data-c="74" d="M27 422Q80 426 109 478T141 600V615H181V431H316V385H181V241Q182 116 182 100T189 68Q203 29 238 29Q282 29 292 100Q293 108 293 146V181H333V146V134Q333 57 291 17Q264 -10 221 -10Q187 -10 162 2T124 33T105 68T98 100Q97 107 97 248V385H18V422H27Z" transform="translate(3390,0)"></path><path data-c="65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z" transform="translate(3779,0)"></path></g></g></g><g data-mml-node="mo" transform="translate(3792.9,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="msup" transform="translate(4848.7,0)"><g data-mml-node="mi"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"></path></g><g data-mml-node="TeXAtom" transform="translate(819,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(778,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g><g data-mml-node="mo" transform="translate(6621.3,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(7010.3,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(7582.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(8193.6,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mfrac" transform="translate(9193.8,0)"><g data-mml-node="mrow" transform="translate(220,516.8) scale(0.707)"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D43B" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 219 683Q260 681 355 681Q389 681 418 681T463 682T483 682Q499 682 499 672Q499 670 497 658Q492 641 487 638H485Q483 638 480 638T473 638T464 637T455 637Q416 636 405 634T387 623Q384 619 355 500Q348 474 340 442T328 395L324 380Q324 378 469 378H614L615 381Q615 384 646 504Q674 619 674 627T617 637Q594 637 587 639T580 648Q580 650 582 660Q586 677 588 679T604 682Q609 682 646 681T740 680Q802 680 835 681T871 682Q888 682 888 672Q888 645 876 638H874Q872 638 869 638T862 638T853 637T844 637Q805 636 794 634T776 623Q773 618 704 340T634 58Q634 51 638 51Q646 48 692 46H723Q729 38 729 37T726 19Q722 6 716 0H701Q664 2 567 2Q533 2 504 2T458 2T437 1Q420 1 420 10Q420 15 423 24Q428 43 433 45Q437 46 448 46H454Q481 46 514 49Q520 50 522 50T528 55T534 64T540 82T547 110T558 153Q565 181 569 198Q602 330 602 331T457 332H312L279 197Q245 63 245 58Q245 51 253 49T303 46H334Q340 38 340 37T337 19Q333 6 327 0H312Q275 2 178 2Q144 2 115 2T69 2T48 1Q31 1 31 10Q31 12 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"></path></g><g data-mml-node="TeXAtom" transform="translate(973.9,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mn" transform="translate(778,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g></g></g><g data-mml-node="mo" transform="translate(1927.5,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(2316.5,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"></path></g><g data-mml-node="mo" transform="translate(2801.5,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g><g data-mml-node="mi" transform="translate(1037.6,-345) scale(0.707)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><rect width="2456" height="60" x="120" y="220"></rect></g></g></g></svg></mjx-container></p><p>构造置信区间：从 10000 个 q 值中取分位数，得到置信区间 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="11.946ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 5280.2 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="msub" transform="translate(278,0)"><g data-mml-node="mi"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="TeXAtom" transform="translate(479,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(778,0)"></path><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(1278,0)"></path><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z" transform="translate(1778,0)"></path></g></g></g><g data-mml-node="mo" transform="translate(2417.8,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="msub" transform="translate(2862.5,0)"><g data-mml-node="mi"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="TeXAtom" transform="translate(479,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(500,0)"></path><path data-c="39" d="M352 287Q304 211 232 211Q154 211 104 270T44 396Q42 412 42 436V444Q42 537 111 606Q171 666 243 666Q245 666 249 666T257 665H261Q273 665 286 663T323 651T370 619T413 560Q456 472 456 334Q456 194 396 97Q361 41 312 10T208 -22Q147 -22 108 7T68 93T121 149Q143 149 158 135T173 96Q173 78 164 65T148 49T135 44L131 43Q131 41 138 37T164 27T206 22H212Q272 22 313 86Q352 142 352 280V287ZM244 248Q292 248 321 297T351 430Q351 508 343 542Q341 552 337 562T323 588T293 615T246 625Q208 625 181 598Q160 576 154 546T147 441Q147 358 152 329T172 282Q197 248 244 248Z" transform="translate(778,0)"></path><path data-c="37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z" transform="translate(1278,0)"></path><path data-c="35" d="M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z" transform="translate(1778,0)"></path></g></g></g><g data-mml-node="mo" transform="translate(5002.2,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g></g></g></svg></mjx-container></p><p>检查覆盖率：重复步骤 2-5 多次（ <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex;" xmlns="http://www.w3.org/2000/svg" width="11.051ex" height="1.731ex" role="img" focusable="false" viewBox="0 -683 4884.6 765"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z"></path></g><g data-mml-node="mo" transform="translate(1328.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mn" transform="translate(2384.6,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1000,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(1500,0)"></path><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" transform="translate(2000,0)"></path></g></g></g></svg></mjx-container> 次），每次生成新的 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.863ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3033.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path></g><g data-mml-node="mo" transform="translate(1152,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(1596.7,0)"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mo" transform="translate(2644.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>，计算区间覆盖真实 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="1.041ex" height="1.439ex" role="img" focusable="false" viewBox="0 -442 460 636"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g></g></g></svg></mjx-container> 的比例覆盖率 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.781ex;" xmlns="http://www.w3.org/2000/svg" width="9.783ex" height="3.07ex" role="img" focusable="false" viewBox="0 -1011.8 4324.2 1356.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mfrac" transform="translate(1055.8,0)"><g data-mml-node="mtext" transform="translate(220,481.4) scale(0.707)"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">覆</text><text data-variant="normal" transform="translate(1000,0) scale(1,-1)" font-size="884px" font-family="serif">盖</text><text data-variant="normal" transform="translate(2000,0) scale(1,-1)" font-size="884px" font-family="serif">次</text><text data-variant="normal" transform="translate(3000,0) scale(1,-1)" font-size="884px" font-family="serif">数</text></g><g data-mml-node="mi" transform="translate(1262.6,-345) scale(0.707)"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z"></path></g><rect width="3028.4" height="60" x="120" y="220"></rect></g></g></g></svg></mjx-container><br class='item-img' data-src='Pasted%20image%2020251107093229.png'><img src="Pasted%20image%2020251107093229.png" alt=""></p><h4 id="算法实现"><a href="#算法实现" class="headerlink" title="算法实现"></a>算法实现</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">from</span> scipy.stats <span class="hljs-keyword">import</span> poisson, gamma<br><span class="hljs-keyword">from</span> scipy.optimize <span class="hljs-keyword">import</span> brentq<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> seaborn <span class="hljs-keyword">as</span> sns<br><span class="hljs-keyword">from</span> tqdm <span class="hljs-keyword">import</span> tqdm<br><span class="hljs-keyword">import</span> warnings<br>warnings.filterwarnings(<span class="hljs-string">'ignore'</span>)<br><br><br><span class="hljs-comment"># 设置全局字体为 SimHei (黑体) 或其他中文字体</span><br>plt.rcParams[<span class="hljs-string">'font.sans-serif'</span>] = [<span class="hljs-string">'SimHei'</span>]<br>plt.rcParams[<span class="hljs-string">'axes.unicode_minus'</span>] = <span class="hljs-literal">False</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PoissonSignalInference</span>:<br>    <span class="hljs-string">"""</span><br><span class="hljs-string">    基于随机加权IM方法的泊松信号推断类</span><br><span class="hljs-string">    用于估计背景率b、信号率q和尺度参数m</span><br><span class="hljs-string">    """</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, b_true=<span class="hljs-literal">None</span>, q_true=<span class="hljs-literal">None</span>, m_true=<span class="hljs-literal">None</span></span>):<br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        初始化真实参数值</span><br><span class="hljs-string">        """</span><br>        <span class="hljs-variable language_">self</span>.b_true = b_true<br>        <span class="hljs-variable language_">self</span>.q_true = q_true<br>        <span class="hljs-variable language_">self</span>.m_true = m_true<br>        <span class="hljs-variable language_">self</span>.STA_true = b_true + q_true <span class="hljs-keyword">if</span> b_true <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> q_true <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_data</span>(<span class="hljs-params">self, n_samples=<span class="hljs-number">1</span></span>):<br>        <span class="hljs-string">"""</span><br><span class="hljs-string"></span><br><span class="hljs-string">        生成观测数据Y和W</span><br><span class="hljs-string"></span><br><span class="hljs-string">        当前有不可观测的泊松过程 B ∼ Poisson(b) 和 S ∼ Poisson(q)</span><br><span class="hljs-string">        可观测对象有 Y = B + S ∼ Poisson(b + q) 和辅助变量 W ∼ Poisson(m · b)</span><br><span class="hljs-string">        目标是估计参数 b、q 和可能的 m</span><br><span class="hljs-string"></span><br><span class="hljs-string">        """</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.b_true <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> <span class="hljs-variable language_">self</span>.q_true <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> <span class="hljs-variable language_">self</span>.m_true <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"必须先设置真实参数值"</span>)<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.STA_true <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>            <span class="hljs-variable language_">self</span>.STA_true = <span class="hljs-variable language_">self</span>.b_true + <span class="hljs-variable language_">self</span>.q_true<br><br>        Y = np.random.poisson(<span class="hljs-variable language_">self</span>.STA_true, n_samples)<br>        W = np.random.poisson(<span class="hljs-variable language_">self</span>.m_true * <span class="hljs-variable language_">self</span>.b_true, n_samples)<br><br>        <span class="hljs-keyword">return</span> Y, W<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">poisson_cdf</span>(<span class="hljs-params">self, k, theta</span>):<br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        计算泊松分布的累积分布函数</span><br><span class="hljs-string">        """</span><br>        <span class="hljs-keyword">return</span> poisson.cdf(k, theta) <span class="hljs-comment">#泊松分布的CDF公式，参数为 k 和 theta</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">solve_G_inverse</span>(<span class="hljs-params">self, u, Y, w1, bracket_low=<span class="hljs-number">0</span>, bracket_high=<span class="hljs-number">100</span></span>):<br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        求解方程 G(STA) = u 的逆函数，得到STA</span><br><span class="hljs-string">        使用二分法求解 G(STA): w_1 F_{STA}(Y-1) + (1-w_1) F_{STA}(Y) = u</span><br><span class="hljs-string"></span><br><span class="hljs-string">        计算泊松混合分布的累积分布函数值与目标值的差值</span><br><span class="hljs-string"></span><br><span class="hljs-string">        该函数计算一个泊松混合分布的CDF值，该混合分布由两个泊松分布组成，权重分别为w1和(1-w1)，</span><br><span class="hljs-string">        然后减去目标值u，通常用于求解分位数或进行概率计算</span><br><span class="hljs-string">        参数:</span><br><span class="hljs-string">            Y (int or array-like): 观测值，泊松分布的计数变量</span><br><span class="hljs-string">            STA (float or array-like): 泊松分布的参数λ（均值）</span><br><span class="hljs-string">            w1 (float): 第一个泊松分布的权重，取值范围[0,1]</span><br><span class="hljs-string">            u (float): 目标概率值，用于比较或求解</span><br><span class="hljs-string">        返回:</span><br><span class="hljs-string">        """</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">equation</span>(<span class="hljs-params">STA</span>): <span class="hljs-comment">#返回值:(float or array-like): 泊松混合分布的CDF值与目标值u的差值</span><br>            <span class="hljs-keyword">if</span> Y == <span class="hljs-number">0</span>:<br>                <span class="hljs-comment"># 当Y=0时，F_STA(-1)=0，方程简化为F_STA(0)=u</span><br>                <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.poisson_cdf(<span class="hljs-number">0</span>, STA) - u<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">return</span> w1 * <span class="hljs-variable language_">self</span>.poisson_cdf(Y-<span class="hljs-number">1</span>, STA) + (<span class="hljs-number">1</span>-w1) * <span class="hljs-variable language_">self</span>.poisson_cdf(Y, STA) - u<br>                <span class="hljs-comment"># 求加权泊松混合分布</span><br>                <span class="hljs-comment"># 第一项：权重w1乘以P(X &lt;= Y-1)的概率</span><br>                <span class="hljs-comment"># 第二项：权重(1-w1)乘以P(X &lt;= Y)的概率</span><br>                <span class="hljs-comment"># 最后减去目标值u</span><br><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-string">"""</span><br><span class="hljs-string">            使用二分法求解 G(STA) = u 方程中的 STA 值</span><br><span class="hljs-string">            """</span><br>            <span class="hljs-comment"># 设置上下界来初始化搜索区间</span><br>            low = <span class="hljs-built_in">max</span>(<span class="hljs-number">0.00001</span>, bracket_low) <span class="hljs-comment">#bracket_low下界（）</span><br>            high = <span class="hljs-built_in">max</span>(<span class="hljs-number">10</span> * Y, bracket_high) <span class="hljs-keyword">if</span> Y &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> bracket_high <span class="hljs-comment">#bracket_high上界，根据观测值 Y 调整上界</span><br><br>            <span class="hljs-comment"># 检查边界值</span><br>            f_low = equation(low)<br>            f_high = equation(high)<br><br><br>            <span class="hljs-keyword">if</span> f_low * f_high &gt; <span class="hljs-number">0</span>:<br>                <span class="hljs-comment"># 如果 f_low * f_high &gt; 0（同号），则自动扩大搜索区间</span><br>                attempts = <span class="hljs-number">0</span><br>                <span class="hljs-keyword">while</span> f_low * f_high &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> attempts &lt; <span class="hljs-number">10</span>:<br>                    high *= <span class="hljs-number">2</span> <span class="hljs-comment">#最多尝试10次，每次将上界翻倍：high *= 2</span><br>                    f_high = equation(high)<br>                    attempts += <span class="hljs-number">1</span><br><br>            STA_solution = brentq(equation, low, high, xtol=<span class="hljs-number">1e-6</span>)<br>            <span class="hljs-string">"""</span><br><span class="hljs-string">            参数为要求解的方程（加权泊松混合分布），上下区间，精度</span><br><span class="hljs-string">            使用 brentq 函数进行二分法求根</span><br><span class="hljs-string">            求解 w1 * self.poisson_cdf(Y-1, STA) + (1-w1) * self.poisson_cdf(Y, STA) - u = 0</span><br><span class="hljs-string"></span><br><span class="hljs-string">            即求解方程 G(STA) = u</span><br><span class="hljs-string">            得到STA</span><br><span class="hljs-string"></span><br><span class="hljs-string">            """</span><br><br>            <span class="hljs-keyword">return</span> STA_solution <span class="hljs-comment">#返回求解得到的 STA 值</span><br>        <span class="hljs-keyword">except</span> (ValueError, RuntimeError):<br>            <span class="hljs-comment"># 如果求解失败，返回保守估计</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ERR solve_G_inverse 求解失败，返回保守估计"</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(<span class="hljs-number">0.001</span>, Y)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">solve_H_inverse</span>(<span class="hljs-params">self, v, W, w2, m, bracket_low=<span class="hljs-number">0</span>, bracket_high=<span class="hljs-number">100</span></span>):<br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        求解方程 H(mb) = v 的逆函数，得到mb</span><br><span class="hljs-string"></span><br><span class="hljs-string">        H(mb): w_2 F_{mb}(W-1) + (1-w_2) F_{mb}(W) = v</span><br><span class="hljs-string"></span><br><span class="hljs-string">        """</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">equation</span>(<span class="hljs-params">mb</span>):<br>            <span class="hljs-keyword">if</span> W == <span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.poisson_cdf(<span class="hljs-number">0</span>, mb) - v<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">return</span> w2 * <span class="hljs-variable language_">self</span>.poisson_cdf(W-<span class="hljs-number">1</span>, mb) + (<span class="hljs-number">1</span>-w2) * <span class="hljs-variable language_">self</span>.poisson_cdf(W, mb) - v<br><br>        <span class="hljs-keyword">try</span>:<br>            low = <span class="hljs-built_in">max</span>(<span class="hljs-number">0.001</span>, bracket_low)<br>            high = <span class="hljs-built_in">max</span>(<span class="hljs-number">10</span> * W, bracket_high) <span class="hljs-keyword">if</span> W &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> bracket_high<br><br>            f_low = equation(low)<br>            f_high = equation(high)<br><br>            <span class="hljs-keyword">if</span> f_low * f_high &gt; <span class="hljs-number">0</span>:<br>                attempts = <span class="hljs-number">0</span><br>                <span class="hljs-keyword">while</span> f_low * f_high &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> attempts &lt; <span class="hljs-number">10</span>:<br>                    high *= <span class="hljs-number">2</span><br>                    f_high = equation(high)<br>                    attempts += <span class="hljs-number">1</span><br><br>            mb_solution = brentq(equation, low, high, xtol=<span class="hljs-number">1e-6</span>)<br>            <span class="hljs-keyword">return</span> mb_solution<br>        <span class="hljs-keyword">except</span> (ValueError, RuntimeError):<br>            <span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(<span class="hljs-number">0.001</span>, W)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">estimate_parameters_IM</span>(<span class="hljs-params">self, Y_obs, W_obs, m_known=<span class="hljs-literal">True</span>, n_inner_samples=<span class="hljs-number">10000</span></span>):<br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        使用随机加权IM方法估计三个参数q、b和STA</span><br><span class="hljs-string">        Y_obs：观测值Y</span><br><span class="hljs-string">        W_obs：观测值W</span><br><span class="hljs-string">        m_known：一个布尔值，表示参数m是否已知</span><br><span class="hljs-string">        n_inner_samples：内部采样次数，默认为10000</span><br><span class="hljs-string"></span><br><span class="hljs-string">        """</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> m_known:<br>            <span class="hljs-keyword">raise</span> NotImplementedError(<span class="hljs-string">"m未知"</span>)<br><br>        <span class="hljs-comment"># 创建三个列表存储候选参数值</span><br>        q_candidates = []<br>        b_candidates = []<br>        STA_candidates = []<br><br>        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n_inner_samples):<br>            <span class="hljs-comment"># 生成4个均匀分布的随机权重（u, v, w1, w2）</span><br>            u = np.random.uniform(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)<br>            v = np.random.uniform(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)<br>            w1 = np.random.uniform(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)<br>            w2 = np.random.uniform(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)<br><br>            <span class="hljs-comment"># 使用solve_G_inverse和solve_H_inverse方法计算STA和mb的估计值</span><br>            STA_est = <span class="hljs-variable language_">self</span>.solve_G_inverse(u, Y_obs, w1)<br>            mb_est = <span class="hljs-variable language_">self</span>.solve_H_inverse(v, W_obs, w2, <span class="hljs-variable language_">self</span>.m_true)<br>            <span class="hljs-comment"># G(STA): w_1 F_{STA}(Y-1) + (1-w_1) F_{STA}(Y) = u ==&gt; 求解STA</span><br>            <span class="hljs-comment"># H(mb): w_2 F_{mb}(W-1) + (1-w_2) F_{mb}(W) = v ==&gt; 求解mb</span><br>            <span class="hljs-comment"># 可以得到</span><br>            <span class="hljs-comment"># STA = G⁻¹(u), mb = H⁻¹(v)</span><br>            <span class="hljs-comment"># 计算b和q</span><br>            <span class="hljs-comment"># b = H⁻¹(v)/m</span><br>            <span class="hljs-comment"># q = STA - b = G⁻¹(u) - H⁻¹(v)/m</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-variable language_">self</span>.m_true <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>                <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"参数 m_true 未设置，无法计算 b_est"</span>)<br>            b_est = mb_est / <span class="hljs-variable language_">self</span>.m_true<br>            q_est = STA_est - b_est<br><br>            <span class="hljs-comment"># 确保非负</span><br>            q_est = <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, q_est)<br>            b_est = <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, b_est)<br><br>            <span class="hljs-comment">#每次计算出新的 q_est 值后，会将其添加到 q_candidates 列表中</span><br>            q_candidates.append(q_est)<br>            b_candidates.append(b_est)<br>            STA_candidates.append(STA_est)<br><br>        <span class="hljs-keyword">return</span> {<br>            <span class="hljs-string">'q_candidates'</span>: np.array(q_candidates),<br>            <span class="hljs-string">'b_candidates'</span>: np.array(b_candidates),<br>            <span class="hljs-string">'STA_candidates'</span>: np.array(STA_candidates)<br>        }<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_confidence_intervals</span>(<span class="hljs-params">self, candidates_dict, alpha=<span class="hljs-number">0.05</span></span>):<br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        计算参数的置信区间</span><br><span class="hljs-string">        """</span><br>        intervals = {}<br><br>        <span class="hljs-keyword">for</span> param, values <span class="hljs-keyword">in</span> candidates_dict.items():<br>            <span class="hljs-comment"># 移除'_candidates'后缀，使键名简化</span><br>            simple_param = param.replace(<span class="hljs-string">'_candidates'</span>, <span class="hljs-string">''</span>)<br>            lower = np.quantile(values, alpha/<span class="hljs-number">2</span>)<br>            upper = np.quantile(values, <span class="hljs-number">1</span> - alpha/<span class="hljs-number">2</span>)<br>            intervals[simple_param] = (lower, upper)<br><br>        <span class="hljs-keyword">return</span> intervals<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">coverage_simulation</span>(<span class="hljs-params">self, n_outer_trials=<span class="hljs-number">1000</span>, n_inner_samples=<span class="hljs-number">1000</span>, alpha=<span class="hljs-number">0.05</span></span>):<br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        进行覆盖率模拟验证</span><br><span class="hljs-string">        """</span><br>        coverage_results = {<br>            <span class="hljs-string">'q'</span>: <span class="hljs-number">0.0</span>,<br>            <span class="hljs-string">'b'</span>: <span class="hljs-number">0.0</span>,<br>            <span class="hljs-string">'STA'</span>: <span class="hljs-number">0.0</span><br>        }<br><br>        interval_lengths = {<br>            <span class="hljs-string">'q'</span>: [],<br>            <span class="hljs-string">'b'</span>: [],<br>            <span class="hljs-string">'STA'</span>: []<br>        }<br><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">"正在进行覆盖率模拟..."</span>)<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> tqdm(<span class="hljs-built_in">range</span>(n_outer_trials)):<br>            <span class="hljs-comment"># 生成新的观测数据</span><br>            Y_obs, W_obs = <span class="hljs-variable language_">self</span>.generate_data(<span class="hljs-number">1</span>)<br>            Y_obs, W_obs = Y_obs[<span class="hljs-number">0</span>], W_obs[<span class="hljs-number">0</span>]<br><br>            <span class="hljs-comment"># 估计参数</span><br>            candidates_dict = <span class="hljs-variable language_">self</span>.estimate_parameters_IM(Y_obs, W_obs,<br>                                                         n_inner_samples=n_inner_samples)<br><br>            <span class="hljs-comment"># 计算置信区间</span><br>            intervals = <span class="hljs-variable language_">self</span>.calculate_confidence_intervals(candidates_dict, alpha)<br><br>            <span class="hljs-comment"># 检查覆盖率</span><br>            <span class="hljs-keyword">if</span> intervals[<span class="hljs-string">'q'</span>][<span class="hljs-number">0</span>] &lt;= <span class="hljs-variable language_">self</span>.q_true &lt;= intervals[<span class="hljs-string">'q'</span>][<span class="hljs-number">1</span>]:<br>                coverage_results[<span class="hljs-string">'q'</span>] += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> intervals[<span class="hljs-string">'b'</span>][<span class="hljs-number">0</span>] &lt;= <span class="hljs-variable language_">self</span>.b_true &lt;= intervals[<span class="hljs-string">'b'</span>][<span class="hljs-number">1</span>]:<br>                coverage_results[<span class="hljs-string">'b'</span>] += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> intervals[<span class="hljs-string">'STA'</span>][<span class="hljs-number">0</span>] &lt;= <span class="hljs-variable language_">self</span>.STA_true &lt;= intervals[<span class="hljs-string">'STA'</span>][<span class="hljs-number">1</span>]:<br>                coverage_results[<span class="hljs-string">'STA'</span>] += <span class="hljs-number">1</span><br><br>            <span class="hljs-comment"># 记录区间长度</span><br>            interval_lengths[<span class="hljs-string">'q'</span>].append(intervals[<span class="hljs-string">'q'</span>][<span class="hljs-number">1</span>] - intervals[<span class="hljs-string">'q'</span>][<span class="hljs-number">0</span>])<br>            interval_lengths[<span class="hljs-string">'b'</span>].append(intervals[<span class="hljs-string">'b'</span>][<span class="hljs-number">1</span>] - intervals[<span class="hljs-string">'b'</span>][<span class="hljs-number">0</span>])<br>            interval_lengths[<span class="hljs-string">'STA'</span>].append(intervals[<span class="hljs-string">'STA'</span>][<span class="hljs-number">1</span>] - intervals[<span class="hljs-string">'STA'</span>][<span class="hljs-number">0</span>])<br><br>        <span class="hljs-comment"># 计算覆盖率</span><br>        <span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> coverage_results:<br>            coverage_results[param] = coverage_results[param] / n_outer_trials<br><br>        <span class="hljs-keyword">return</span> coverage_results, interval_lengths<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">plot_results</span>(<span class="hljs-params">self, candidates_dict, intervals, Y_obs, W_obs</span>):<br>        <span class="hljs-string">"""</span><br><span class="hljs-string">        可视化结果</span><br><span class="hljs-string">        """</span><br>        fig, axes = plt.subplots(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">10</span>))<br><br>        <span class="hljs-comment"># q的分布</span><br>        axes[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>].hist(candidates_dict[<span class="hljs-string">'q_candidates'</span>], bins=<span class="hljs-number">50</span>, alpha=<span class="hljs-number">0.7</span>, density=<span class="hljs-literal">True</span>)<br>        axes[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>].axvline(<span class="hljs-variable language_">self</span>.q_true, color=<span class="hljs-string">'red'</span>, linestyle=<span class="hljs-string">'--'</span>, linewidth=<span class="hljs-number">2</span>, label=<span class="hljs-string">f'真实 q = <span class="hljs-subst">{self.q_true}</span>'</span>)<br>        axes[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>].axvline(intervals[<span class="hljs-string">'q'</span>][<span class="hljs-number">0</span>], color=<span class="hljs-string">'green'</span>, linestyle=<span class="hljs-string">'--'</span>, linewidth=<span class="hljs-number">1</span>, label=<span class="hljs-string">f'<span class="hljs-subst">{<span class="hljs-number">100</span>*(<span class="hljs-number">1</span>-<span class="hljs-number">0.05</span>)}</span>% CI'</span>)<br>        axes[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>].axvline(intervals[<span class="hljs-string">'q'</span>][<span class="hljs-number">1</span>], color=<span class="hljs-string">'green'</span>, linestyle=<span class="hljs-string">'--'</span>, linewidth=<span class="hljs-number">1</span>)<br>        axes[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>].set_xlabel(<span class="hljs-string">'q'</span>)<br>        axes[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>].set_ylabel(<span class="hljs-string">'密度'</span>)<br>        axes[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>].set_title(<span class="hljs-string">'q的后验分布'</span>)<br>        axes[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>].legend()<br><br>        <span class="hljs-comment"># b的分布</span><br>        axes[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>].hist(candidates_dict[<span class="hljs-string">'b_candidates'</span>], bins=<span class="hljs-number">50</span>, alpha=<span class="hljs-number">0.7</span>, density=<span class="hljs-literal">True</span>)<br>        axes[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>].axvline(<span class="hljs-variable language_">self</span>.b_true, color=<span class="hljs-string">'red'</span>, linestyle=<span class="hljs-string">'--'</span>, linewidth=<span class="hljs-number">2</span>, label=<span class="hljs-string">f'真实 b = <span class="hljs-subst">{self.b_true}</span>'</span>)<br>        axes[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>].axvline(intervals[<span class="hljs-string">'b'</span>][<span class="hljs-number">0</span>], color=<span class="hljs-string">'green'</span>, linestyle=<span class="hljs-string">'--'</span>, linewidth=<span class="hljs-number">1</span>, label=<span class="hljs-string">f'<span class="hljs-subst">{<span class="hljs-number">100</span>*(<span class="hljs-number">1</span>-<span class="hljs-number">0.05</span>)}</span>% CI'</span>)<br>        axes[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>].axvline(intervals[<span class="hljs-string">'b'</span>][<span class="hljs-number">1</span>], color=<span class="hljs-string">'green'</span>, linestyle=<span class="hljs-string">'--'</span>, linewidth=<span class="hljs-number">1</span>)<br>        axes[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>].set_xlabel(<span class="hljs-string">'b'</span>)<br>        axes[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>].set_ylabel(<span class="hljs-string">'密度'</span>)<br>        axes[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>].set_title(<span class="hljs-string">'b的后验分布'</span>)<br>        axes[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>].legend()<br><br>        <span class="hljs-comment"># STA的分布</span><br>        axes[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>].hist(candidates_dict[<span class="hljs-string">'STA_candidates'</span>], bins=<span class="hljs-number">50</span>, alpha=<span class="hljs-number">0.7</span>, density=<span class="hljs-literal">True</span>)<br>        axes[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>].axvline(<span class="hljs-variable language_">self</span>.STA_true, color=<span class="hljs-string">'red'</span>, linestyle=<span class="hljs-string">'--'</span>, linewidth=<span class="hljs-number">2</span>, label=<span class="hljs-string">f'真实 STA = <span class="hljs-subst">{self.STA_true}</span>'</span>)<br>        axes[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>].axvline(intervals[<span class="hljs-string">'STA'</span>][<span class="hljs-number">0</span>], color=<span class="hljs-string">'green'</span>, linestyle=<span class="hljs-string">'--'</span>, linewidth=<span class="hljs-number">1</span>, label=<span class="hljs-string">f'<span class="hljs-subst">{<span class="hljs-number">100</span>*(<span class="hljs-number">1</span>-<span class="hljs-number">0.05</span>)}</span>% CI'</span>)<br>        axes[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>].axvline(intervals[<span class="hljs-string">'STA'</span>][<span class="hljs-number">1</span>], color=<span class="hljs-string">'green'</span>, linestyle=<span class="hljs-string">'--'</span>, linewidth=<span class="hljs-number">1</span>)<br>        axes[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>].set_xlabel(<span class="hljs-string">'STA'</span>)<br>        axes[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>].set_ylabel(<span class="hljs-string">'密度'</span>)<br>        axes[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>].set_title(<span class="hljs-string">'STA的后验分布'</span>)<br>        axes[<span class="hljs-number">1</span>, <span class="hljs-number">0</span>].legend()<br><br>        <span class="hljs-comment"># 观测数据信息</span><br>        axes[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>].axis(<span class="hljs-string">'off'</span>)<br>        text_str = <span class="hljs-string">f'观测数据:\nY = <span class="hljs-subst">{Y_obs}</span>\nW = <span class="hljs-subst">{W_obs}</span>\n\n真实参数:\nb = <span class="hljs-subst">{self.b_true}</span>\nq = <span class="hljs-subst">{self.q_true}</span>\nm = <span class="hljs-subst">{self.m_true}</span>\nSTA = <span class="hljs-subst">{self.STA_true}</span>'</span><br>        axes[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>].text(<span class="hljs-number">0.1</span>, <span class="hljs-number">0.9</span>, text_str, transform=axes[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>].transAxes, fontsize=<span class="hljs-number">12</span>,<br>                    verticalalignment=<span class="hljs-string">'top'</span>, bbox=<span class="hljs-built_in">dict</span>(boxstyle=<span class="hljs-string">'round'</span>, facecolor=<span class="hljs-string">'wheat'</span>, alpha=<span class="hljs-number">0.5</span>))<br><br>        plt.tight_layout()<br>        plt.show()<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-string">"""</span><br><span class="hljs-string">    主函数：演示完整的推断流程</span><br><span class="hljs-string">    """</span><br>    <span class="hljs-comment"># 设置真实参数</span><br>    b_true = <span class="hljs-number">3.0</span>  <span class="hljs-comment"># b</span><br>    q_true = <span class="hljs-number">2.0</span>  <span class="hljs-comment"># q</span><br>    m_true = <span class="hljs-number">0.8</span>  <span class="hljs-comment"># 尺度参数（已知）</span><br>    STA_true = b_true + q_true<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">"=== 泊松推断演示 ==="</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"真实参数: b=<span class="hljs-subst">{b_true}</span>, q=<span class="hljs-subst">{q_true}</span>, m=<span class="hljs-subst">{m_true}</span>, STA=<span class="hljs-subst">{STA_true}</span>"</span>)<br><br>    <span class="hljs-comment"># 初始化推断器</span><br>    inference = PoissonSignalInference(b_true, q_true, m_true)<br><br>    <span class="hljs-comment"># 生成单次观测数据</span><br>    Y_obs, W_obs = inference.generate_data(<span class="hljs-number">1</span>)<br>    Y_obs, W_obs = Y_obs[<span class="hljs-number">0</span>], W_obs[<span class="hljs-number">0</span>]<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n生成的观测数据: Y=<span class="hljs-subst">{Y_obs}</span>, W=<span class="hljs-subst">{W_obs}</span>"</span>)<br><br>    <span class="hljs-comment"># 使用IM方法进行参数估计</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n正在进行参数估计..."</span>)<br>    candidates_dict = inference.estimate_parameters_IM(Y_obs, W_obs, n_inner_samples=<span class="hljs-number">10000</span>)<br><br>    <span class="hljs-comment"># 计算置信区间</span><br>    alpha = <span class="hljs-number">0.05</span>  <span class="hljs-comment"># 0.95置信区间</span><br>    intervals = inference.calculate_confidence_intervals(candidates_dict, alpha)<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== 估计结果 ==="</span>)<br>    <span class="hljs-keyword">for</span> param, (lower, upper) <span class="hljs-keyword">in</span> intervals.items():<br>        true_value = <span class="hljs-built_in">getattr</span>(inference, <span class="hljs-string">f"<span class="hljs-subst">{param.replace(<span class="hljs-string">'_candidates'</span>, <span class="hljs-string">''</span>)}</span>_true"</span>, <span class="hljs-literal">None</span>)<br>        <span class="hljs-keyword">if</span> true_value <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{param}</span>: [<span class="hljs-subst">{lower:<span class="hljs-number">.3</span>f}</span>, <span class="hljs-subst">{upper:<span class="hljs-number">.3</span>f}</span>] (真实值: <span class="hljs-subst">{true_value:<span class="hljs-number">.3</span>f}</span>)"</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{param}</span>: [<span class="hljs-subst">{lower:<span class="hljs-number">.3</span>f}</span>, <span class="hljs-subst">{upper:<span class="hljs-number">.3</span>f}</span>]"</span>)<br><br>    <span class="hljs-comment"># 可视化结果</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n生成可视化图表..."</span>)<br>    inference.plot_results(candidates_dict, intervals, Y_obs, W_obs)<br><br>    <span class="hljs-comment"># 进行覆盖率模拟（样本量较小以加快演示速度）</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n正在进行覆盖率模拟..."</span>)<br>    coverage_results, interval_lengths = inference.coverage_simulation(<br>        n_outer_trials=<span class="hljs-number">500</span>,  <span class="hljs-comment"># 减少试验次数以加快演示</span><br>        n_inner_samples=<span class="hljs-number">1000</span>,  <span class="hljs-comment"># 减少内部样本数</span><br>        alpha=<span class="hljs-number">0.05</span><br>    )<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== 覆盖率结果 ==="</span>)<br>    <span class="hljs-keyword">for</span> param, coverage <span class="hljs-keyword">in</span> coverage_results.items():<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{param}</span>的覆盖率: <span class="hljs-subst">{coverage:<span class="hljs-number">.3</span>f}</span> (目标: <span class="hljs-subst">{<span class="hljs-number">1</span>-alpha:<span class="hljs-number">.3</span>f}</span>)"</span>)<br><br>    <span class="hljs-comment"># 绘制区间长度分布</span><br>    plt.figure(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">4</span>))<br>    <span class="hljs-keyword">for</span> i, (param, lengths) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(interval_lengths.items()):<br>        plt.subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, i+<span class="hljs-number">1</span>)<br>        plt.hist(lengths, bins=<span class="hljs-number">30</span>, alpha=<span class="hljs-number">0.7</span>)<br>        plt.xlabel(<span class="hljs-string">f'<span class="hljs-subst">{param}</span>区间长度'</span>)<br>        plt.ylabel(<span class="hljs-string">'频数'</span>)<br>        plt.title(<span class="hljs-string">f'<span class="hljs-subst">{param}</span>置信区间长度分布'</span>)<br>    plt.tight_layout()<br>    plt.show()<br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:<br>    main()<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;基于随机加权推断模型（IM）的参数估计方法&quot;&gt;&lt;a href=&quot;#基于随机加权推断模型（IM）的参数估计方法&quot; class=&quot;headerlink&quot; title=&quot;基于随机加权推断模型（IM）的参数估计方法&quot;&gt;&lt;/a&gt;基于随机加权推断模型（IM）的参数估计方法&lt;/</summary>
      
    
    
    
    <category term="归档" scheme="https://zhongye1.github.io/Arknight-notes/categories/%E5%BD%92%E6%A1%A3/"/>
    
    
    <category term="日志" scheme="https://zhongye1.github.io/Arknight-notes/tags/%E6%97%A5%E5%BF%97/"/>
    
  </entry>
  
  <entry>
    <title>2025-11-04-JavaScript 常用方法速查</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/36778.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/36778.html</id>
    <published>2025-11-04T07:29:35.000Z</published>
    <updated>2025-11-17T02:26:53.983Z</updated>
    
    <content type="html"><![CDATA[<p>JavaScript 常用方法速查</p><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><div class="table-container"><table><thead><tr><th><strong>方法</strong></th><th><strong>说明</strong></th><th><strong>示例</strong></th><th><strong>返回值/副作用</strong></th></tr></thead><tbody><tr><td><code>push(...items)</code></td><td>末尾添加元素</td><td><code>arr.push(4)</code> → 修改原数组</td><td>返回新数组长度</td></tr><tr><td><code>pop()</code></td><td>删除末尾元素</td><td><code>arr.pop()</code> → 修改原数组</td><td>返回被删除元素</td></tr><tr><td><code>unshift(...items)</code></td><td>开头添加元素</td><td><code>arr.unshift(0)</code> → 修改原数组</td><td>返回新数组长度</td></tr><tr><td><code>shift()</code></td><td>删除开头元素</td><td><code>arr.shift()</code> → 修改原数组</td><td>返回被删除元素</td></tr><tr><td><code>slice(start, end)</code></td><td>截取数组片段（不修改原数组）</td><td><code>arr.slice(1, 3)</code></td><td>返回新数组</td></tr><tr><td><code>splice(start, deleteCount, ...items)</code></td><td>删除/替换元素</td><td><code>arr.splice(1, 2, 'a')</code> → 修改原数组</td><td>返回被删除元素组成的数组</td></tr><tr><td><code>map(callback)</code></td><td>遍历并返回新数组</td><td><code>[1,2,3].map(x =&gt; x*2)</code> → <code>[2,4,6]</code></td><td>新数组</td></tr><tr><td><code>filter(callback)</code></td><td>过滤符合条件的元素</td><td><code>[1,2,3].filter(x =&gt; x&gt;1)</code> → <code>[2,3]</code></td><td>新数组</td></tr><tr><td><code>reduce(callback, initialValue)</code></td><td>累计计算（如求和、统计）</td><td><code>[1,2,3].reduce((sum, x) =&gt; sum + x, 0)</code> → <code>6</code></td><td>最终累计值</td></tr><tr><td><code>find(callback)</code></td><td>查找第一个符合条件的元素</td><td><code>[1,2,3].find(x =&gt; x&gt;1)</code> → <code>2</code></td><td>元素或  <code>undefined</code></td></tr><tr><td><code>findIndex(callback)</code></td><td>查找第一个符合条件的索引</td><td><code>[1,2,3].findIndex(x =&gt; x&gt;1)</code> → <code>1</code></td><td>索引或  <code>-1</code></td></tr><tr><td><code>includes(value)</code></td><td>判断是否包含某元素（ES6）</td><td><code>[1,2,3].includes(2)</code> → <code>true</code></td><td>布尔值</td></tr><tr><td><code>flat(depth)</code></td><td>扁平化嵌套数组（ES2019）</td><td><code>[1, [2]].flat()</code> → <code>[1, 2]</code></td><td>新数组</td></tr></tbody></table></div><h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><div class="table-container"><table><thead><tr><th><strong>方法</strong></th><th><strong>说明</strong></th><th><strong>示例</strong></th><th><strong>返回值</strong></th></tr></thead><tbody><tr><td><code>split(separator)</code></td><td>按分隔符拆分为数组</td><td><code>"a,b,c".split(",")</code> → <code>["a", "b", "c"]</code></td><td>数组</td></tr><tr><td><code>substring(start, end)</code></td><td>截取子字符串（不包含  <code>end</code>  索引）</td><td><code>"Hello".substring(1, 3)</code> → <code>"el"</code></td><td>新字符串</td></tr><tr><td><code>slice(start, end)</code></td><td>截取子字符串（支持负数索引）</td><td><code>"Hello".slice(-3)</code> → <code>"llo"</code></td><td>新字符串</td></tr><tr><td><code>replace(searchValue, newValue)</code></td><td>替换匹配内容（支持正则表达式）</td><td><code>"abc".replace("a", "A")</code> → <code>"Abc"</code></td><td>新字符串</td></tr><tr><td><code>toUpperCase()</code></td><td>转为大写</td><td><code>"hello".toUpperCase()</code> → <code>"HELLO"</code></td><td>新字符串</td></tr><tr><td><code>toLowerCase()</code></td><td>转为小写</td><td><code>"HELLO".toLowerCase()</code> → <code>"hello"</code></td><td>新字符串</td></tr><tr><td><code>trim()</code></td><td>去除首尾空格（ES5）</td><td><code>" hello ".trim()</code> → <code>"hello"</code></td><td>新字符串</td></tr><tr><td><code>startsWith(str)</code></td><td>判断是否以某字符串开头（ES6）</td><td><code>"hello".startsWith("he")</code> → <code>true</code></td><td>布尔值</td></tr><tr><td><code>endsWith(str)</code></td><td>判断是否以某字符串结尾（ES6）</td><td><code>"hello".endsWith("lo")</code> → <code>true</code></td><td>布尔值</td></tr><tr><td><code>padStart(length, padStr)</code></td><td>头部填充字符串（ES2017）</td><td><code>"5".padStart(3, "0")</code> → <code>"005"</code></td><td>新字符串</td></tr></tbody></table></div><h3 id="对象方法"><a href="#对象方法" class="headerlink" title="对象方法"></a>对象方法</h3><div class="table-container"><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>Object.assign()</td><td>方法用于将所有可枚举属性的值从一个或多个源对象复制到目标对象。它将返回目标对象。</td></tr><tr><td>Object.create()</td><td>方法创建一个新对象，使用现有的对象来提供新创建的对象的<strong>proto</strong>。</td></tr><tr><td>Object.defineProperties()</td><td>方法直接在一个对象上定义新的属性或修改现有属性，并返回该对象。</td></tr><tr><td>Object.defineProperty()</td><td>方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性，并返回此对象。</td></tr><tr><td>Object.entries()</td><td>方法返回一个给定对象自身可枚举属性的键值对数组，其排列与使用 for…in 循环遍历该对象时返回的顺序一致。</td></tr><tr><td>Object.freeze()</td><td>方法可以冻结一个对象。</td></tr><tr><td>Object.fromEntries()</td><td>方法把键值对列表转换为一个对象。</td></tr><tr><td>Object.getOwnPropertyDescriptor()</td><td>方法返回指定对象上一个自有属性对应的属性描述符。</td></tr><tr><td>Object.getOwnPropertyDescriptors()</td><td>方法用来获取一个对象的所有自身属性的描述符。</td></tr><tr><td>Object.getOwnPropertyNames()</td><td>方法返回一个由指定对象的所有自身属性的属性名（包括不可枚举属性但不包括 Symbol 值作为名称的属性）组成的数组。</td></tr><tr><td>Object.getOwnPropertySymbols()</td><td>方法返回一个给定对象自身的所有 Symbol 属性的数组。</td></tr><tr><td>Object.getPrototypeOf()</td><td>方法返回指定对象的原型（内部[[Prototype]]属性的值）。</td></tr><tr><td>Object.is()</td><td>方法判断两个值是否为同一个值。</td></tr><tr><td>Object.isExtensible()</td><td>方法判断一个对象是否是可扩展的（是否可以在它上面添加新的属性）。</td></tr><tr><td>Object.isFrozen()</td><td>方法判断一个对象是否被冻结。</td></tr><tr><td>Object.preventExtensions()</td><td>方法让一个对象变的不可扩展，也就是永远不能再添加新的属性。</td></tr><tr><td>Object.isSealed()</td><td>方法判断一个对象是否被密封。</td></tr><tr><td>Object.keys()</td><td>方法会返回一个由一个给定对象的自身可枚举属性组成的数组，数组中属性名的排列顺序和正常循环遍历该对象时返回的顺序一致 。</td></tr><tr><td>Object.setPrototypeOf()</td><td>方法设置一个指定的对象的原型到另一个对象。</td></tr><tr><td>Object.values()</td><td>方法返回一个给定对象自身的所有可枚举属性值的数组。</td></tr><tr><td>Object.seal()</td><td>方法封闭一个对象，阻止添加新属性并将所有现有属性标记为不可配置。</td></tr></tbody></table></div><h3 id="Number-方法"><a href="#Number-方法" class="headerlink" title="Number 方法"></a>Number 方法</h3><p>Number 对象本身有一些静态属性和方法，而 Number 实例的方法是通过 Number.prototype 定义的，但通常我们使用数字字面量时可以直接调用这些方法（因为 JavaScript 会自动装箱）</p><div class="table-container"><table><thead><tr><th>名称</th><th>描述</th></tr></thead><tbody><tr><td>constructor</td><td>返回对创建此对象的 Number 函数的引用。</td></tr><tr><td>isFinite()</td><td>检查值是否是有限数。</td></tr><tr><td>isInteger()</td><td>检查值是否为整数。</td></tr><tr><td>isNaN()</td><td>检查值是否为 Number.NaN。</td></tr><tr><td>parseFloat()</td><td>检查值是否为整数。</td></tr><tr><td>parseInt()</td><td>检查值是否为整数。</td></tr><tr><td>prototype</td><td>允许您向对象添加属性和方法。</td></tr><tr><td>toFixed(x)</td><td>把数字转换为字符串，结果的小数点后有指定位数的数字。</td></tr><tr><td>toPrecision(x)</td><td>把数字格式化为指定的长度。</td></tr><tr><td>toString()</td><td>把数字转换为字符串。</td></tr><tr><td>valueOf()​</td><td>返回数字的原始值（基本数字值）。</td></tr></tbody></table></div><h3 id="Math-方法"><a href="#Math-方法" class="headerlink" title="Math 方法"></a>Math 方法</h3><p>Math 对象是一个静态对象，它包含了许多数学常数和函数。</p><div class="table-container"><table><thead><tr><th>方法名</th><th>描述</th></tr></thead><tbody><tr><td>Math.abs(x)</td><td>返回一个数的绝对值。</td></tr><tr><td>Math.ceil(x)</td><td>返回大于或等于一个数的最小整数（向上取整）。</td></tr><tr><td>Math.floor(x)</td><td>返回小于或等于一个数的最大整数（向下取整）。</td></tr><tr><td>Math.round(x)</td><td>返回一个数四舍五入后的整数。</td></tr><tr><td>Math.max([value1[, value2[, …]]])</td><td>返回一组数中的最大值。</td></tr><tr><td>Math.min([value1[, value2[, …]]])</td><td>返回一组数中的最小值。</td></tr><tr><td>Math.pow(x, y)</td><td>返回 x 的 y 次幂。</td></tr><tr><td>Math.sqrt(x)</td><td>返回一个数的平方根。</td></tr><tr><td>Math.random()</td><td>返回一个 0 到 1 之间的伪随机数。</td></tr><tr><td>Math.sin(x)</td><td>返回一个数的正弦值。</td></tr><tr><td>Math.cos(x)</td><td>返回一个数的余弦值。</td></tr><tr><td>Math.tan(x)</td><td>返回一个数的正切值。</td></tr><tr><td>Math.log(x)</td><td>返回一个数的自然对数。</td></tr><tr><td>Math.exp(x)</td><td>返回 e 的 x 次幂。</td></tr></tbody></table></div><h3 id="Date-对象方法"><a href="#Date-对象方法" class="headerlink" title="Date 对象方法"></a>Date 对象方法</h3><p>Date 对象用于处理日期和时间</p><h5 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h5><div class="table-container"><table><thead><tr><th>方法名</th><th>描述</th></tr></thead><tbody><tr><td>Date.now()</td><td>返回自 1970 年 1 月 1 日 00:00:00 UTC 到当前时间的毫秒数。</td></tr><tr><td>Date.parse(dateString)</td><td>解析一个表示日期的字符串，并返回从 1970-1-1 00:00:00 UTC 所经过的毫秒数。</td></tr><tr><td>Date.UTC(year, month[, day[, hour[, minute[, second[, millisecond]]]]])</td><td>接受和构造函数最长形式的参数相同的参数，并返回从 1970-1-1 00:00:00 UTC 所经过的毫秒数。</td></tr></tbody></table></div><h5 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h5><div class="table-container"><table><thead><tr><th>方法名</th><th>描述</th></tr></thead><tbody><tr><td>getFullYear()</td><td>根据本地时间返回指定日期对象的年份。</td></tr><tr><td>getMonth()</td><td>根据本地时间返回指定日期对象的月份（0-11）。</td></tr><tr><td>getDate()</td><td>根据本地时间返回指定日期对象的日期（1-31）。</td></tr><tr><td>getDay()</td><td>根据本地时间返回指定日期对象的星期（0-6）。</td></tr><tr><td>getHours()</td><td>根据本地时间返回指定日期对象的小时（0-23）。</td></tr><tr><td>getMinutes()</td><td>根据本地时间返回指定日期对象的分钟（0-59）。</td></tr><tr><td>getSeconds()</td><td>根据本地时间返回指定日期对象的秒数（0-59）。</td></tr><tr><td>getMilliseconds()</td><td>根据本地时间返回指定日期对象的毫秒数。</td></tr><tr><td>getTime()</td><td>返回从 1970-1-1 00:00:00 UTC 到该日期经过的毫秒数。</td></tr><tr><td>setFullYear(year, [month], [day])</td><td>根据本地时间设置指定日期对象的年份。</td></tr><tr><td>setMonth(month, [day])</td><td>根据本地时间设置指定日期对象的月份。</td></tr><tr><td>setDate(day)</td><td>根据本地时间设置指定日期对象的日期。</td></tr><tr><td>setHours(hour, [min], [sec], [ms])</td><td>根据本地时间设置指定日期对象的小时。</td></tr><tr><td>setMinutes(min, [sec], [ms])</td><td>根据本地时间设置指定日期对象的分钟。</td></tr><tr><td>setSeconds(sec, [ms])</td><td>根据本地时间设置指定日期对象的秒数。</td></tr><tr><td>setMilliseconds(ms)</td><td>根据本地时间设置指定日期对象的毫秒数。</td></tr><tr><td>setTime(time)</td><td>通过指定从 1970-1-1 00:00:00 UTC 开始经过的毫秒数来设置日期对象。</td></tr><tr><td>toISOString()</td><td>返回一个 ISO 格式的字符串：YYYY-MM-DDTHH:mm:ss.sssZ。</td></tr><tr><td>toLocaleString()</td><td>返回一个表示日期对象的字符串，该字符串与当地环境的语言相对应。</td></tr></tbody></table></div><h4 id="JSON-对象的方法"><a href="#JSON-对象的方法" class="headerlink" title="JSON 对象的方法"></a>JSON 对象的方法</h4><div class="table-container"><table><thead><tr><th>方法名</th><th>描述</th></tr></thead><tbody><tr><td>JSON.parse(text[, reviver])</td><td>将一个 JSON 字符串转换为对象。</td></tr><tr><td>JSON.stringify(value[, replacer[, space]])</td><td>将一个值转换为 JSON 字符串。</td></tr></tbody></table></div><h4 id="Map-对象的方法"><a href="#Map-对象的方法" class="headerlink" title="Map 对象的方法"></a>Map 对象的方法</h4><div class="table-container"><table><thead><tr><th>方法名</th><th>描述</th></tr></thead><tbody><tr><td>set(key, value)</td><td>设置 Map 对象中键的值，返回该 Map 对象。</td></tr><tr><td>get(key)</td><td>返回键对应的值，如果不存在，则返回 undefined。</td></tr><tr><td>has(key)</td><td>返回一个布尔值，表示 Map 实例是否包含键对应的值。</td></tr><tr><td>delete(key)</td><td>删除 Map 中的元素，删除成功返回 true，否则返回 false。</td></tr><tr><td>clear()</td><td>移除 Map 对象中的所有元素。</td></tr><tr><td>keys()</td><td>返回一个新的 Iterator 对象，它按插入顺序包含了 Map 对象中每个元素的键。</td></tr><tr><td>values()</td><td>返回一个新的 Iterator 对象，它按插入顺序包含了 Map 对象中每个元素的值。</td></tr><tr><td>entries()</td><td>返回一个新的 Iterator 对象，它按插入顺序包含了 Map 对象中每个元素的[key, value]数组。</td></tr><tr><td>forEach(callbackFn[, thisArg])</td><td>按插入顺序，为 Map 对象里的每一键值对调用一次 callbackFn 函数。</td></tr></tbody></table></div><h4 id="Set-对象的方法"><a href="#Set-对象的方法" class="headerlink" title="Set 对象的方法"></a>Set 对象的方法</h4><div class="table-container"><table><thead><tr><th>方法名</th><th>描述</th></tr></thead><tbody><tr><td>add(value)</td><td>在 Set 对象尾部添加一个元素，返回该 Set 对象。</td></tr><tr><td>has(value)</td><td>返回一个布尔值，表示该值在 Set 中存在与否。</td></tr><tr><td>delete(value)</td><td>移除 Set 中与这个值相等的元素，返回 Set.prototype.has(value)在这个操作前返回的值。</td></tr><tr><td>clear()</td><td>移除 Set 对象内的所有元素。</td></tr><tr><td>keys()</td><td>返回一个新的 Iterator 对象，该对象包含 Set 对象中的按插入顺序排列的所有元素的值。</td></tr><tr><td>values()</td><td>与 keys()方法相同，返回一个新的 Iterator 对象。</td></tr><tr><td>entries()</td><td>返回一个新的 Iterator 对象，该对象包含 Set 对象中的按插入顺序排列的所有元素的值的[value, value]数组。</td></tr><tr><td>forEach(callbackFn[, thisArg])</td><td>按照插入顺序，为 Set 对象中的每一个值调用一次 callBackFn。</td></tr></tbody></table></div><h4 id="Promise-对象的方法"><a href="#Promise-对象的方法" class="headerlink" title="Promise 对象的方法"></a>Promise 对象的方法</h4><div class="table-container"><table><thead><tr><th>方法名</th><th>描述</th></tr></thead><tbody><tr><td>Promise.all(iterable)</td><td>返回一个新的 Promise，它在 iterable 中所有的 Promise 都成功时才成功，只要有一个失败就失败。</td></tr><tr><td>Promise.race(iterable)</td><td>返回一个新的 Promise，它在 iterable 中任意一个 Promise 解决或拒绝时立即解决或拒绝。</td></tr><tr><td>Promise.resolve(value)</td><td>返回一个以给定值解析后的 Promise 对象。</td></tr><tr><td>Promise.reject(reason)</td><td>返回一个带有拒绝原因的 Promise 对象。</td></tr></tbody></table></div><h3 id="函数与高阶方法"><a href="#函数与高阶方法" class="headerlink" title="函数与高阶方法"></a><strong>函数与高阶方法</strong></h3><div class="table-container"><table><thead><tr><th><strong>方法/语法</strong></th><th><strong>说明</strong></th><th><strong>示例</strong></th></tr></thead><tbody><tr><td><code>bind(thisArg, ...args)</code></td><td>绑定  <code>this</code>  并返回新函数</td><td><code>func.bind(obj)</code> → 新函数</td></tr><tr><td><code>call(thisArg, ...args)</code></td><td>立即调用函数并指定  <code>this</code></td><td><code>func.call(obj, 1, 2)</code></td></tr><tr><td><code>apply(thisArg, [args])</code></td><td>立即调用函数并指定  <code>this</code>（参数为数组）</td><td><code>func.apply(obj, [1, 2])</code></td></tr><tr><td><code>setTimeout(callback, delay)</code></td><td>延迟执行函数（返回定时器 ID）</td><td><code>setTimeout(() =&gt; {}, 1000)</code> → <code>ID</code></td></tr><tr><td><code>setInterval(callback, delay)</code></td><td>循环执行函数（返回定时器 ID）</td><td><code>setInterval(() =&gt; {}, 1000)</code> → <code>ID</code></td></tr></tbody></table></div><h3 id="RegExp-方法"><a href="#RegExp-方法" class="headerlink" title="RegExp 方法"></a>RegExp 方法</h3><div class="table-container"><table><thead><tr><th>方法名</th><th>描述</th></tr></thead><tbody><tr><td>exec(string)</td><td>在一个指定字符串中执行一个搜索匹配。返回一个结果数组或 null。</td></tr><tr><td>test(string)</td><td>执行一个检索，用来查看正则表达式与指定的字符串是否匹配。返回 true 或 false。</td></tr></tbody></table></div><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><div class="table-container"><table><thead><tr><th>方法名</th><th>描述</th></tr></thead><tbody><tr><td>eval(string)</td><td>执行字符串形式的 JavaScript 代码。</td></tr><tr><td>isNaN(value)</td><td>判断一个值是否是 NaN。注意：全局的 isNaN 会先将参数转换为数值再判断。</td></tr><tr><td>isFinite(value)</td><td>判断一个值是否是有限数字。</td></tr><tr><td>parseFloat(string)</td><td>将字符串解析成浮点数。</td></tr><tr><td>parseInt(string, radix)</td><td>将字符串解析成整数。</td></tr></tbody></table></div><p>【待补充】</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;JavaScript 常用方法速查&lt;/p&gt;
&lt;h3 id=&quot;数组&quot;&gt;&lt;a href=&quot;#数组&quot; class=&quot;headerlink&quot; title=&quot;数组&quot;&gt;&lt;/a&gt;数组&lt;/h3&gt;&lt;div class=&quot;table-container&quot;&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;t</summary>
      
    
    
    
    <category term="归档" scheme="https://zhongye1.github.io/Arknight-notes/categories/%E5%BD%92%E6%A1%A3/"/>
    
    
    <category term="前端开发" scheme="https://zhongye1.github.io/Arknight-notes/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>2025-11-02 组会朝花夕拾</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/26939.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/26939.html</id>
    <published>2025-11-02T10:56:59.000Z</published>
    <updated>2025-11-17T02:33:16.633Z</updated>
    
    <content type="html"><![CDATA[<h4 id="设定："><a href="#设定：" class="headerlink" title="设定："></a>设定：</h4><blockquote><p>存在两个独立的、我们无法直接观测的泊松过程 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.717ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 759 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g></g></g></svg></mjx-container> 和 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="1.459ex" height="1.645ex" role="img" focusable="false" viewBox="0 -705 645 727"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g></g></g></svg></mjx-container>。它们分别服从泊松分布：<br><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="14.938ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 6602.6 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mo" transform="translate(1036.8,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mtext" transform="translate(2092.6,0)"><path data-c="50" d="M130 622Q123 629 119 631T103 634T60 637H27V683H214Q237 683 276 683T331 684Q419 684 471 671T567 616Q624 563 624 489Q624 421 573 372T451 307Q429 302 328 301H234V181Q234 62 237 58Q245 47 304 46H337V0H326Q305 3 182 3Q47 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM507 488Q507 514 506 528T500 564T483 597T450 620T397 635Q385 637 307 637H286Q237 637 234 628Q231 624 231 483V342H302H339Q390 342 423 349T481 382Q507 411 507 488Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(681,0)"></path><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(1181,0)"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1459,0)"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1853,0)"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(2247,0)"></path><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(2747,0)"></path></g><g data-mml-node="mo" transform="translate(5395.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(5784.6,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(6213.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>：参数为 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.971ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 429 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container><br><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="14.75ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 6519.6 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mo" transform="translate(922.8,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mtext" transform="translate(1978.6,0)"><path data-c="50" d="M130 622Q123 629 119 631T103 634T60 637H27V683H214Q237 683 276 683T331 684Q419 684 471 671T567 616Q624 563 624 489Q624 421 573 372T451 307Q429 302 328 301H234V181Q234 62 237 58Q245 47 304 46H337V0H326Q305 3 182 3Q47 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM507 488Q507 514 506 528T500 564T483 597T450 620T397 635Q385 637 307 637H286Q237 637 234 628Q231 624 231 483V342H302H339Q390 342 423 349T481 382Q507 411 507 488Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(681,0)"></path><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(1181,0)"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1459,0)"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1853,0)"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(2247,0)"></path><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(2747,0)"></path></g><g data-mml-node="mo" transform="translate(5281.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(5670.6,0)"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="mo" transform="translate(6130.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>：参数为 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="1.041ex" height="1.439ex" role="img" focusable="false" viewBox="0 -442 460 636"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g></g></g></svg></mjx-container><br>我们唯一能观测到的是它们的总和 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex;" xmlns="http://www.w3.org/2000/svg" width="10.686ex" height="1.781ex" role="img" focusable="false" viewBox="0 -705 4723 787"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path></g><g data-mml-node="mo" transform="translate(1040.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(2096.6,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mo" transform="translate(3077.8,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(4078,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g></g></g></svg></mjx-container></p><p>由于泊松分布的可加性，<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.726ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 763 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path></g></g></g></svg></mjx-container> 本身也服从泊松分布：<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="18.753ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 8289 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path></g><g data-mml-node="mo" transform="translate(1040.8,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mtext" transform="translate(2096.6,0)"><path data-c="50" d="M130 622Q123 629 119 631T103 634T60 637H27V683H214Q237 683 276 683T331 684Q419 684 471 671T567 616Q624 563 624 489Q624 421 573 372T451 307Q429 302 328 301H234V181Q234 62 237 58Q245 47 304 46H337V0H326Q305 3 182 3Q47 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM507 488Q507 514 506 528T500 564T483 597T450 620T397 635Q385 637 307 637H286Q237 637 234 628Q231 624 231 483V342H302H339Q390 342 423 349T481 382Q507 411 507 488Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(681,0)"></path><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(1181,0)"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1459,0)"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1853,0)"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(2247,0)"></path><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(2747,0)"></path></g><g data-mml-node="mo" transform="translate(5399.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(5788.6,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(6439.8,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(7440,0)"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="mo" transform="translate(7900,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container><br>现在引入了另一个可观测的变量 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="19.213ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 8492 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mo" transform="translate(1325.8,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mtext" transform="translate(2381.6,0)"><path data-c="50" d="M130 622Q123 629 119 631T103 634T60 637H27V683H214Q237 683 276 683T331 684Q419 684 471 671T567 616Q624 563 624 489Q624 421 573 372T451 307Q429 302 328 301H234V181Q234 62 237 58Q245 47 304 46H337V0H326Q305 3 182 3Q47 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM507 488Q507 514 506 528T500 564T483 597T450 620T397 635Q385 637 307 637H286Q237 637 234 628Q231 624 231 483V342H302H339Q390 342 423 349T481 382Q507 411 507 488Z"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(681,0)"></path><path data-c="69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z" transform="translate(1181,0)"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1459,0)"></path><path data-c="73" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z" transform="translate(1853,0)"></path><path data-c="6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z" transform="translate(2247,0)"></path><path data-c="6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z" transform="translate(2747,0)"></path></g><g data-mml-node="mo" transform="translate(5684.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(6073.6,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(7173.8,0)"><path data-c="22C5" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250Z"></path></g><g data-mml-node="mi" transform="translate(7674,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(8103,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container><br>于是同时拥有了两个可观测变量：<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.726ex" height="1.545ex" role="img" focusable="false" viewBox="0 -683 763 683"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path></g></g></g></svg></mjx-container> 和 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="2.371ex" height="1.595ex" role="img" focusable="false" viewBox="0 -683 1048 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g></g></g></svg></mjx-container></p></blockquote><h4 id="目标："><a href="#目标：" class="headerlink" title="目标："></a>目标：</h4><p>利用 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.863ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3033.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path></g><g data-mml-node="mo" transform="translate(1152,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(1596.7,0)"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mo" transform="translate(2644.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container> 的联合观测数据，来估计出那些未知的参数：<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="0.971ex" height="1.595ex" role="img" focusable="false" viewBox="0 -694 429 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container>, <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="1.041ex" height="1.439ex" role="img" focusable="false" viewBox="0 -442 460 636"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g></g></g></svg></mjx-container>, 以及可能的 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.986ex" height="1.025ex" role="img" focusable="false" viewBox="0 -442 878 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container></p><ul><li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex;" xmlns="http://www.w3.org/2000/svg" width="10.686ex" height="1.781ex" role="img" focusable="false" viewBox="0 -705 4723 787"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path></g><g data-mml-node="mo" transform="translate(1040.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(2096.6,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mo" transform="translate(3077.8,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(4078,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g></g></g></svg></mjx-container></li><li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="8.976ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3967.6 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mo" transform="translate(922.8,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mi" transform="translate(1978.6,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></g><g data-mml-node="mo" transform="translate(2729.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(3118.6,0)"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="mo" transform="translate(3578.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container></li><li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="9.164ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 4050.6 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mo" transform="translate(1036.8,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mi" transform="translate(2092.6,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></g><g data-mml-node="mo" transform="translate(2843.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(3232.6,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(3661.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container></li></ul><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="15.842ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 7002.3 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="21D2" d="M580 514Q580 525 596 525Q601 525 604 525T609 525T613 524T615 523T617 520T619 517T622 512Q659 438 720 381T831 300T927 263Q944 258 944 250T935 239T898 228T840 204Q696 134 622 -12Q618 -21 615 -22T600 -24Q580 -24 580 -17Q580 -13 585 0Q620 69 671 123L681 133H70Q56 140 56 153Q56 168 72 173H725L735 181Q774 211 852 250Q851 251 834 259T789 283T735 319L725 327H72Q56 332 56 347Q56 360 70 367H681L671 377Q638 412 609 458T580 514Z"></path></g><g data-mml-node="mi" transform="translate(1277.8,0)"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path></g><g data-mml-node="mo" transform="translate(2318.6,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mi" transform="translate(3374.3,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></g><g data-mml-node="mo" transform="translate(4125.3,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(4514.3,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mi" transform="translate(5159.3,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g><g data-mml-node="mi" transform="translate(5863.3,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mo" transform="translate(6613.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container>，<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="12.543ex" height="2.059ex" role="img" focusable="false" viewBox="0 -716 5544 910"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path></g><g data-mml-node="mi" transform="translate(645,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g><g data-mml-node="mi" transform="translate(1349,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></g><g data-mml-node="mo" transform="translate(2376.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(3432.6,0)"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="mo" transform="translate(4114.8,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path></g><g data-mml-node="mi" transform="translate(5115,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g></g></g></svg></mjx-container></p><p>构造 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="13.439ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 5940 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mo" transform="translate(1325.8,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z"></path></g><g data-mml-node="mi" transform="translate(2381.6,0)"><path data-c="1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></g><g data-mml-node="mo" transform="translate(3132.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(3521.6,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(4621.8,0)"><path data-c="22C5" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250Z"></path></g><g data-mml-node="mi" transform="translate(5122,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(5551,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g></g></g></svg></mjx-container></p><p>可观测的对象：<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="5.852ex" height="2.009ex" role="img" focusable="false" viewBox="0 -683 2586.6 888"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"></path></g><g data-mml-node="mo" transform="translate(1040.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(2096.6,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g></g></g></svg></mjx-container>，<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex;" xmlns="http://www.w3.org/2000/svg" width="7.008ex" height="1.731ex" role="img" focusable="false" viewBox="0 -683 3097.6 765"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path></g><g data-mml-node="mo" transform="translate(1325.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(2381.6,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g></g></g></svg></mjx-container></p><p>现在需要对 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="1.041ex" height="1.439ex" role="img" focusable="false" viewBox="0 -442 460 636"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g></g></g></svg></mjx-container> 做推断/检验，看有无区间严格保证 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex;" xmlns="http://www.w3.org/2000/svg" width="9.251ex" height="1.731ex" role="img" focusable="false" viewBox="0 -683 4089 765"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(722.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(1722.4,0)"><path data-c="1D6FC" d="M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z"></path></g><g data-mml-node="mo" transform="translate(2640.2,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"></path></g><g data-mml-node="mi" transform="translate(3585,0)"><path data-c="1D43C" d="M43 1Q26 1 26 10Q26 12 29 24Q34 43 39 45Q42 46 54 46H60Q120 46 136 53Q137 53 138 54Q143 56 149 77T198 273Q210 318 216 344Q286 624 286 626Q284 630 284 631Q274 637 213 637H193Q184 643 189 662Q193 677 195 680T209 683H213Q285 681 359 681Q481 681 487 683H497Q504 676 504 672T501 655T494 639Q491 637 471 637Q440 637 407 634Q393 631 388 623Q381 609 337 432Q326 385 315 341Q245 65 245 59Q245 52 255 50T307 46H339Q345 38 345 37T342 19Q338 6 332 0H316Q279 2 179 2Q143 2 113 2T65 2T43 1Z"></path></g></g></g></svg></mjx-container></p><p>两个方法：</p><ol><li>参考之前文章的 idea 直接推</li><li>用随机加权的 IM 方法</li></ol><p>随机加权的 IM 方法的话就是：</p><p>利用随机加权的 IM 方法为参数 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="1.041ex" height="1.439ex" role="img" focusable="false" viewBox="0 -442 460 636"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45E" d="M33 157Q33 258 109 349T280 441Q340 441 372 389Q373 390 377 395T388 406T404 418Q438 442 450 442Q454 442 457 439T460 434Q460 425 391 149Q320 -135 320 -139Q320 -147 365 -148H390Q396 -156 396 -157T393 -175Q389 -188 383 -194H370Q339 -192 262 -192Q234 -192 211 -192T174 -192T157 -193Q143 -193 143 -185Q143 -182 145 -170Q149 -154 152 -151T172 -148Q220 -148 230 -141Q238 -136 258 -53T279 32Q279 33 272 29Q224 -10 172 -10Q117 -10 75 30T33 157ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g></g></g></svg></mjx-container>构造置信区间</p><p>差不多研究下相关的文献之后再研究</p><p><del><code>Y = B + S</code> <code>S ~ P(lambda)</code> <code>B ~ P(b)</code> ==&gt; <code>Y ~ P(STA)</code> STA = lambda + b</del></p><p><del>构造 W ~ P(m * b)</del></p><p><del>可观测 obser： Y = y ， W = w</del><br><del>问题 QUS：对 lambda 做推断/检验 看有无区间严格保证 1- a 属于 I</del></p><p><del>两个方法：</del></p><ol><li><del>参考之前文章的 idea 直接推</del></li><li><del>用随机加权的 ificent model</del></li></ol><p><del>随机加权的 ificent model：</del></p><p><del>step1：</del></p><p><del>Q： Y~P(STA) STA = lambda + b</del></p><p><del>F_STA(Y-1) &lt;= u &lt; F_STA(Y)</del><br><del>u,v ~ Unif(0,1)</del></p><p><del>F_mb(w-1) &lt;= v &lt;= F_mb(w)</del></p><p><del>step2:</del></p><p><del>G(STA): w_1: F_STA(Y-1)+(1-w_1)F_STA(Y) = u (关于 STA 的递减函数)</del><br><del>H(mb): w_2: F_mb(w-1) + (1-w_2)F_mb(w) =v</del></p><p><del>step3:</del></p><p><del>STA = [G(u)]^(-1) , b = [H(v)]^(-1)/m ==&gt;</del><br><del>lambda = [G(u)]^(-1)-[H(v)]^(-1)</del></p><p><del>step4:</del></p><p><del>模拟验证：</del></p><p><del>对 U,V ~ Unif(0,1) -&gt; 生成 10000 个样本</del></p><p><del>W1，W2 ~ Unif(0,1) -&gt; 10000</del></p><p><del>for 循环 for u,v,W_1,W_2</del></p><p><del>lambda = [G(u)]^(-1)-[H(v)]^(-1) -&gt; 10000 个解</del></p><p><del>得到[lambda<em>上区间，lambda</em>下区间] = [lambda_0.025，lambda_0.095] lambda 的上分位数下分位数</del></p><p><del>10000 次样本有无落入其中： true lambda = STA - b</del></p><p><del>关注作差后覆盖率好不好 N/ 10000 (能否保证)</del></p><p><del>结果如何</del></p><p><del>好-》 成功</del><br><del>不好—》 h 函数继续优化</del></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;设定：&quot;&gt;&lt;a href=&quot;#设定：&quot; class=&quot;headerlink&quot; title=&quot;设定：&quot;&gt;&lt;/a&gt;设定：&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;存在两个独立的、我们无法直接观测的泊松过程 &lt;mjx-container class=&quot;MathJax&quot; </summary>
      
    
    
    
    <category term="归档" scheme="https://zhongye1.github.io/Arknight-notes/categories/%E5%BD%92%E6%A1%A3/"/>
    
    
    <category term="日志" scheme="https://zhongye1.github.io/Arknight-notes/tags/%E6%97%A5%E5%BF%97/"/>
    
  </entry>
  
  <entry>
    <title>2025-10-28-常用杂记</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/40483.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/40483.html</id>
    <published>2025-10-28T04:38:37.000Z</published>
    <updated>2025-11-17T02:00:24.512Z</updated>
    
    <content type="html"><![CDATA[<p>综合查找：端口-&gt;进程-&gt;工作目录<br>lsof -i :3001 | awk ‘NR&gt;1 {print $2}’ | xargs -I {} pwdx {} 2&gt;/dev/null</p><p>或者更详细的版本<br>lsof -i :3001 | awk ‘NR&gt;1 {print <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.452ex;" xmlns="http://www.w3.org/2000/svg" width="51.584ex" height="2.149ex" role="img" focusable="false" viewBox="0 -750 22800 950"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="merror" data-mjx-error="Extra close brace or missing open brace" title="Extra close brace or missing open brace"><rect data-background="true" width="22800" height="950" y="-200"></rect><title>Extra close brace or missing open brace</title><g data-mml-node="mtext" style="font-family: serif;"><text data-variant="-explicitFont" transform="scale(1,-1)" font-size="884px">2}’ | while read pid; do   echo “PID: </text></g></g></g></g></svg></mjx-container>pid”<br>  echo “工作目录: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.109ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2700 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path></g><g data-mml-node="mi" transform="translate(892,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"></path></g><g data-mml-node="mi" transform="translate(1608,0)"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="mi" transform="translate(2128,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path></g></g></g></svg></mjx-container>pid 2&gt;/dev/null)”<br>  echo “命令: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.983ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3086.4 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path></g><g data-mml-node="mi" transform="translate(892,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></g><g data-mml-node="mo" transform="translate(1583.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(2583.4,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"></path></g></g></g></svg></mjx-container>pid -o command= 2&gt;/dev/null)”<br>  echo “—-“<br>done</p><p>lsof -ti:3001 | xargs kill -9</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;综合查找：端口-&amp;gt;进程-&amp;gt;工作目录&lt;br&gt;lsof -i :3001 | awk ‘NR&amp;gt;1 {print $2}’ | xargs -I {} pwdx {} 2&amp;gt;/dev/null&lt;/p&gt;
&lt;p&gt;或者更详细的版本&lt;br&gt;lsof -i :3001</summary>
      
    
    
    
    <category term="归档" scheme="https://zhongye1.github.io/Arknight-notes/categories/%E5%BD%92%E6%A1%A3/"/>
    
    
    <category term="日志" scheme="https://zhongye1.github.io/Arknight-notes/tags/%E6%97%A5%E5%BF%97/"/>
    
  </entry>
  
  <entry>
    <title>2025-10-24-10.20课题</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/45309.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/45309.html</id>
    <published>2025-10-24T00:15:01.000Z</published>
    <updated>2025-11-17T02:00:27.288Z</updated>
    
    <content type="html"><![CDATA[<p><strong>设定：​</strong>​</p><p>存在两个独立的、我们无法直接观测的随机过程 <code>B</code>和 <code>S</code>。它们分别服从泊松分布：</p><p><code>B ~ Poisson(b)</code>： 参数为 <code>b</code></p><p><code>S ~ Poisson(q)</code>： 参数为 <code>q</code></p><p>我们唯一能观测到的是它们的总和 <code>Y = B + S</code><br>由于泊松分布的可加性，<code>Y</code>本身也服从泊松分布：<code>Y ~ Poisson(b + q)</code><br>现在引入了另一个可观测的变量 <code>W ~ Poisson(m * b)</code><br>于是同时拥有了两个可观测变量：<code>Y</code>和 <code>W</code></p><p><strong>目标是利用 <code>(Y, W)</code>的联合观测数据，来估计出那些未知的参数：<code>b</code>, <code>q</code>, 以及可能的 <code>m</code></strong><br>​</p><p><del>含隐变量的模型​​</del><br><del>复合分布问题​</del><br><del>​参数估计问题​​</del><br><del>解决这类问题最常用的方法是 ​<strong>​最大似然估计​</strong>​ 和 ​<strong>​期望最大化算法​</strong></del>​</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;设定：​&lt;/strong&gt;​&lt;/p&gt;
&lt;p&gt;存在两个独立的、我们无法直接观测的随机过程 &lt;code&gt;B&lt;/code&gt;和 &lt;code&gt;S&lt;/code&gt;。它们分别服从泊松分布：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;B ~ Poisson(b)&lt;/code&gt;： 参数为 &lt;c</summary>
      
    
    
    
    <category term="归档" scheme="https://zhongye1.github.io/Arknight-notes/categories/%E5%BD%92%E6%A1%A3/"/>
    
    
    <category term="日志" scheme="https://zhongye1.github.io/Arknight-notes/tags/%E6%97%A5%E5%BF%97/"/>
    
  </entry>
  
  <entry>
    <title>记一次配置Obsidian配合Hexo写博客</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/t2zf3s.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/t2zf3s.html</id>
    <published>2025-09-22T08:47:52.000Z</published>
    <updated>2025-11-17T02:00:58.281Z</updated>
    
    <content type="html"><![CDATA[<p><del>测试，现在新写了个插件，晚上回来整</del></p><p>看网上教程又是整Templates又是整quickadd太麻烦，遂自己写了一个插件</p><p>地址 <a href="https://github.com/Zhongye1/obsidian-with-hexo">https://github.com/Zhongye1/obsidian-with-hexo</a></p><p class='item-img' data-src='https://pica.zhimg.com/v2-0b4e651d9720ff3f9fc14bc6576d26f4_r.jpg'><img src="https://pica.zhimg.com/v2-0b4e651d9720ff3f9fc14bc6576d26f4_r.jpg" alt=""></p><p class='item-img' data-src='https://picx.zhimg.com/v2-3d00531878223fb29e447dab5bd1c96d_r.jpg'><img src="https://picx.zhimg.com/v2-3d00531878223fb29e447dab5bd1c96d_r.jpg" alt=""></p><p>首先使用 obsidian 打开现有Hexo项目的 <code>source/_posts</code> 作为文章目录，然后什么博客文章操作一键完成就行了</p><p>差不多，没啥好水的</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;del&gt;测试，现在新写了个插件，晚上回来整&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;看网上教程又是整Templates又是整quickadd太麻烦，遂自己写了一个插件&lt;/p&gt;
&lt;p&gt;地址 &lt;a href=&quot;https://github.com/Zhongye1/obsidian-wit</summary>
      
    
    
    
    <category term="笔记" scheme="https://zhongye1.github.io/Arknight-notes/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="日志" scheme="https://zhongye1.github.io/Arknight-notes/tags/%E6%97%A5%E5%BF%97/"/>
    
  </entry>
  
  <entry>
    <title>利用chrome F12 测试应用实践详解</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/41925.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/41925.html</id>
    <published>2025-06-10T01:54:31.944Z</published>
    <updated>2025-09-28T11:15:50.124Z</updated>
    
    <content type="html"><![CDATA[<p>首先介绍 Chrome 开发者工具中，调试时使用最多的三个功能页面是：<a href="https://zhida.zhihu.com/search?content_id=119003541&amp;content_type=Article&amp;match_order=1&amp;q=%E5%85%83%E7%B4%A0&amp;zhida_source=entity">元素</a>（ELements）、<a href="https://zhida.zhihu.com/search?content_id=119003541&amp;content_type=Article&amp;match_order=1&amp;q=%E6%8E%A7%E5%88%B6%E5%8F%B0&amp;zhida_source=entity">控制台</a>（Console）、<a href="https://zhida.zhihu.com/search?content_id=119003541&amp;content_type=Article&amp;match_order=1&amp;q=%E6%BA%90%E4%BB%A3%E7%A0%81&amp;zhida_source=entity">源代码</a>（Sources），此外还有<a href="https://zhida.zhihu.com/search?content_id=119003541&amp;content_type=Article&amp;match_order=1&amp;q=%E7%BD%91%E7%BB%9C&amp;zhida_source=entity">网络</a>（Network）等。</p><p class='item-img' data-src='https://pic3.zhimg.com/v2-7b3aa7ae78cff19d9f3f8902027b271e_1440w.jpg'><img src="https://pic3.zhimg.com/v2-7b3aa7ae78cff19d9f3f8902027b271e_1440w.jpg" alt=""></p><ul><li>元素（Elements）：用于查看或修改 HTML 元素的属性、CSS 属性、监听事件、断点等。</li><li>控制台（Console）：控制台一般用于执行一次性代码，查看 JavaScript 对象，查看调试日志信息或异常信息。</li><li>源代码（Sources）：该页面用于查看页面的 HTML 文件源代码、JavaScript 源代码、CSS 源代码，此外最重要的是可以调试 JavaScript 源代码，可以给 JS 代码添加断点等。</li><li>网络（Network）：网络页面主要用于查看 header 等与网络连接相关的信息。</li></ul><p><strong>1、元素（Elements）</strong></p><p>查看元素代码：点击如图</p><p class='item-img' data-src='https://picx.zhimg.com/v2-c55350fef2cc9847c9e88a00caffa2a1_1440w.png'><img src="https://picx.zhimg.com/v2-c55350fef2cc9847c9e88a00caffa2a1_1440w.png" alt=""></p><p>箭头（或用者用快捷键 Ctrl+Shift+C）进入选择元素模式，然后从页面中选择需要查看的元素，然后可以在开发者工具元素（Elements）一栏中定位到该元素源代码的具体位置 。</p><p>查看元素属性：可从被定位的源码中查看部分，如 class、src，也可在右边的侧栏中查看全部的属性，如下图位置查看</p><p class='item-img' data-src='https://pic3.zhimg.com/v2-0a485043e71f01c0be4e2212852d22c0_1440w.jpg'><img src="https://pic3.zhimg.com/v2-0a485043e71f01c0be4e2212852d22c0_1440w.jpg" alt=""></p><p>修改元素的代码与属性：可直接双击想要修改的部分，然后就进行修改，或者选中要修改部分后点击右键进行修改，如下图</p><p>**</p><p class='item-img' data-src='https://pica.zhimg.com/v2-60169f4ee8921f961300d6ea7002d388_1440w.png'><img src="https://pica.zhimg.com/v2-60169f4ee8921f961300d6ea7002d388_1440w.png" alt=""></p><p>**</p><p><strong>注意：这个修改也仅对当前的页面渲染生效，不会修改服务器的源代码，故而这个功能也是作为调试页面效果而使用。</strong></p><p>右边的侧栏个功能的介绍:如下图所示</p><p class='item-img' data-src='https://picx.zhimg.com/v2-dd0bbf6c9cb776b8eff94db3c387c019_1440w.jpg'><img src="https://picx.zhimg.com/v2-dd0bbf6c9cb776b8eff94db3c387c019_1440w.jpg" alt=""></p><p><strong>2、控制台（Console）</strong></p><ul><li>查看 JS 对象的及其属性</li><li>执行 JS 语句</li><li>查看控制台日志：当网页的 JS 代码中使用了 console.log()函数时，该函数输出的日志信息会在控制台中显示。日志信息一般在开发调试时启用，而当正式上线后，一般会将该函数去掉。</li></ul><p><strong>3、源代码（Sources）</strong>其主要功能如下介绍</p><p class='item-img' data-src='https://pic4.zhimg.com/v2-cf61d4c59d1620e9a96f74ab84d2d027_1440w.jpg'><img src="https://pic4.zhimg.com/v2-cf61d4c59d1620e9a96f74ab84d2d027_1440w.jpg" alt=""></p><p><strong>4、网络（Network）大体功能如下：</strong></p><p class='item-img' data-src='https://pic4.zhimg.com/v2-ff058011fb5c4df1e1a558feb67df545_1440w.jpg'><img src="https://pic4.zhimg.com/v2-ff058011fb5c4df1e1a558feb67df545_1440w.jpg" alt=""></p><ul><li>打开浏览器,按 f12,点击 Network,可以查看相关网络请求信息,记得是打开 f12 之后再刷新页面才会开始记录的</li></ul><p class='item-img' data-src='https://pic3.zhimg.com/v2-e8b63050aa5aee1271250d45f940024e_1440w.jpg'><img src="https://pic3.zhimg.com/v2-e8b63050aa5aee1271250d45f940024e_1440w.jpg" alt=""></p><ul><li>查看 Network 基本信息,请求了哪些地址及每个 URL 的网络相关请求信息都可以看的到 URL，响应状态码，响应数据类型，响应数据大小，响应时间</li></ul><p class='item-img' data-src='https://pic1.zhimg.com/v2-5a3eb9a4f6553aaf12e2e715000c7f7a_1440w.jpg'><img src="https://pic1.zhimg.com/v2-5a3eb9a4f6553aaf12e2e715000c7f7a_1440w.jpg" alt=""></p><ul><li>请求 URL 可进行筛选和分类，选择不同分类,查看请求 URL,方便查找</li></ul><p class='item-img' data-src='https://pic2.zhimg.com/v2-fff49ec5c4761f0e17fa70f47d4093c7_1440w.jpg'><img src="https://pic2.zhimg.com/v2-fff49ec5c4761f0e17fa70f47d4093c7_1440w.jpg" alt=""></p><ul><li>也可以直接 Filter 搜索查询相关 URL，可以输入关键字或者正则表达式进行查询</li></ul><p class='item-img' data-src='https://pic1.zhimg.com/v2-9f813a3d5a045e7771de0052958c1e84_1440w.jpg'><img src="https://pic1.zhimg.com/v2-9f813a3d5a045e7771de0052958c1e84_1440w.jpg" alt=""></p><ul><li>Waterfall 能分割重要的请求耗时,查看具体请求耗时在哪个地方,鼠标指到相关区域可以看到具体耗时</li></ul><p class='item-img' data-src='https://pic1.zhimg.com/v2-443fe9f7eabd239b9762e4701ab44a24_1440w.jpg'><img src="https://pic1.zhimg.com/v2-443fe9f7eabd239b9762e4701ab44a24_1440w.jpg" alt=""></p><ul><li>我们具体分析下里面每个各代表什么意思,分别耗时多少,通过这个来分析服务器到底是哪个环节出了问题</li></ul><ol><li>Queueing 是排队的意思</li><li>Stalled 是阻塞 请求访问该 URL 的主机是有并发和连接数限制的,必须要等之前的执行才能执行之后的,这段时间的耗时</li><li>DNS Lookup 是指域名解析所耗时间</li><li>Initial connection 初始化连接时间,这里一般是 TCP 3 次连接握手时间</li><li>SSL https 特有,是一种协议</li><li>Request sent 发送请求所消耗的时间</li><li>Waiting 等待响应时间,这里一般是最耗时的</li><li>Content Download 下载内容所需要消耗的时间</li></ol><p><strong>请求文件具体说明</strong></p><p class='item-img' data-src='https://pica.zhimg.com/v2-457e994216ffe2626cd07c84a0bdf4d4_1440w.jpg'><img src="https://pica.zhimg.com/v2-457e994216ffe2626cd07c84a0bdf4d4_1440w.jpg" alt=""></p><p><strong>一共分为四个模块：</strong></p><ul><li>Header：面板列出资源的请求 url、HTTP 方法、响应状态码、请求头和响应头及它们各自的值、请求参数等等</li><li>Preview：预览面板，用于资源的预览。</li><li>Response：响应信息面板包含资源还未进行格式处理的内容</li><li>Timing：资源请求的详细信息花费时间</li></ul><p>转载自 <a href="https://zhuanlan.zhihu.com/p/138922503">chrome 浏览器中 F12 功能的简单介绍 - 知乎 (zhihu.com)</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;首先介绍 Chrome 开发者工具中，调试时使用最多的三个功能页面是：&lt;a href=&quot;https://zhida.zhihu.com/search?content_id=119003541&amp;amp;content_type=Article&amp;amp;match_order=</summary>
      
    
    
    
    <category term="笔记" scheme="https://zhongye1.github.io/Arknight-notes/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="前端开发" scheme="https://zhongye1.github.io/Arknight-notes/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>数据结构-树</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/19969.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/19969.html</id>
    <published>2025-04-29T18:19:06.000Z</published>
    <updated>2025-11-19T02:17:18.242Z</updated>
    
    <content type="html"><![CDATA[<p>树是常用的数据结构之一，种类很多比如二叉树，二叉查找树，平衡二叉树，红黑树，B 树，B+树等，本身就是一种递归结构</p><h2 id="什么是树？"><a href="#什么是树？" class="headerlink" title="什么是树？"></a>什么是树？</h2><p>树是我们计算机中非常重要的一种数据结构，同时使用树这种数据结构，可以描述现实生活中的很多事物，例如家谱、单位的组织架构、等等。</p><p>在计算机科学中，<strong>树</strong>是一种抽象数据类型（ADT）或是实现这种抽象数据类型的数据结构，用来模拟具有树状结构性质的数据集合。它是由 n（n&gt;0）个有限节点组成一个具有层次关系的集合。把它叫做“树”是因为它看起来像一棵倒挂的树，也就是说它是根朝上，而叶朝下的。它具有以下的特点：</p><ul><li>每个节点都只有有限个子节点或无子节点；</li><li>没有父节点的节点称为根节点；</li><li>每一个非根节点有且只有一个父节点；</li><li>除了根节点外，每个子节点可以分为多个不相交的子树；</li><li>树里面没有环路(cycle)</li></ul><h2 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h2><ol><li><strong>节点的度</strong>：一个节点含有的子树的个数称为该节点的度；</li><li><strong>树的度</strong>：一棵树中，最大的节点度称为树的度；</li><li><strong>叶节点</strong>或<strong>终端节点</strong>：度为零的节点；</li><li><strong>非终端节点</strong>或<strong>分支节点</strong>：度不为零的节点；</li><li><strong>父亲节点</strong>或<strong>父节点</strong>：若一个节点含有子节点，则这个节点称为其子节点的父节点；</li><li><strong>孩子节点</strong>或<strong>子节点</strong>：一个节点含有的子树的根节点称为该节点的子节点；</li><li><strong>兄弟节点</strong>：具有相同父节点的节点互称为兄弟节点；</li><li>节点的<strong>层次</strong>：从根开始定义起，根为第 1 层，根的子节点为第 2 层，以此类推；</li><li><strong>深度</strong>：对于任意节点 n,n 的深度为从根到 n 的唯一路径长，根的深度为 0；</li><li><strong>高度</strong>：对于任意节点 n,n 的高度为从 n 到一片树叶的最长路径长，所有树叶的高度为 0；</li><li><strong>堂兄弟节点</strong>：父节点在同一层的节点互为堂兄弟；</li><li><strong>节点的祖先</strong>：从根到该节点所经分支上的所有节点；</li><li><strong>子孙</strong>：以某节点为根的子树中任一节点都称为该节点的子孙。</li><li><strong>森林</strong>：由 m（m&gt;=0）棵互不相交的树的集合称为森林；</li></ol><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs less">                    <span class="hljs-selector-tag">A</span> (根节点)<br>                   / \<br>                  <span class="hljs-selector-tag">B</span>   <span class="hljs-selector-tag">C</span><br>                 / \   \<br>                <span class="hljs-selector-tag">D</span>   <span class="hljs-selector-tag">E</span>   <span class="hljs-selector-tag">F</span><br>               /       / \<br>              <span class="hljs-selector-tag">G</span>       <span class="hljs-selector-tag">H</span>   <span class="hljs-selector-tag">I</span> (叶节点)<br>             / \<br>            <span class="hljs-selector-tag">J</span>   <span class="hljs-selector-tag">K</span> (叶节点)<br><br><br><span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">A</span>是根节点，没有父节点<br><span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">B</span>是<span class="hljs-selector-tag">A</span>的子节点，<span class="hljs-selector-tag">A</span>是<span class="hljs-selector-tag">B</span>的父节点<br><span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">B</span>和<span class="hljs-selector-tag">C</span>是兄弟节点（具有相同父节点<span class="hljs-selector-tag">A</span>）<br><span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">G</span>是叶节点（度为<span class="hljs-number">0</span>）<br><span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">B</span>是非终端节点（度不为<span class="hljs-number">0</span>，度为<span class="hljs-number">2</span>）<br><span class="hljs-selector-tag">-</span> 从<span class="hljs-selector-tag">A</span>到<span class="hljs-selector-tag">K</span>的路径长度为<span class="hljs-number">3</span>，<span class="hljs-selector-tag">K</span>的深度为<span class="hljs-number">3</span><br><span class="hljs-selector-tag">-</span> 树的度为<span class="hljs-number">2</span>（<span class="hljs-selector-tag">B</span>节点的度最大）<br><span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">B</span>的度为<span class="hljs-number">2</span>（有两个子节点<span class="hljs-selector-tag">D</span>和<span class="hljs-selector-tag">E</span>）<br><span class="hljs-selector-tag">-</span> 整个结构是一个有序树（子节点有左右顺序）<br></code></pre></td></tr></table></figure><p>这个图示展示了以下树的基本概念：</p><ol><li><strong>根节点</strong>：A 节点，整棵树的起始点</li><li><strong>父节点与子节点关系</strong>：如 A 是 B 和 C 的父节点，B 和 C 是 A 的子节点</li><li><strong>兄弟节点</strong>：B 和 C 具有相同的父节点 A，所以它们是兄弟节点</li><li><strong>叶节点</strong>：G、H、I、J、K 这些没有子节点的节点</li><li><strong>内部节点</strong>：A、B、C、D、E、F 这些有子节点的节点</li><li><strong>节点的度</strong>：B 的度为 2（有两个子节点），G 的度为 2（有两个子节点）</li><li><strong>树的度</strong>：整棵树的最大节点度，这里是 2</li><li><strong>路径与深度</strong>：从根节点 A 到任意节点的路径，如 A-&gt;B-&gt;D-&gt;G 的路径长度为 3</li></ol><h2 id="树的种类"><a href="#树的种类" class="headerlink" title="树的种类"></a>树的种类</h2><p>有序/无序：</p><ul><li>无序树：树中任意节点的子节点之间没有顺序关系，这种树称为无序树，也称为自由树。</li><li>有序树/搜索树/查找树：树中任意节点的子节点之间有顺序关系，这种树称为有序树。即树的所有节点按照一定的顺序排列，这样进行插入、删除、查找时效率就会非常高</li></ul><p>平衡/不平衡：</p><ul><li>平衡树<ul><li>绝对平衡树：所有叶节点在同一层</li><li>非绝对平衡树</li></ul></li><li>不平衡树</li></ul><p>节点的分叉情况：</p><ul><li>等叉树：是每个节点的键值个数都相同、子节点个数也都相同<ul><li>二叉树：每个节点最多含有两个子树的树称为二叉树；<ul><li>完全二叉树：除了第 d 层外，其它各层的节点数目均已达最大值，且第 d 层所有节点从左向右连续地紧密排列，这样的二叉树被称为完全二叉树；<ul><li>满二叉树：所有叶节点都在最底层的完全二叉树；</li></ul></li><li>平衡二叉树、AVL 树：当且仅当任何节点的两棵子树的高度差不大于 1 的二叉树；</li><li>排序二叉树：也称二叉查找树、二叉搜索树、有序二叉树；</li></ul></li><li>霍夫曼树：带权路径最短的二叉树称为哈夫曼树或最优二叉树；</li><li>多叉树</li></ul></li><li>不等叉树：每个节点的键值个数不一定相同、子节点个数也不一定相同<ul><li>B 树：对不等叉树的节点键值数和插入、删除逻辑添加一些特殊的要求，使其能达到绝对平衡的效果。B 树全称 Balance Tree。如果某个 B 树上所有节点的分叉数最大值是 m，则把这个 B 数叫做 m 阶 B 树。</li></ul></li></ul><h2 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a><strong>二叉树</strong></h2><p>二叉树就像它的名字一样，每个元素最多有两个节点，分别称为左节点和右节点。当然并不是每个元素都需要有两个节点，有的可能只有左节点，有的可能只有右节点。</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs less">        <span class="hljs-selector-tag">A</span> (根节点)<br>       / \<br>      <span class="hljs-selector-tag">B</span>   <span class="hljs-selector-tag">C</span><br>     / \   \<br>    <span class="hljs-selector-tag">D</span>   <span class="hljs-selector-tag">E</span>   <span class="hljs-selector-tag">F</span><br>   /       / \<br>  <span class="hljs-selector-tag">G</span>       <span class="hljs-selector-tag">H</span>   <span class="hljs-selector-tag">I</span> (叶节点)<br> / \<br><span class="hljs-selector-tag">J</span>   <span class="hljs-selector-tag">K</span> (叶节点)<br></code></pre></td></tr></table></figure><p>基于树的存储模式的不同，为了更好的利用存储空间，二叉树又分为完全二叉树和非完全二叉树：</p><p><strong>「完全二叉树」</strong>：叶子节点都在最底下两层，最后一层的叶子节点都靠左排列，并且除了最后一层，其他层的节点个数都要达到最大</p><h3 id="１、完全二叉树"><a href="#１、完全二叉树" class="headerlink" title="１、完全二叉树"></a><strong>１、完全二叉树</strong></h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs less">                    <span class="hljs-selector-tag">A</span> (根节点)<br>                   / \<br>                  <span class="hljs-selector-tag">B</span>   <span class="hljs-selector-tag">C</span><br>                 / \   \<br>                <span class="hljs-selector-tag">D</span>   <span class="hljs-selector-tag">E</span>   <span class="hljs-selector-tag">F</span><br>               /       / \<br>              <span class="hljs-selector-tag">G</span>       <span class="hljs-selector-tag">H</span>   <span class="hljs-selector-tag">I</span> (叶节点)<br>             / \<br>            <span class="hljs-selector-tag">J</span>   <span class="hljs-selector-tag">K</span> (叶节点)<br><br>完全二叉树的顺序存储<br>数组索引: <span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[2]</span><span class="hljs-selector-attr">[3]</span><span class="hljs-selector-attr">[4]</span><span class="hljs-selector-attr">[5]</span><span class="hljs-selector-attr">[6]</span><span class="hljs-selector-attr">[7]</span><span class="hljs-selector-attr">[8]</span><br>存储内容: <span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[2]</span><span class="hljs-selector-attr">[3]</span><span class="hljs-selector-attr">[4]</span><span class="hljs-selector-attr">[5]</span><span class="hljs-selector-attr">[6]</span><span class="hljs-selector-attr">[7]</span><span class="hljs-selector-attr">[8]</span><span class="hljs-selector-attr">[9]</span><br></code></pre></td></tr></table></figure><h3 id="２、非完全二叉树"><a href="#２、非完全二叉树" class="headerlink" title="２、非完全二叉树"></a><strong>２、非完全二叉树</strong></h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs less">        <span class="hljs-number">1</span><br>       / \<br>      <span class="hljs-number">2</span>   <span class="hljs-number">3</span><br>     /     \<br>    <span class="hljs-number">4</span>       <span class="hljs-number">5</span><br>   /       / \<br>  <span class="hljs-number">6</span>       <span class="hljs-number">7</span>   <span class="hljs-number">8</span><br>         /<br>        <span class="hljs-number">9</span><br><br>非完全二叉树的顺序存储<br>数组索引: <span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[2]</span><span class="hljs-selector-attr">[3]</span><span class="hljs-selector-attr">[4]</span><span class="hljs-selector-attr">[5]</span><span class="hljs-selector-attr">[6]</span><span class="hljs-selector-attr">[7]</span><span class="hljs-selector-attr">[8]</span><span class="hljs-selector-attr">[9]</span><span class="hljs-selector-attr">[10]</span><span class="hljs-selector-attr">[11]</span><span class="hljs-selector-attr">[12]</span><span class="hljs-selector-attr">[13]</span><span class="hljs-selector-attr">[14]</span><span class="hljs-selector-attr">[15]</span><span class="hljs-selector-attr">[16]</span><span class="hljs-selector-attr">[17]</span><span class="hljs-selector-attr">[18]</span><br>存储内容: <span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[2]</span><span class="hljs-selector-attr">[3]</span><span class="hljs-selector-attr">[4]</span><span class="hljs-selector-attr">[ ]</span><span class="hljs-selector-attr">[ ]</span><span class="hljs-selector-attr">[5]</span><span class="hljs-selector-attr">[6]</span><span class="hljs-selector-attr">[ ]</span><span class="hljs-selector-attr">[ ]</span><span class="hljs-selector-attr">[ ]</span><span class="hljs-selector-attr">[ ]</span><span class="hljs-selector-attr">[ ]</span><span class="hljs-selector-attr">[7]</span><span class="hljs-selector-attr">[8]</span><span class="hljs-selector-attr">[ ]</span><span class="hljs-selector-attr">[ ]</span><span class="hljs-selector-attr">[ ]</span><span class="hljs-selector-attr">[9]</span><br>存在大量空位，造成空间浪费<br><br></code></pre></td></tr></table></figure><h2 id="二叉树的存储模式"><a href="#二叉树的存储模式" class="headerlink" title="二叉树的存储模式"></a><strong>二叉树的存储模式</strong></h2><p>二叉树的存储模式有两种，一种是基于指针或者引用的<strong>二叉链式存储法</strong>，一种是基于数组的<strong>顺序存储法</strong></p><h3 id="二叉链式存储法"><a href="#二叉链式存储法" class="headerlink" title="二叉链式存储法"></a><strong>二叉链式存储法</strong></h3><p>链式存储法相对比较简单，理解起来也非常容易，每一个节点都有三个字段，一个字段存储着该节点的值，另外两个字段存储着左右节点的引用。我们顺着跟字节就可以很轻松的把整棵树串起来</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs less">链式存储法结构示意图：<br><br>    节点<span class="hljs-selector-tag">A</span><br>   /     \<br>  ↓       ↓<br>节点<span class="hljs-selector-tag">B</span>    节点<span class="hljs-selector-tag">C</span><br>/   \     /   \<br>↓    ↓   ↓    ↓<br>...  ... ...  ...<br><br>每个节点的内存结构：<br>┌─────────────┬─────────────┬─────────────┐<br>│    <span class="hljs-selector-tag">data</span>     │    <span class="hljs-selector-tag">left</span>     │    <span class="hljs-selector-tag">right</span>    │<br>│  (节点值)   │  (左子节点) │  (右子节点) │<br>└─────────────┴─────────────┴─────────────┘<br>      ↓              ↓             ↓<br>    节点值       指向左子树    指向右子树<br>                   的指针        的指针<br><br></code></pre></td></tr></table></figure><p>链式存储法的 C 语言实现：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><br><span class="hljs-comment">// 二叉树节点定义</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TreeNode</span> {</span><br>    <span class="hljs-type">int</span> data;           <span class="hljs-comment">// 节点数据</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TreeNode</span>* <span class="hljs-title">left</span>;</span>   <span class="hljs-comment">// 左子节点指针</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TreeNode</span>* <span class="hljs-title">right</span>;</span>  <span class="hljs-comment">// 右子节点指针</span><br>} TreeNode;<br><br><span class="hljs-comment">// 创建新节点</span><br>TreeNode* <span class="hljs-title function_">createNode</span><span class="hljs-params">(<span class="hljs-type">int</span> data)</span> {<br>    TreeNode* newNode = (TreeNode*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(TreeNode));<br>    newNode-&gt;data = data;<br>    newNode-&gt;left = <span class="hljs-literal">NULL</span>;<br>    newNode-&gt;right = <span class="hljs-literal">NULL</span>;<br>    <span class="hljs-keyword">return</span> newNode;<br>}<br><br><span class="hljs-comment">// 示例：构建一个简单的二叉树</span><br>TreeNode* <span class="hljs-title function_">buildSampleTree</span><span class="hljs-params">()</span> {<br>    TreeNode* root = createNode(<span class="hljs-number">1</span>);<br>    root-&gt;left = createNode(<span class="hljs-number">2</span>);<br>    root-&gt;right = createNode(<span class="hljs-number">3</span>);<br>    root-&gt;left-&gt;left = createNode(<span class="hljs-number">4</span>);<br>    root-&gt;left-&gt;right = createNode(<span class="hljs-number">5</span>);<br>    <span class="hljs-keyword">return</span> root;<br>}<br><br><span class="hljs-comment">// 释放链式存储的二叉树内存</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">freeTree</span><span class="hljs-params">(TreeNode* root)</span> {<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>) {<br>        <span class="hljs-keyword">return</span>;<br>    }<br>    freeTree(root-&gt;left);<br>    freeTree(root-&gt;right);<br>    <span class="hljs-built_in">free</span>(root);<br>}<br><br><span class="hljs-comment">// 使用示例</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">demonstrateStorageMethods</span><span class="hljs-params">()</span> {<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"=== 二叉树两种存储方式演示 ===\n"</span>);<br><br>    <span class="hljs-comment">// 1. 链式存储法</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n1. 链式存储法:\n"</span>);<br>    TreeNode* linkedTree = buildSampleTree();<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"前序遍历结果: "</span>);<br>    preOrderLinked(linkedTree);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);<br>    freeTree(linkedTree);<br><br>    <span class="hljs-comment">// 2. 顺序存储法</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n2. 顺序存储法:\n"</span>);<br>    buildCompleteBinaryTree();<br>    printArrayTree();<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"前序遍历结果: "</span>);<br>    preOrderArray(<span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);<br>}<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">对比两种存储方式：</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">1. 链式存储法：</span><br><span class="hljs-comment">   - 优点：灵活，不需要大片连续内存，插入删除节点方便</span><br><span class="hljs-comment">   - 缺点：需要额外空间存储指针，遍历时需要多次内存跳转</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">2. 顺序存储法：</span><br><span class="hljs-comment">   - 优点：节省指针空间，访问节点速度快（通过数组下标直接访问）</span><br><span class="hljs-comment">   - 缺点：对于非完全二叉树会造成空间浪费，插入删除节点复杂</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {<br>    demonstrateStorageMethods();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>}<br></code></pre></td></tr></table></figure><h3 id="顺序存储法"><a href="#顺序存储法" class="headerlink" title="顺序存储法"></a><strong>顺序存储法</strong></h3><p>顺序存储法是基于数组实现的，数组是一段有序的内存空间，如果我们把跟节点的坐标定位<code>i</code>=1，左节点就是 2 <em> <code>i</code> = 2，右节点 2 </em> <code>i</code>+ 1 = 3，以此类推，每个节点都这么算，然后就将树转化成数组了，反过来，按照这种规则我们也能将数组转化成一棵树。</p><p>于是在这里我们就能发现一个问题：如果这是一颗不平衡的二叉树是不是会造成大量的空间浪费？这就是为什么需要分完全二叉树和非完全二叉树，分别来看看这两种树基于数组的存储模式。</p><p>顺序存储法的 C 语言实现：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_TREE_SIZE 100</span><br><br><span class="hljs-comment">// 用数组表示二叉树</span><br><span class="hljs-type">int</span> treeArray[MAX_TREE_SIZE];<br><span class="hljs-type">int</span> treeSize = <span class="hljs-number">0</span>;<br><br><span class="hljs-comment">// 初始化数组</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">initTreeArray</span><span class="hljs-params">()</span> {<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; MAX_TREE_SIZE; i++) {<br>        treeArray[i] = <span class="hljs-number">-1</span>; <span class="hljs-comment">// -1表示空节点</span><br>    }<br>}<br><br><span class="hljs-comment">// 在指定位置插入节点</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">insertNode</span><span class="hljs-params">(<span class="hljs-type">int</span> index, <span class="hljs-type">int</span> data)</span> {<br>    <span class="hljs-keyword">if</span> (index &gt;= MAX_TREE_SIZE) {<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"数组越界\n"</span>);<br>        <span class="hljs-keyword">return</span>;<br>    }<br>    treeArray[index] = data;<br>    <span class="hljs-keyword">if</span> (index &gt;= treeSize) {<br>        treeSize = index + <span class="hljs-number">1</span>;<br>    }<br>}<br><br><span class="hljs-comment">// 获取父节点索引</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">getParentIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> {<br>    <span class="hljs-keyword">if</span> (index &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    <span class="hljs-keyword">return</span> (index - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;<br>}<br><br><span class="hljs-comment">// 获取左子节点索引</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">getLeftChildIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> {<br>    <span class="hljs-type">int</span> leftIndex = <span class="hljs-number">2</span> * index + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span> (leftIndex &lt; MAX_TREE_SIZE) ? leftIndex : <span class="hljs-number">-1</span>;<br>}<br><br><span class="hljs-comment">// 获取右子节点索引</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">getRightChildIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> {<br>    <span class="hljs-type">int</span> rightIndex = <span class="hljs-number">2</span> * index + <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">return</span> (rightIndex &lt; MAX_TREE_SIZE) ? rightIndex : <span class="hljs-number">-1</span>;<br>}<br><br><span class="hljs-comment">// 示例：构建完全二叉树</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">buildCompleteBinaryTree</span><span class="hljs-params">()</span> {<br>    initTreeArray();<br>    <span class="hljs-comment">// 构建一个简单的完全二叉树: 1, 2, 3, 4, 5</span><br>    <span class="hljs-comment">//       1</span><br>    <span class="hljs-comment">//      / \</span><br><span class="hljs-comment">    //     2   3</span><br>    <span class="hljs-comment">//    / \</span><br><span class="hljs-comment">    //   4   5</span><br>    insertNode(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);  <span class="hljs-comment">// 根节点</span><br>    insertNode(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);  <span class="hljs-comment">// 1的左子节点</span><br>    insertNode(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>);  <span class="hljs-comment">// 1的右子节点</span><br>    insertNode(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>);  <span class="hljs-comment">// 2的左子节点</span><br>    insertNode(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>);  <span class="hljs-comment">// 2的右子节点</span><br>}<br><br><span class="hljs-comment">// 打印数组表示的二叉树（层序遍历）</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">printArrayTree</span><span class="hljs-params">()</span> {<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"数组存储的二叉树: "</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; treeSize; i++) {<br>        <span class="hljs-keyword">if</span> (treeArray[i] != <span class="hljs-number">-1</span>) {<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>, treeArray[i]);<br>        } <span class="hljs-keyword">else</span> {<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"NULL "</span>);<br>        }<br>    }<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);<br>}<br><br><span class="hljs-comment">// 前序遍历（数组实现）</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">preOrderArray</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> {<br>    <span class="hljs-keyword">if</span> (index &gt;= treeSize || treeArray[index] == <span class="hljs-number">-1</span>) {<br>        <span class="hljs-keyword">return</span>;<br>    }<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>, treeArray[index]);<br>    preOrderArray(<span class="hljs-number">2</span> * index + <span class="hljs-number">1</span>);  <span class="hljs-comment">// 左子树</span><br>    preOrderArray(<span class="hljs-number">2</span> * index + <span class="hljs-number">2</span>);  <span class="hljs-comment">// 右子树</span><br>}<br><br><span class="hljs-comment">// 前序遍历（链式存储）</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">preOrderLinked</span><span class="hljs-params">(TreeNode* root)</span> {<br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>) {<br>        <span class="hljs-keyword">return</span>;<br>    }<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>, root-&gt;data);<br>    preOrderLinked(root-&gt;left);<br>    preOrderLinked(root-&gt;right);<br>}<br><br></code></pre></td></tr></table></figure><p>对比两种存储方式：</p><ol><li><p><strong>链式存储法</strong>：</p><ul><li>优点：灵活，不需要大片连续内存，插入删除节点方便</li><li>缺点：需要额外空间存储指针，遍历时需要多次内存跳转</li></ul></li><li><p><strong>顺序存储法</strong>：</p><ul><li>优点：节省指针空间，访问节点速度快（通过数组下标直接访问）</li><li>缺点：对于非完全二叉树会造成空间浪费，插入删除节点复杂</li></ul></li></ol><h3 id="完全二叉树顺序存储法"><a href="#完全二叉树顺序存储法" class="headerlink" title="完全二叉树顺序存储法"></a><strong>完全二叉树顺序存储法</strong></h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs less">完全二叉树结构：<br>        <span class="hljs-number">1</span><br>       / \<br>      <span class="hljs-number">2</span>   <span class="hljs-number">3</span><br>     / \ / \<br>    <span class="hljs-number">4</span>  <span class="hljs-number">5</span> <span class="hljs-number">6</span>  <span class="hljs-number">7</span><br>   /<br>  <span class="hljs-number">8</span><br><br>数组存储方式（索引从<span class="hljs-number">0</span>开始）：<br>索引:  <span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[2]</span><span class="hljs-selector-attr">[3]</span><span class="hljs-selector-attr">[4]</span><span class="hljs-selector-attr">[5]</span><span class="hljs-selector-attr">[6]</span><span class="hljs-selector-attr">[7]</span><br>值:    <span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[2]</span><span class="hljs-selector-attr">[3]</span><span class="hljs-selector-attr">[4]</span><span class="hljs-selector-attr">[5]</span><span class="hljs-selector-attr">[6]</span><span class="hljs-selector-attr">[7]</span><span class="hljs-selector-attr">[8]</span><br><br>父子节点关系：<br><span class="hljs-selector-tag">-</span> 父节点索引为 <span class="hljs-selector-tag">i</span>，则左子节点索引为 <span class="hljs-number">2</span>*<span class="hljs-selector-tag">i</span>+<span class="hljs-number">1</span>，右子节点索引为 <span class="hljs-number">2</span>*<span class="hljs-selector-tag">i</span>+<span class="hljs-number">2</span><br><span class="hljs-selector-tag">-</span> 子节点索引为 <span class="hljs-selector-tag">j</span>，则父节点索引为 (j-<span class="hljs-number">1</span>)/<span class="hljs-number">2</span>（整数除法）<br><br>具体对应关系：<br><span class="hljs-selector-tag">-</span> 节点<span class="hljs-number">1</span>(索引<span class="hljs-number">0</span>): 左子节点<span class="hljs-number">2</span>(索引<span class="hljs-number">1</span>), 右子节点<span class="hljs-number">3</span>(索引<span class="hljs-number">2</span>)<br><span class="hljs-selector-tag">-</span> 节点<span class="hljs-number">2</span>(索引<span class="hljs-number">1</span>): 左子节点<span class="hljs-number">4</span>(索引<span class="hljs-number">3</span>), 右子节点<span class="hljs-number">5</span>(索引<span class="hljs-number">4</span>)<br><span class="hljs-selector-tag">-</span> 节点<span class="hljs-number">3</span>(索引<span class="hljs-number">2</span>): 左子节点<span class="hljs-number">6</span>(索引<span class="hljs-number">5</span>), 右子节点<span class="hljs-number">7</span>(索引<span class="hljs-number">6</span>)<br><span class="hljs-selector-tag">-</span> 节点<span class="hljs-number">4</span>(索引<span class="hljs-number">3</span>): 左子节点<span class="hljs-number">8</span>(索引<span class="hljs-number">7</span>), 无右子节点<br><span class="hljs-selector-tag">-</span> 节点<span class="hljs-number">5</span><span class="hljs-selector-tag">-8</span>(索引<span class="hljs-number">4</span>-<span class="hljs-number">7</span>): 均为叶节点，无子节点<br></code></pre></td></tr></table></figure><h3 id="非完全二叉树顺序存储法"><a href="#非完全二叉树顺序存储法" class="headerlink" title="非完全二叉树顺序存储法"></a><strong>非完全二叉树顺序存储法</strong></h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs less">完全二叉树结构：<br>        <span class="hljs-number">1</span><br>       / \<br>      <span class="hljs-number">2</span>   <span class="hljs-number">3</span><br>     / \ / \<br>    <span class="hljs-number">4</span>  <span class="hljs-number">5</span> <span class="hljs-number">6</span>  <span class="hljs-number">7</span><br>   /<br>  <span class="hljs-number">8</span><br><br>数组存储方式（索引从<span class="hljs-number">0</span>开始）：<br>索引:  <span class="hljs-selector-attr">[0]</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[2]</span><span class="hljs-selector-attr">[3]</span><span class="hljs-selector-attr">[4]</span><span class="hljs-selector-attr">[5]</span><span class="hljs-selector-attr">[6]</span><span class="hljs-selector-attr">[7]</span><br>值:    <span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[2]</span><span class="hljs-selector-attr">[3]</span><span class="hljs-selector-attr">[4]</span><span class="hljs-selector-attr">[5]</span><span class="hljs-selector-attr">[6]</span><span class="hljs-selector-attr">[7]</span><span class="hljs-selector-attr">[8]</span><br><br>父子节点关系：<br><span class="hljs-selector-tag">-</span> 父节点索引为 <span class="hljs-selector-tag">i</span>，则左子节点索引为 <span class="hljs-number">2</span>*<span class="hljs-selector-tag">i</span>+<span class="hljs-number">1</span>，右子节点索引为 <span class="hljs-number">2</span>*<span class="hljs-selector-tag">i</span>+<span class="hljs-number">2</span><br><span class="hljs-selector-tag">-</span> 子节点索引为 <span class="hljs-selector-tag">j</span>，则父节点索引为 (j-<span class="hljs-number">1</span>)/<span class="hljs-number">2</span>（整数除法）<br><br>具体对应关系：<br><span class="hljs-selector-tag">-</span> 节点<span class="hljs-number">1</span>(索引<span class="hljs-number">0</span>): 左子节点<span class="hljs-number">2</span>(索引<span class="hljs-number">1</span>), 右子节点<span class="hljs-number">3</span>(索引<span class="hljs-number">2</span>)<br><span class="hljs-selector-tag">-</span> 节点<span class="hljs-number">2</span>(索引<span class="hljs-number">1</span>): 左子节点<span class="hljs-number">4</span>(索引<span class="hljs-number">3</span>), 右子节点<span class="hljs-number">5</span>(索引<span class="hljs-number">4</span>)<br><span class="hljs-selector-tag">-</span> 节点<span class="hljs-number">3</span>(索引<span class="hljs-number">2</span>): 左子节点<span class="hljs-number">6</span>(索引<span class="hljs-number">5</span>), 右子节点<span class="hljs-number">7</span>(索引<span class="hljs-number">6</span>)<br><span class="hljs-selector-tag">-</span> 节点<span class="hljs-number">4</span>(索引<span class="hljs-number">3</span>): 左子节点<span class="hljs-number">8</span>(索引<span class="hljs-number">7</span>), 无右子节点<br><span class="hljs-selector-tag">-</span> 节点<span class="hljs-number">5</span><span class="hljs-selector-tag">-8</span>(索引<span class="hljs-number">4</span>-<span class="hljs-number">7</span>): 均为叶节点，无子节点<br></code></pre></td></tr></table></figure><p>从图中将树转化成数组之后可以看出，完全二叉树用数组来存储只浪费了一个下标为 0 的存储空间，非完全二叉树则浪费了大量的空间。<br><strong>「如果树为完全二叉树，用数组存储比链式存储节约空间，因为数组存储不需要存储左右节点的信息」</strong></p><hr><h2 id="二叉树遍历"><a href="#二叉树遍历" class="headerlink" title="二叉树遍历"></a><strong>二叉树遍历</strong></h2><p>要了解二叉树的遍历，我们首先需要实例化出一颗二叉树，我们采用链式存储的方式来定义树，实例化树需要树的节点信息，用来存放该节点的信息，因为我们才用的是链式存储，所以我们的节点信息如下。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 定义一棵树</span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">/* 树节点的定义 */</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_TREE_SIZE 100</span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span></span><br><span class="hljs-class">{</span><br>  TElemType data;<br>  <span class="hljs-type">int</span> parent; <span class="hljs-comment">/* 父节点位置域 */</span><br>} PTNode;<br><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span></span><br><span class="hljs-class">{</span><br>  PTNode nodes[MAX_TREE_SIZE];<br>  <span class="hljs-type">int</span> n; <span class="hljs-comment">/* 节点数 */</span><br>} PTree;<br><br><span class="hljs-comment">/* 二叉树节点的定义 */</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TreeNode</span> {</span><br>    <span class="hljs-type">int</span> data;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TreeNode</span>* <span class="hljs-title">left</span>;</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TreeNode</span>* <span class="hljs-title">right</span>;</span><br>} TreeNode;<br></code></pre></td></tr></table></figure><ol><li>使用  <code>PTNode</code>  结构体表示树的节点，包含：<ul><li><code>data</code>：存储节点数据（类型为  <code>TElemType</code>）</li><li><code>parent</code>：存储父节点在数组中的索引位置</li></ul></li><li>使用  <code>PTree</code>  结构体表示整棵树，包含：<ul><li><code>nodes</code>：节点数组，最多可容纳  <code>MAX_TREE_SIZE</code>  个节点</li><li><code>n</code>：实际节点数量</li></ul></li></ol><p>定义完节点信息之后，我们就可以初始化一颗树啦，下面是初始化树的过程:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs c">TreeNode* <span class="hljs-title function_">buildTree</span><span class="hljs-params">()</span> {<br><span class="hljs-comment">// 创建测试用的二叉树</span><br>TreeNode* t1 = (TreeNode*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(TreeNode));<br>TreeNode* t2 = (TreeNode*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(TreeNode));<br>TreeNode* t3 = (TreeNode*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(TreeNode));<br>TreeNode* t4 = (TreeNode*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(TreeNode));<br>TreeNode* t5 = (TreeNode*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(TreeNode));<br>TreeNode* t6 = (TreeNode*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(TreeNode));<br>TreeNode* t7 = (TreeNode*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(TreeNode));<br>TreeNode* t8 = (TreeNode\*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(TreeNode));<br><br>    t1-&gt;data = <span class="hljs-number">1</span>;<br>    t2-&gt;data = <span class="hljs-number">2</span>;<br>    t3-&gt;data = <span class="hljs-number">3</span>;<br>    t4-&gt;data = <span class="hljs-number">4</span>;<br>    t5-&gt;data = <span class="hljs-number">5</span>;<br>    t6-&gt;data = <span class="hljs-number">6</span>;<br>    t7-&gt;data = <span class="hljs-number">7</span>;<br>    t8-&gt;data = <span class="hljs-number">8</span>;<br><br>    t1-&gt;left = t2;<br>    t1-&gt;right = t3;<br>    t2-&gt;left = t4;<br>    t4-&gt;right = t7;<br>    t3-&gt;left = t5;<br>    t3-&gt;right = t6;<br>    t6-&gt;left = t8;<br><br>    t2-&gt;right = <span class="hljs-literal">NULL</span>;<br>    t3-&gt;left = t5;<br>    t3-&gt;right = t6;<br>    t4-&gt;left = <span class="hljs-literal">NULL</span>;<br>    t4-&gt;right = t7;<br>    t5-&gt;left = <span class="hljs-literal">NULL</span>;<br>    t5-&gt;right = <span class="hljs-literal">NULL</span>;<br>    t6-&gt;left = t8;<br>    t6-&gt;right = <span class="hljs-literal">NULL</span>;<br>    t7-&gt;left = <span class="hljs-literal">NULL</span>;<br>    t7-&gt;right = <span class="hljs-literal">NULL</span>;<br>    t8-&gt;left = <span class="hljs-literal">NULL</span>;<br>    t8-&gt;right = <span class="hljs-literal">NULL</span>;<br><br>    <span class="hljs-keyword">return</span> t1;<br><br>}<br><br></code></pre></td></tr></table></figure><p>经过上面步骤之后，我们的树就长成下图所示的样子，数字代表该节点的值。</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs less">构建的二叉树结构：<br><br>        <span class="hljs-number">1</span><br>       / \<br>      <span class="hljs-number">2</span>   <span class="hljs-number">3</span><br>     /   / \<br>    <span class="hljs-number">4</span>   <span class="hljs-number">5</span>   <span class="hljs-number">6</span><br>     \     /<br>      <span class="hljs-number">7</span>   <span class="hljs-number">8</span><br><br><span class="hljs-selector-tag">t1-</span>&gt;<span class="hljs-selector-tag">left</span> = <span class="hljs-selector-tag">t2</span>; <span class="hljs-comment">// 节点1的左子节点是节点2</span><br><span class="hljs-selector-tag">t1-</span>&gt;<span class="hljs-selector-tag">right</span> = <span class="hljs-selector-tag">t3</span>; <span class="hljs-comment">// 节点1的右子节点是节点3</span><br><span class="hljs-selector-tag">t2-</span>&gt;<span class="hljs-selector-tag">left</span> = <span class="hljs-selector-tag">t4</span>; <span class="hljs-comment">// 节点2的左子节点是节点4</span><br><span class="hljs-selector-tag">t4-</span>&gt;<span class="hljs-selector-tag">right</span> = <span class="hljs-selector-tag">t7</span>; <span class="hljs-comment">// 节点4的右子节点是节点7</span><br><span class="hljs-selector-tag">t3-</span>&gt;<span class="hljs-selector-tag">left</span> = <span class="hljs-selector-tag">t5</span>; <span class="hljs-comment">// 节点3的左子节点是节点5</span><br><span class="hljs-selector-tag">t3-</span>&gt;<span class="hljs-selector-tag">right</span> = <span class="hljs-selector-tag">t6</span>; <span class="hljs-comment">// 节点3的右子节点是节点6</span><br><span class="hljs-selector-tag">t6-</span>&gt;<span class="hljs-selector-tag">left</span> = <span class="hljs-selector-tag">t8</span>; <span class="hljs-comment">// 节点6的左子节点是节点8</span><br><br>节点连接关系：<br><span class="hljs-selector-tag">-</span> 节点<span class="hljs-number">1</span>是根节点，左子节点为<span class="hljs-number">2</span>，右子节点为<span class="hljs-number">3</span><br><span class="hljs-selector-tag">-</span> 节点<span class="hljs-number">2</span>的左子节点为<span class="hljs-number">4</span>，右子节点为<span class="hljs-selector-tag">NULL</span><br><span class="hljs-selector-tag">-</span> 节点<span class="hljs-number">3</span>的左子节点为<span class="hljs-number">5</span>，右子节点为<span class="hljs-number">6</span><br><span class="hljs-selector-tag">-</span> 节点<span class="hljs-number">4</span>的左子节点为<span class="hljs-selector-tag">NULL</span>，右子节点为<span class="hljs-number">7</span><br><span class="hljs-selector-tag">-</span> 节点<span class="hljs-number">5</span>的左子节点为<span class="hljs-selector-tag">NULL</span>，右子节点为<span class="hljs-selector-tag">NULL</span><br><span class="hljs-selector-tag">-</span> 节点<span class="hljs-number">6</span>的左子节点为<span class="hljs-number">8</span>，右子节点为<span class="hljs-selector-tag">NULL</span><br><span class="hljs-selector-tag">-</span> 节点<span class="hljs-number">7</span>和<span class="hljs-number">8</span>都是叶节点，没有子节点<br></code></pre></td></tr></table></figure><p>有了树之后，我们就可以对树进行遍历<br>二叉树的遍历有三种方式，前序遍历，中序遍历，后续遍历三种遍历方式，三种遍历方式与节点输出的顺序有关系</p><h3 id="前序遍历"><a href="#前序遍历" class="headerlink" title="前序遍历"></a><strong>前序遍历</strong></h3><p><strong>「前序遍历」</strong>：对于树中的任意节点来说，先打印这个节点，然后再打印它的左子树，最后打印它的右子树。</p><p class='item-img' data-src='https://pic1.zhimg.com/v2-8c5bca63a9ce3aa30a46e37942281684_b.webp'><img src="https://pic1.zhimg.com/v2-8c5bca63a9ce3aa30a46e37942281684_b.webp" alt="动图封面"></p><p>理解了前序遍历的概念和看完前序遍历执行流程动态图之后，你心里一定很想知道，在代码中如何怎么实现树的前序遍历？二叉树的遍历非常简单，一般都是采用递归的方式进行遍历，我们来看看前序遍历的代码：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><br><span class="hljs-comment">// 先序遍历，递归实现 先打印本身，再打印左节点，在打印右节点</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">preOrder</span><span class="hljs-params">(TreeNode\* root)</span> {<br><span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>) {<br><span class="hljs-keyword">return</span>;<br>}<br><span class="hljs-comment">// 输出本身</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>, root-&gt;data);<br><span class="hljs-comment">// 遍历左节点</span><br>preOrder(root-&gt;left);<br><span class="hljs-comment">// 遍历右节点</span><br>preOrder(root-&gt;right);<br>}<br><br></code></pre></td></tr></table></figure><h3 id="中序遍历"><a href="#中序遍历" class="headerlink" title="中序遍历"></a><strong>中序遍历</strong></h3><p><strong>「中序遍历」</strong>：对于树中的任意节点来说，先打印它的左子树，然后再打印它本身，最后打印它的右子树。</p><p>跟前序遍历一样，我们来看看中序遍历的执行流程动态图。</p><p class='item-img' data-src='https://pic3.zhimg.com/v2-46511b7421ee1ce8534fcbd580d9a316_b.webp'><img src="https://pic3.zhimg.com/v2-46511b7421ee1ce8534fcbd580d9a316_b.webp" alt="动图封面"></p><p>中序遍历的代码：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><br><span class="hljs-comment">// 中序遍历 先打印左节点，再输出本身，最后输出右节点</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">inOrder</span><span class="hljs-params">(TreeNode\* root)</span> {<br><span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>) {<br><span class="hljs-keyword">return</span>;<br>}<br>inOrder(root-&gt;left);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>, root-&gt;data);<br>inOrder(root-&gt;right);<br>}<br><br></code></pre></td></tr></table></figure><h3 id="后序遍历"><a href="#后序遍历" class="headerlink" title="后序遍历"></a>后序遍历</h3><p><strong>「后序遍历」</strong>：对于树中的任意节点来说，先打印它的左子树，然后再打印它的右子树，最后打印这个节点本身。</p><p>跟前两种遍历一样，理解概念之后，我们还是先来看张图。</p><p class='item-img' data-src='https://pic2.zhimg.com/v2-99b3066d8e4f5d268302acea5e20568f_b.webp'><img src="https://pic2.zhimg.com/v2-99b3066d8e4f5d268302acea5e20568f_b.webp" alt="动图封面"></p><p>后序遍历的实现代码：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><br><span class="hljs-comment">// 后序遍历 先打印左节点，再输出右节点，最后才输出本身</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">postOrder</span><span class="hljs-params">(TreeNode\* root)</span> {<br><span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>) {<br><span class="hljs-keyword">return</span>;<br>}<br>postOrder(root-&gt;left);<br>postOrder(root-&gt;right);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>, root-&gt;data);<br>}<br><br></code></pre></td></tr></table></figure><p>二叉树有三种遍历方式，但都是一样的，只是输出的顺序不一样</p><p>接下来还有一种常用而且比较特殊的二叉树：<strong>「二叉查找树」</strong></p><h2 id="二叉查找树"><a href="#二叉查找树" class="headerlink" title="二叉查找树"></a><strong>二叉查找树</strong></h2><p>二叉查找树又叫二叉搜索树，从名字中我们就能够知道，这种树在查找方面一定有过人的优势，事实确实如此，二叉查找树确实是为查找而生的树，但是它不仅仅支持快速查找数据，还支持快速插入、删除一个数据</p><p><strong>「二叉查找树」</strong>：在树中的任意一个节点，其左子树中的每个节点的值，都要小于这个节点的值，而右子树节点的值都大于这个节点的值，下面定义了一颗二叉查找树</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs less">        <span class="hljs-number">62</span><br>       /  \<br>      <span class="hljs-number">58</span>   <span class="hljs-number">88</span><br>     /  \ /  \<br>    <span class="hljs-number">47</span>  <span class="hljs-number">51</span> <span class="hljs-number">73</span>  <span class="hljs-number">99</span><br>   /           /<br>  <span class="hljs-number">35</span>          <span class="hljs-number">93</span><br>   \<br>    <span class="hljs-number">37</span><br>   /  \<br>  <span class="hljs-number">36</span>  <span class="hljs-number">39</span><br>       \<br>        <span class="hljs-number">42</span><br><br><span class="hljs-selector-tag">-</span> 对于任意节点，其左子树中的所有节点值都小于该节点值<br><span class="hljs-selector-tag">-</span> 其右子树中的所有节点值都大于该节点值<br><span class="hljs-selector-tag">-</span> 根节点 `<span class="hljs-number">62</span>`：左子树所有节点（<span class="hljs-number">58</span>, <span class="hljs-number">47</span>, <span class="hljs-number">35</span>, <span class="hljs-number">37</span>, <span class="hljs-number">36</span>, <span class="hljs-number">39</span>, <span class="hljs-number">42</span>, <span class="hljs-number">51</span>）都小于 <span class="hljs-number">62</span>；右子树所有节点（<span class="hljs-number">88</span>, <span class="hljs-number">73</span>, <span class="hljs-number">99</span>, <span class="hljs-number">93</span>）都大于 <span class="hljs-number">62</span><br><span class="hljs-selector-tag">-</span> 节点 `<span class="hljs-number">58</span>`：左子树（<span class="hljs-number">47</span>, <span class="hljs-number">35</span>, <span class="hljs-number">37</span>, <span class="hljs-number">36</span>, <span class="hljs-number">39</span>, <span class="hljs-number">42</span>）都小于 <span class="hljs-number">58</span>；右子树（<span class="hljs-number">51</span>）大于 <span class="hljs-number">58</span><br><span class="hljs-selector-tag">-</span> 节点 `<span class="hljs-number">88</span>`：左子树（<span class="hljs-number">73</span>）小于 <span class="hljs-number">88</span>；右子树（<span class="hljs-number">99</span>, <span class="hljs-number">93</span>）大于 <span class="hljs-number">88</span><br></code></pre></td></tr></table></figure><p>根据二叉查找树的定义，每棵树的左节点的值要小于这父节点，右节点的值要大于父节点<br>下面从二叉查找树的查找开始学习二叉查找树</p><h2 id="二叉查找树的查找操作"><a href="#二叉查找树的查找操作" class="headerlink" title="二叉查找树的查找操作"></a><strong>二叉查找树的查找操作</strong></h2><p>由于二叉查找树的特性，我们需要查找一个数据，先跟跟节点比较，如果值等于跟节点，则返回根节点，如果小于根节点，则必然在左子树这边，只要递归查找左子树就行，如果大于，这在右子树这边，递归右子树即可。这样就能够实现快速查找，因为每次查找都减少了一半的数据，跟二分查找有点相似，快速插入、删除都是居于这个特性实现的。</p><p>下面用一幅动态图来加强对二叉查找树查找流程的理解，在上面的这颗二叉查找树中找出值等于 37 的节点：</p><p class='item-img' data-src='https://pic1.zhimg.com/v2-dbca7edcda530ecf983b42216772dfae_b.webp'><img src="https://pic1.zhimg.com/v2-dbca7edcda530ecf983b42216772dfae_b.webp" alt="动图"></p><ul><li>1、先用 37 跟 62 比较，37 &lt; 62 ，在左子树中继续查找</li><li>２、左子树的节点值为 58，37 &lt; 58 ，继续在左子树中查找</li><li>３、左子树的节点值为 47，37 &lt; 47，继续在左子树中查找</li><li>４、左子树的节点值为 35，37 &gt; 35，在右子树中查找</li><li>５、右子树中的节点值为 37，37 = 37 ，返回该节点</li></ul><p>讲完了查找的概念之后，我们一起来看看二叉查找树的查找操作的代码实现</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs c"><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 在二叉查找树中查找指定值的节点</span><br><span class="hljs-comment"> * @param tree 二叉查找树的根节点</span><br><span class="hljs-comment"> * @param data 要查找的数据值</span><br><span class="hljs-comment"> * @return 找到的节点指针，如果未找到则返回NULL</span><br><span class="hljs-comment"> */</span><br>TreeNode* <span class="hljs-title function_">find</span><span class="hljs-params">(TreeNode* tree, <span class="hljs-type">int</span> data)</span> {<br>    <span class="hljs-comment">// 从根节点开始遍历</span><br>    TreeNode* current = tree;<br><br>    <span class="hljs-comment">// 当当前节点不为空时继续查找</span><br>    <span class="hljs-keyword">while</span> (current != <span class="hljs-literal">NULL</span>) {<br>        <span class="hljs-comment">// 如果要查找的值小于当前节点值，在左子树中查找</span><br>        <span class="hljs-keyword">if</span> (data &lt; current-&gt;data) {<br>            current = current-&gt;left;<br>        }<br>        <span class="hljs-comment">// 如果要查找的值大于当前节点值，在右子树中查找</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data &gt; current-&gt;data) {<br>            current = current-&gt;right;<br>        }<br>        <span class="hljs-comment">// 如果值相等，找到了目标节点</span><br>        <span class="hljs-keyword">else</span> {<br>            <span class="hljs-keyword">return</span> current;<br>        }<br>    }<br><br>    <span class="hljs-comment">// 未找到目标节点</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<br>}<br><br></code></pre></td></tr></table></figure><h2 id="二叉查找树的插入操作"><a href="#二叉查找树的插入操作" class="headerlink" title="二叉查找树的插入操作"></a><strong>二叉查找树的插入操作</strong></h2><p>插入跟查找差不多，也是从根节点开始找，如果要插入的数据比节点的数据大，并且节点的右子树为空，就将新数据直接插到右子节点的位置；如果不为空，就再递归遍历右子树，查找插入位置。同理，如果要插入的数据比节点数值小，并且节点的左子树为空，就将新数据插入到左子节点的位置；如果不为空，就再递归遍历左子树，查找插入位置。</p><p>假设我们要插入 63 ，我们用一张动态图来看看插入的流程。</p><p class='item-img' data-src='https://pica.zhimg.com/v2-a3bb96d446f90e825f758a560e740f8a_b.webp'><img src="https://pica.zhimg.com/v2-a3bb96d446f90e825f758a560e740f8a_b.webp" alt="动图封面"></p><ul><li>1、63 &gt; 62 ，在树的右子树继续查找.</li><li>2、63 &lt; 88 ，在树的左子树继续查找</li><li>3、63 &lt; 73 ,因为 73 是叶子节点，所以 63 就成为了 73 的左子树。</li></ul><p>我们来看看二叉查找树的插入操作实现代码</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 在二叉查找树中查找指定值的节点</span><br><span class="hljs-comment"> * @param tree 二叉查找树的根节点</span><br><span class="hljs-comment"> * @param data 要查找的数据值</span><br><span class="hljs-comment"> * @return 找到的节点指针，如果未找到则返回NULL</span><br><span class="hljs-comment"> */</span><br>TreeNode* <span class="hljs-title function_">find</span><span class="hljs-params">(TreeNode* tree, <span class="hljs-type">int</span> data)</span> {<br>    <span class="hljs-comment">// 从根节点开始遍历</span><br>    TreeNode* current = tree;<br><br>    <span class="hljs-comment">// 当当前节点不为空时继续查找</span><br>    <span class="hljs-keyword">while</span> (current != <span class="hljs-literal">NULL</span>) {<br>        <span class="hljs-comment">// 如果要查找的值小于当前节点值，在左子树中查找</span><br>        <span class="hljs-keyword">if</span> (data &lt; current-&gt;data) {<br>            current = current-&gt;left;<br>        }<br>        <span class="hljs-comment">// 如果要查找的值大于当前节点值，在右子树中查找</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (data &gt; current-&gt;data) {<br>            current = current-&gt;right;<br>        }<br>        <span class="hljs-comment">// 如果值相等，找到了目标节点</span><br>        <span class="hljs-keyword">else</span> {<br>            <span class="hljs-keyword">return</span> current;<br>        }<br>    }<br><br>    <span class="hljs-comment">// 未找到目标节点</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;<br>}<br></code></pre></td></tr></table></figure><h2 id="二叉查找树的删除操作"><a href="#二叉查找树的删除操作" class="headerlink" title="二叉查找树的删除操作"></a><strong>二叉查找树的删除操作</strong></h2><p>删除的逻辑要比查找和插入复杂一些，删除分一下三种情况：</p><p><strong>「第一种情况」</strong>：如果要删除的节点没有子节点，我们只需要直接将父节点中，指向要删除节点的指针置为 null。比如图中的删除节点 51。</p><p><strong>「第二种情况」</strong>：如果要删除的节点只有一个子节点（只有左子节点或者右子节点），我们只需要更新父节点中，指向要删除节点的指针，让它指向要删除节点的子节点就可以了。比如图中的删除节点 35。</p><p><strong>「第三种情况」</strong>：如果要删除的节点有两个子节点，这就比较复杂了。我们需要找到这个节点的右子树中的最小节点，把它替换到要删除的节点上。然后再删除掉这个最小节点，因为最小节点肯定没有左子节点（如果有左子结点，那就不是最小节点了），所以，我们可以应用上面两条规则来删除这个最小节点。比如图中的删除节点 88</p><p>前面两种情况稍微简单一些，第三种情况，我制作了一张动态图，希望能对你有所帮助。</p><p class='item-img' data-src='https://picx.zhimg.com/v2-ee38bef7b1b648d935dfa0c4cc0882c5_b.webp'><img src="https://picx.zhimg.com/v2-ee38bef7b1b648d935dfa0c4cc0882c5_b.webp" alt="动图封面"></p><p>我们来看看二叉查找树的删除操作实现代码</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> <span class="hljs-title function_">delete</span><span class="hljs-params">(TreeNode** tree, <span class="hljs-type">int</span> data)</span> {<br>    TreeNode* p = *tree; <span class="hljs-comment">// p指向要删除的节点，初始化指向根节点</span><br>    TreeNode* pp = <span class="hljs-literal">NULL</span>; <span class="hljs-comment">// pp记录的是p的父节点</span><br>    <span class="hljs-keyword">while</span> (p != <span class="hljs-literal">NULL</span> &amp;&amp; p-&gt;data != data) {<br>        pp = p;<br>        <span class="hljs-keyword">if</span> (data &gt; p-&gt;data) p = p-&gt;right;<br>        <span class="hljs-keyword">else</span> p = p-&gt;left;<br>    }<br>    <span class="hljs-keyword">if</span> (p == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// 没有找到</span><br><br>    <span class="hljs-comment">// 要删除的节点有两个子节点</span><br>    <span class="hljs-keyword">if</span> (p-&gt;left != <span class="hljs-literal">NULL</span> &amp;&amp; p-&gt;right != <span class="hljs-literal">NULL</span>) { <span class="hljs-comment">// 查找右子树中最小节点</span><br>        TreeNode* minP = p-&gt;right;<br>        TreeNode* minPP = p; <span class="hljs-comment">// minPP表示minP的父节点</span><br>        <span class="hljs-keyword">while</span> (minP-&gt;left != <span class="hljs-literal">NULL</span>) {<br>            minPP = minP;<br>            minP = minP-&gt;left;<br>        }<br>        p-&gt;data = minP-&gt;data; <span class="hljs-comment">// 将minP的数据替换到p中</span><br>        p = minP; <span class="hljs-comment">// 下面就变成了删除minP了</span><br>        pp = minPP;<br>    }<br><br>    <span class="hljs-comment">// 删除节点是叶子节点或者仅有一个子节点</span><br>    TreeNode* child; <span class="hljs-comment">// p的子节点</span><br>    <span class="hljs-keyword">if</span> (p-&gt;left != <span class="hljs-literal">NULL</span>) child = p-&gt;left;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (p-&gt;right != <span class="hljs-literal">NULL</span>) child = p-&gt;right;<br>    <span class="hljs-keyword">else</span> child = <span class="hljs-literal">NULL</span>;<br><br>    <span class="hljs-keyword">if</span> (pp == <span class="hljs-literal">NULL</span>) *tree = child; <span class="hljs-comment">// 删除的是根节点</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pp-&gt;left == p) pp-&gt;left = child;<br>    <span class="hljs-keyword">else</span> pp-&gt;right = child;<br><br>    <span class="hljs-built_in">free</span>(p); <span class="hljs-comment">// 释放被删除节点的内存</span><br>}<br></code></pre></td></tr></table></figure><p>二叉查找树在极端情况下会退化成链表，例如每个节点都只有一个左节点，这是时间复杂度就变成了 O(n)，为了避免这种情况，又出现了一种新的树叫「平衡二叉查找树」，之后再开坑讲</p><p>还有个前缀树，之后也会开坑讲一下</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;树是常用的数据结构之一，种类很多比如二叉树，二叉查找树，平衡二叉树，红黑树，B 树，B+树等，本身就是一种递归结构&lt;/p&gt;
&lt;h2 id=&quot;什么是树？&quot;&gt;&lt;a href=&quot;#什么是树？&quot; class=&quot;headerlink&quot; title=&quot;什么是树？&quot;&gt;&lt;/a&gt;什么是树？&lt;</summary>
      
    
    
    
    <category term="数据结构" scheme="https://zhongye1.github.io/Arknight-notes/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="数据结构" scheme="https://zhongye1.github.io/Arknight-notes/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>数据结构-栈</title>
    <link href="https://zhongye1.github.io/Arknight-notes/posts/33985.html"/>
    <id>https://zhongye1.github.io/Arknight-notes/posts/33985.html</id>
    <published>2025-04-17T16:17:37.000Z</published>
    <updated>2025-04-22T07:35:17.967Z</updated>
    
    <content type="html"><![CDATA[<h1 id="栈的基本概念"><a href="#栈的基本概念" class="headerlink" title="栈的基本概念"></a>栈的基本概念</h1><h3 id="栈的定义"><a href="#栈的定义" class="headerlink" title="栈的定义"></a>栈的定义</h3><p><strong>栈</strong>：是只允许在一端进行插入或删除的线性表。首先栈是一种线性表，但限定这种线性表只能在某一端进行插入和删除操作。<br class='item-img' data-src='https://pic1.zhimg.com/80/v2-a1d987369534eb6c471da568be4aa5cd_720w.png'><img src="https://pic1.zhimg.com/80/v2-a1d987369534eb6c471da568be4aa5cd_720w.png" alt="img"><br><strong>栈顶</strong>（Top）：线性表允许进行插入删除的那一端。<br><strong>栈底</strong>（Bottom)：固定的，不允许进行插入和删除的另一端。<br><strong>空栈</strong>：不含任何元素的空表。</p><p>栈又称为后进先出（Last In First Out）的线性表，简称LIFO结构</p><h3 id="栈的常见基本操作"><a href="#栈的常见基本操作" class="headerlink" title="栈的常见基本操作"></a>栈的常见基本操作</h3><p><strong>InitStack(&amp;S)</strong>：初始化一个空栈S</p><p><strong>StackEmpty(S)</strong>：判断一个栈是否为空，若栈为空则返回true，否则返回false</p><p><strong>Push(&amp;S, x)</strong>：进栈（栈的插入操作），若栈S未满，则将x加入使之成为新栈顶</p><p><strong>Pop(&amp;S, &amp;x)</strong>：出栈（栈的删除操作），若栈S非空，则弹出栈顶元素，并用x返回</p><p><strong>GetTop(S, &amp;x)</strong>：读栈顶元素，若栈S非空，则用x返回栈顶元素</p><p><strong>DestroyStack(&amp;S)</strong>：栈销毁，并释放S占用的存储空间（“&amp;”表示引用调用）</p><h1 id="栈的顺序存储结构"><a href="#栈的顺序存储结构" class="headerlink" title="栈的顺序存储结构"></a>栈的顺序存储结构</h1><h4 id="栈的顺序存储"><a href="#栈的顺序存储" class="headerlink" title="栈的顺序存储"></a>栈的顺序存储</h4><p>采用顺序存储的栈称为顺序栈，它利用一组地址连续的存储单元存放自栈底到栈顶的数据元素，同时附设一个指针（top）指示当前栈顶元素的位置。<br>若存储栈的长度为MAXSIZE，则栈顶位置top必须小于MAXSIZE。当栈存在一个元素时，top等于0，因此通常把空栈的判断条件定位top等于-1。<br>栈的顺序存储结构可描述为：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAXSIZE 5  </span><br><span class="hljs-comment">//定义栈中元素的最大个数</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SqStack</span>&#123;</span><br>    <span class="hljs-type">int</span> data[MAXSIZE];<br>    <span class="hljs-type">int</span> top;<br>&#125;SqStack;<br></code></pre></td></tr></table></figure><p>若现在有一个栈，MAXSIZE是5，则栈的普通情况、空栈、满栈的情况分别如下图所示：</p><p class='item-img' data-src='https://picx.zhimg.com/80/v2-b667691c4e541ad1b4d77611d936ef7e_720w.png'><img src="https://picx.zhimg.com/80/v2-b667691c4e541ad1b4d77611d936ef7e_720w.png" alt="img"></p><h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">void</span> <span class="hljs-title function_">InitStack</span><span class="hljs-params">(SqStack* S)</span>&#123; <br>    <span class="hljs-comment">//SqStack&amp; S 是 C++ 的引用参数，用于直接修改外部栈对象</span><br>    <span class="hljs-comment">//若用 C 语言，需改用指针（SqStack* S）</span><br>    S-&gt;top = <span class="hljs-number">-1</span>;             <span class="hljs-comment">//初始化栈顶指针</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>为什么要用 <code>S-&gt;top = -1</code>？</strong></p><p><strong>顺序栈的本质是一个数组</strong>，栈顶指针 <code>top</code> 表示当前栈顶元素在数组中的位置索引。<br>初始化时 <code>top = -1</code> 有</p><p><strong>空栈条件</strong>：<code>top == -1</code><br>当栈中没有元素时，<code>top</code> 指向数组的“前一个位置”（即无效索引），逻辑上表示“无元素”。</p><p><strong>入栈操作</strong></p><p>先让 <code>top++</code>，移动到下一个可用位置；将新元素存入 <code>data[top]</code>。<br>例如，第一次入栈时，<code>top</code> 从 <code>-1</code> 变为 <code>0</code>，元素存入 <code>data[0]</code>，对应数组的第一个索引。</p><p><strong>判断栈满</strong></p><p><strong>栈满条件</strong>：<code>top == MAX_SIZE - 1</code><br>如果数组大小为 <code>MAX_SIZE</code>，当 <code>top</code> 指向最后一个位置（即 <code>MAX_SIZE - 1</code>）时，表示栈已满。</p><h4 id="判断栈空"><a href="#判断栈空" class="headerlink" title="判断栈空"></a>判断栈空</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">bool</span> <span class="hljs-title function_">StackEmpty</span><span class="hljs-params">(SqStack* S)</span>&#123;<br>    <span class="hljs-keyword">if</span>( S-&gt;top == <span class="hljs-number">-1</span>)&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-comment">//栈中没有元素时，`top` 指向数组的“前一个位置”（即无效索引），逻辑上表示“无元素”</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="进栈"><a href="#进栈" class="headerlink" title="进栈"></a>进栈</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">bool</span> <span class="hljs-title function_">Push</span><span class="hljs-params">(SqStack* S, <span class="hljs-type">int</span> x)</span>&#123;<br>    <span class="hljs-keyword">if</span>( S-&gt;top == MAXSIZE - <span class="hljs-number">1</span> )&#123; <span class="hljs-comment">//栈满，报错</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;        <br>    &#125;<br>    S-&gt;top++ ;                  <span class="hljs-comment">//栈顶指针加1</span><br>    S-&gt;data[S-&gt;top] = x;         <span class="hljs-comment">//入栈,写入元素到新栈顶位置</span><br>    <span class="hljs-comment">//S-&gt;data[S-&gt;top]代表栈顶元素</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="出栈"><a href="#出栈" class="headerlink" title="出栈"></a>出栈</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">bool</span> <span class="hljs-title function_">Pop</span><span class="hljs-params">(SqStack* S, <span class="hljs-type">int</span>* x)</span> &#123;<span class="hljs-comment">//通过指针修改外部变量</span><br>    <span class="hljs-keyword">if</span> (StackEmpty(S)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;栈空，无法出栈\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    *x = S-&gt;data[S-&gt;top];<br>    S-&gt;top--;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;出栈元素: %d\n&quot;</span>, *x);<br>    <span class="hljs-keyword">return</span> x;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="读栈顶元素"><a href="#读栈顶元素" class="headerlink" title="读栈顶元素"></a>读栈顶元素</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">bool</span> <span class="hljs-title function_">GetTop</span><span class="hljs-params">(SqStack* S, <span class="hljs-type">int</span>* x)</span> &#123;<span class="hljs-comment">//通过指针修改外部变量</span><br>    <span class="hljs-keyword">if</span> (StackEmpty(S)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;栈空，无栈顶元素\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    *x = S-&gt;data[S-&gt;top];<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;当前栈顶元素: %d\n&quot;</span>, *x);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>出栈和读栈顶元素操作需要返回两个信息：</p><ul><li><strong>是否成功</strong>（通过 <code>bool</code> 返回值）。</li><li><strong>得到的元素值</strong>（通过 <code>int* x</code> 指针参数）。</li></ul><h3 id="完整代码实现"><a href="#完整代码实现" class="headerlink" title="完整代码实现"></a>完整代码实现</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdbool.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAXSIZE 5  <span class="hljs-comment">// 示例栈容量设为5</span></span><br><br><span class="hljs-comment">//栈结构定义</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">SqStack</span> &#123;</span><br>    <span class="hljs-type">int</span> data[MAXSIZE];<br>    <span class="hljs-type">int</span> top;<br>&#125; SqStack;<br><br><span class="hljs-comment">// 初始化栈</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">InitStack</span><span class="hljs-params">(SqStack* S)</span> &#123;<br>    S-&gt;top = <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">// 判断栈空</span><br><span class="hljs-type">bool</span> <span class="hljs-title function_">StackEmpty</span><span class="hljs-params">(SqStack* S)</span> &#123;<br>    <span class="hljs-keyword">return</span> (S-&gt;top == <span class="hljs-number">-1</span>);<br>&#125;<br><br><span class="hljs-comment">// 判断栈满</span><br><span class="hljs-type">bool</span> <span class="hljs-title function_">StackFull</span><span class="hljs-params">(SqStack* S)</span> &#123;<br>    <span class="hljs-keyword">return</span> (S-&gt;top == MAXSIZE - <span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-comment">// 入栈</span><br><span class="hljs-type">bool</span> <span class="hljs-title function_">Push</span><span class="hljs-params">(SqStack* S, <span class="hljs-type">int</span> x)</span> &#123;<br>    <span class="hljs-keyword">if</span> (StackFull(S)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;栈已满，无法入栈 %d\n&quot;</span>, x);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    S-&gt;top++;<br>    S-&gt;data[S-&gt;top] = x;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;入栈元素: %d\n&quot;</span>, x);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><br><span class="hljs-comment">// 出栈（通过指针返回栈顶元素）</span><br><span class="hljs-type">bool</span> <span class="hljs-title function_">Pop</span><span class="hljs-params">(SqStack* S, <span class="hljs-type">int</span>* x)</span> &#123;<br>    <span class="hljs-keyword">if</span> (StackEmpty(S)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;栈空，无法出栈\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    *x = S-&gt;data[S-&gt;top];<br>    S-&gt;top--;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;出栈元素: %d\n&quot;</span>, *x);<br>    <span class="hljs-keyword">return</span> x;<br>&#125;<br><br><span class="hljs-comment">// 获取栈顶元素（通过指针返回）</span><br><span class="hljs-type">bool</span> <span class="hljs-title function_">GetTop</span><span class="hljs-params">(SqStack* S, <span class="hljs-type">int</span>* x)</span> &#123;<br>    <span class="hljs-keyword">if</span> (StackEmpty(S)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;栈空，无栈顶元素\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    *x = S-&gt;data[S-&gt;top];<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;当前栈顶元素: %d\n&quot;</span>, *x);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><br><span class="hljs-comment">// 打印栈内容（辅助函数）</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">PrintStack</span><span class="hljs-params">(SqStack* S)</span> &#123;<br>    <span class="hljs-keyword">if</span> (StackEmpty(S)) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;栈空\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;栈内容 (从底到顶): &quot;</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= S-&gt;top; i++) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, S-&gt;data[i]);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    SqStack S;<br>    <span class="hljs-type">int</span> val;  <span class="hljs-comment">// 用于接收出栈/栈顶元素的值</span><br><br>    InitStack(&amp;S);<br>    PrintStack(&amp;S);  <span class="hljs-comment">// 栈空</span><br><br>    <span class="hljs-comment">// 入栈测试</span><br>    Push(&amp;S, <span class="hljs-number">10</span>);<br>    Push(&amp;S, <span class="hljs-number">20</span>);<br>    Push(&amp;S, <span class="hljs-number">30</span>);<br>    Push(&amp;S, <span class="hljs-number">40</span>);<br>    Push(&amp;S, <span class="hljs-number">50</span>);   <span class="hljs-comment">// 栈满</span><br>    Push(&amp;S, <span class="hljs-number">60</span>);   <span class="hljs-comment">// 触发栈满报错</span><br>    PrintStack(&amp;S);  <span class="hljs-comment">// 10 20 30 40 50</span><br><br>    <span class="hljs-comment">// 获取栈顶</span><br>    GetTop(&amp;S, &amp;val);  <span class="hljs-comment">// 50</span><br><br>    <span class="hljs-comment">// 出栈测试</span><br>    Pop(&amp;S, &amp;val);     <span class="hljs-comment">// 50出栈</span><br>    Pop(&amp;S, &amp;val);     <span class="hljs-comment">// 40出栈</span><br>    PrintStack(&amp;S);    <span class="hljs-comment">// 10 20 30</span><br><br>    <span class="hljs-comment">// 继续出栈直到栈空</span><br>    Pop(&amp;S, &amp;val);     <span class="hljs-comment">// 30</span><br>    Pop(&amp;S, &amp;val);     <span class="hljs-comment">// 20</span><br>    Pop(&amp;S, &amp;val);     <span class="hljs-comment">// 10</span><br>    Pop(&amp;S, &amp;val);     <span class="hljs-comment">// 触发栈空报错</span><br>    PrintStack(&amp;S);    <span class="hljs-comment">// 栈空</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h1 id="栈的链式存储结构"><a href="#栈的链式存储结构" class="headerlink" title="栈的链式存储结构"></a>栈的链式存储结构</h1><p>采用<strong>链式存储</strong>的栈称为<strong>链栈</strong>，链栈的优点是便于多个栈共享存储空间和提高其效率，且不存在栈满上溢的情况。通常采用单链表实现，并规定所有操作都是在单链表的表头进行的。这里规定链栈没有头节点，<strong>Lhead</strong>指向栈顶元素</p><p class='item-img' data-src='https://pic4.zhimg.com/80/v2-2f84fc59716af6dc2a4bf3ca23f496d7_720w.webp'><img src="https://pic4.zhimg.com/80/v2-2f84fc59716af6dc2a4bf3ca23f496d7_720w.webp" alt="img"></p><p>对于空栈来说，链表原定义是头指针指向空，那么链栈的空其实就是top=NULL的时候。</p><h4 id="链栈的结构定义："><a href="#链栈的结构定义：" class="headerlink" title="链栈的结构定义："></a>链栈的结构定义：</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">// 定义链式栈的节点结构体</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">LinkedStackNode</span> </span><br><span class="hljs-class">&#123;</span><br>    <span class="hljs-type">int</span> data;                       <span class="hljs-comment">// 存储栈元素</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">LinkedStackNode</span> * <span class="hljs-title">next</span>;</span>  <span class="hljs-comment">// 指向下一节点的指针</span><br>&#125; LinkedStackNode, * LinkedStack;   <span class="hljs-comment">// 类型别名：LinkedStackNode表示节点，LinkedStack表示节点指针</span><br>LinkedStack top; <span class="hljs-comment">// 声明一个栈顶指针（本质是LinkedStackNode*类型）</span><br></code></pre></td></tr></table></figure><h4 id="初始化空栈"><a href="#初始化空栈" class="headerlink" title="初始化空栈"></a>初始化空栈</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//初始化</span><br>LinkedStack <span class="hljs-title function_">Init_LinkedStack</span><span class="hljs-params">()</span>                                       <br>&#123;<br>LinkedStack top=(LinkedStackNode * )<span class="hljs-built_in">malloc</span> (<span class="hljs-keyword">sizeof</span>( LinkedStackNode));<br><span class="hljs-keyword">if</span>(top!=<span class="hljs-literal">NULL</span>)<span class="hljs-comment">//申请空间成功</span><br>top-&gt;next=<span class="hljs-literal">NULL</span>;<span class="hljs-comment">//设置栈顶指针为空</span><br><span class="hljs-keyword">return</span> top;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="判断栈空-1"><a href="#判断栈空-1" class="headerlink" title="判断栈空"></a>判断栈空</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//判栈空</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">LinkedStack_Empty</span><span class="hljs-params">(LinkedStack top)</span>                            <br>&#123;<br><span class="hljs-keyword">if</span>(top-&gt;next==<span class="hljs-literal">NULL</span>)<span class="hljs-comment">//检查栈顶指针的值 </span><br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<span class="hljs-comment">//栈S为空，函数返回1</span><br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="入栈"><a href="#入栈" class="headerlink" title="入栈"></a>入栈</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">Push_LinkedStack</span><span class="hljs-params">(LinkedStack top,elemtype x)</span>                     <br><span class="hljs-comment">//插入数据元素x为新的栈顶元素</span><br>&#123;<br>LinkedStackNode * node;<br>node=(LinkedStackNode * )<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(LinkedStackNode));<br><span class="hljs-keyword">if</span>(node==<span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<span class="hljs-comment">//申请结点空间失败,插入失败，函数返回0</span><br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>node-&gt;data=x;<span class="hljs-comment">//设置新结点的数据域</span><br>node-&gt;next=top-&gt;next;<span class="hljs-comment">//设置新结点的指针城</span><br>top-&gt;next=node;<span class="hljs-comment">//设置头结点指针城指向新的栈顶元素</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<span class="hljs-comment">//插入成功，函数返回1</span><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="出栈-1"><a href="#出栈-1" class="headerlink" title="出栈"></a>出栈</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">Pop_LinkedStack</span><span class="hljs-params">(LinkedStack top, elemtype *x)</span>                    <br>&#123;LinkedStackNode * node;<br><span class="hljs-keyword">if</span>(top-&gt;next==<span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>node=top-&gt;next;<span class="hljs-comment">//将原栈顶数据元素弹出并赋给node</span><br>*x=node-&gt;data;<span class="hljs-comment">//将原栈顶数据元素的数据赋值给x</span><br>top-&gt;next=node-&gt;next;<span class="hljs-comment">//top指向链栈中的下一个数据元素</span><br><span class="hljs-built_in">free</span> (node);<span class="hljs-comment">//释放原栈顶数据元素所占的空间</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br>&#125;  <br></code></pre></td></tr></table></figure><h4 id="取栈顶元素"><a href="#取栈顶元素" class="headerlink" title="取栈顶元素"></a>取栈顶元素</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">GetTop_LinkedStack</span><span class="hljs-params">(LinkedStack top)</span>                <br>&#123; <br><span class="hljs-keyword">if</span>(top-&gt;next)<br>      &#123;<br>            <span class="hljs-keyword">return</span> top-&gt;next-&gt;data;<br><br>      &#125;<br>      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="求栈长"><a href="#求栈长" class="headerlink" title="求栈长"></a>求栈长</h4><p>设置计数器，随top指针后移，计数器加1，直到遍历完所有元素。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//求栈长</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">Length_LinkedStack</span><span class="hljs-params">(LinkedStack top)</span>                                       <br>&#123;<br><span class="hljs-type">int</span> count = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>(top-&gt;next!=<span class="hljs-literal">NULL</span>) <br>&#123;<br>++count;<br>top=top-&gt;next;<br>&#125;<br><span class="hljs-keyword">return</span> count;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="完整代码实现-1"><a href="#完整代码实现-1" class="headerlink" title="完整代码实现"></a>完整代码实现</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-comment">// 定义链式栈的节点结构体</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">LinkedStackNode</span> </span><br><span class="hljs-class">&#123;</span><br>    <span class="hljs-type">int</span> data;                       <span class="hljs-comment">// 存储栈元素</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">LinkedStackNode</span> * <span class="hljs-title">next</span>;</span>  <span class="hljs-comment">// 指向下一节点的指针</span><br>&#125; LinkedStackNode, * LinkedStack;   <span class="hljs-comment">// 类型别名：LinkedStackNode表示节点，LinkedStack表示节点指针</span><br>LinkedStack top; <span class="hljs-comment">// 声明一个栈顶指针（本质是LinkedStackNode*类型）</span><br><br><span class="hljs-comment">//初始化</span><br>LinkedStack <span class="hljs-title function_">Init_LinkedStack</span><span class="hljs-params">()</span>                                       <br>&#123;<br>LinkedStack top=(LinkedStackNode * )<span class="hljs-built_in">malloc</span> (<span class="hljs-keyword">sizeof</span>( LinkedStackNode));<br><span class="hljs-keyword">if</span>(top!=<span class="hljs-literal">NULL</span>)<span class="hljs-comment">//申请空间成功</span><br>top-&gt;next=<span class="hljs-literal">NULL</span>;<span class="hljs-comment">//设置栈顶指针为空</span><br><span class="hljs-keyword">return</span> top;<br>&#125;<br><br><span class="hljs-comment">//判栈空</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">LinkedStack_Empty</span><span class="hljs-params">(LinkedStack top)</span>                            <br>&#123;<br><span class="hljs-keyword">if</span>(top-&gt;next==<span class="hljs-literal">NULL</span>)<span class="hljs-comment">//检查栈顶指针的值 </span><br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<span class="hljs-comment">//栈S为空，函数返回1</span><br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//入栈</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">Push_LinkedStack</span><span class="hljs-params">(LinkedStack top,elemtype x)</span>                     <br><span class="hljs-comment">//插入数据元素x为新的栈顶元素</span><br>&#123;<br>LinkedStackNode * node;<br>node=(LinkedStackNode * )<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(LinkedStackNode));<br><span class="hljs-keyword">if</span>(node==<span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<span class="hljs-comment">//申请结点空间失败,插入失败，函数返回0</span><br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>node-&gt;data=x;<span class="hljs-comment">//设置新结点的数据域</span><br>node-&gt;next=top-&gt;next;<span class="hljs-comment">//设置新结点的指针城</span><br>top-&gt;next=node;<span class="hljs-comment">//设置头结点指针城指向新的栈顶元素</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<span class="hljs-comment">//插入成功，函数返回1</span><br>&#125;<br>&#125;<br><br><span class="hljs-comment">//求栈长</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">Length_LinkedStack</span><span class="hljs-params">(LinkedStack top)</span>                                       <br>&#123;<br><span class="hljs-type">int</span> count = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">while</span>(top-&gt;next!=<span class="hljs-literal">NULL</span>) <br>&#123;<br>++count;<br>top=top-&gt;next;<br>&#125;<br><span class="hljs-keyword">return</span> count;<br>&#125;<br><br><span class="hljs-comment">//出栈</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">Pop_LinkedStack</span><span class="hljs-params">(LinkedStack top, elemtype *x)</span>                    <br>&#123;LinkedStackNode * node;<br><span class="hljs-keyword">if</span>(top-&gt;next==<span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>node=top-&gt;next;<span class="hljs-comment">//将原栈顶数据元素弹出并赋给node</span><br>*x=node-&gt;data;<span class="hljs-comment">//将原栈顶数据元素的数据赋值给x</span><br>top-&gt;next=node-&gt;next;<span class="hljs-comment">//top指向链栈中的下一个数据元素</span><br><span class="hljs-built_in">free</span> (node);<span class="hljs-comment">//释放原栈顶数据元素所占的空间</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br>&#125;  <br><br><span class="hljs-comment">//取栈顶元素</span><br><span class="hljs-type">int</span> <span class="hljs-title function_">GetTop_LinkedStack</span><span class="hljs-params">(LinkedStack top)</span>                <br>&#123; <br><span class="hljs-keyword">if</span>(top-&gt;next)<br>      &#123;<br>            <span class="hljs-keyword">return</span> top-&gt;next-&gt;data;<br><br>      &#125;<br>      <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">//主函数</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br><span class="hljs-type">int</span> i,t,x,a[<span class="hljs-number">20</span>];<br>LinkedStack top=Init_LinkedStack();<span class="hljs-comment">//初始化栈</span><br>x=LinkedStack_Empty(top);<span class="hljs-comment">//判栈空结果赋值给X</span><br><span class="hljs-keyword">if</span>(x=<span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;栈为空\n&quot;</span>);<br>&#125;<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;请依次输入5个数,开始入栈：\n&quot;</span>);<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">5</span>;i++) <br>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;a[i]);<br>Push_LinkedStack(top,a[i]);<br>x=GetTop_LinkedStack(top);<br><span class="hljs-keyword">if</span>(x!=<span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;当前栈顶元素为%d\n&quot;</span>,x);<br>&#125;<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;入栈结束\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;栈长为%d\n&quot;</span>,Length_LinkedStack(top));<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;开始出栈:\n&quot;</span>);<br><span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">5</span>;i++)<br>&#123;<br>Pop_LinkedStack(top,&amp;t);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>,t);<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;出栈后栈长为%d\n&quot;</span>,Length_LinkedStack(top));<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;栈的基本概念&quot;&gt;&lt;a href=&quot;#栈的基本概念&quot; class=&quot;headerlink&quot; title=&quot;栈的基本概念&quot;&gt;&lt;/a&gt;栈的基本概念&lt;/h1&gt;&lt;h3 id=&quot;栈的定义&quot;&gt;&lt;a href=&quot;#栈的定义&quot; class=&quot;headerlink&quot; title=&quot;栈</summary>
      
    
    
    
    <category term="数据结构" scheme="https://zhongye1.github.io/Arknight-notes/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="数据结构" scheme="https://zhongye1.github.io/Arknight-notes/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
</feed>
