<!DOCTYPE html><html lang="en" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>2025-11-17-关于动态规划(背包问题为例) | Notes|笔记站</title><link rel="icon" type="image/x-icon" href="/Arknight-notes/favicon.ico"><link rel="preload" as="font" crossorigin="anonymous" href="/Arknight-notes/font/Bender.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="/Arknight-notes/font/BenderLight.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="/Arknight-notes/font/JetBrainsMono-Regular.woff2"><link rel="stylesheet" href="/Arknight-notes/css/arknights.css"><style>@font-face {
  font-family: Bender;
  src: local('Bender'), url("/Arknight-notes/font/Bender.ttf"), url("/Arknight-notes/font/Bender.otf");
}
@font-face {
  font-family: BenderLight;
  src: local('BenderLight'), url("/Arknight-notes/font/BenderLight.ttf");
}
@font-face {
  font-family: 'JetBrains Mono';
  src: local('JetBrains Mono'), url('/Arknight-notes/font/JetBrainsMono-Regular.woff2') format('woff2');
}
</style><script>var config = {"root":"/Arknight-notes/","code_fold":90,"search":{"preload":false,"activeHolder":"键入以继续","blurHolder":"数据检索","noResult":"无 $0 相关数据"},"code":{"codeInfo":"$0 - $1 行","copy":"复制"}}</script><link type="text/css" rel="stylesheet" href="/Arknight-notes/lib/encrypt/hbe.style.css"><script src="/Arknight-notes/js/gitalk.js"></script><script src="//unpkg.com/mermaid@10.5.0/dist/mermaid.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.1/MathJax.js"></script><script>MathJax.Hub.Config({
 menuSettings: {
   zoom: "None"
 },
 showMathMenu: false,
 jax: ["input/TeX","output/CommonHTML"],
 extensions: ["tex2jax.js"],
 TeX: {
   extensions: ["AMSmath.js","AMSsymbols.js"],
   equationNumbers: {
     autoNumber: "AMS"
   }
 },
 tex2jax: {
   inlineMath: [["\\(", "\\)"]],
   displayMath: [["\\[", "\\]"]]
 }
});</script><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link type="text/css" rel="stylesheet" href="/Arknight-notes/lib/fontawesome/css/all.min.css"><script>if (window.localStorage.getItem('theme-mode') === 'light')
 document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark')
 document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/Arknight-notes/font/BenderLight.woff2") format('woff2');
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/Arknight-notes/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><style>:root {
 --dark-background: url('https://pic2.zhimg.com/v2-6269d74b4dafe14781d03790e5a86b21_r.jpg');
 --light-background: url('https://pic1.zhimg.com/v2-233b64b583642fc4a6d77e69ced33150_r.jpg');
 --theme-encrypt-confirm: '确认'
}</style><script defer src="/Arknight-notes/js/arknights.js"></script><script defer src="/Arknight-notes/js/search.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script async src="/Arknight-notes/js/gitalk.js"></script><script defer type="module">import mermaid from '//unpkg.com/mermaid@10.5.0/dist/mermaid.esm.mjs';
window.mermaid = mermaid;
code.paintMermaid();
</script><script src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.1/MathJax.js"></script><script>MathJax.Hub.Config({
  menuSettings: {
    zoom: "None"
  },
  showMathMenu: false,
  jax: ["input/TeX","output/CommonHTML"],
  extensions: ["tex2jax.js"],
  TeX: {
    extensions: ["AMSmath.js","AMSsymbols.js"],
    equationNumbers: {
      autoNumber: "AMS"
    }
  },
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]]
  }
});
</script><script async src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script async src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script async src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script async src="/Arknight-notes/lib/encrypt/hbe.js"></script><script async src="/Arknight-notes/js/pjax.js"></script><script class="pjax-js">reset= () => {gitalk = new Gitalk({
 clientID: 'Ov23ct13Fb0b67x23wnT',
 clientSecret: 'f18ce69dd545e3c0f5e2456afde9c756fe8a254a',
 repo: 'Arknight-notes',
 owner: 'Zhongye1',
 admin: ['Zhongye1'],
 distractionFreeMode: false,
 id: location.pathname
});
if (document.querySelector("#gitalk")) gitalk.render("gitalk");document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js','data-pjax','.busuanzi'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);document.addEventListener('pjax:success', _ => bszCaller.fetch(
 "//busuanzi.ibruce.info/busuanzi?jsonpCallback=BusuanziCallback", a => {
  bszTag.texts(a),
  bszTag.shows()
}));reset()})</script><script class="pjax-js">reset= () => {gitalk = new Gitalk({
 clientID: 'Ov23ct13Fb0b67x23wnT',
 clientSecret: 'f18ce69dd545e3c0f5e2456afde9c756fe8a254a',
 repo: 'Arknight-notes',
 owner: 'Zhongye1',
 admin: ['Zhongye1'],
 distractionFreeMode: false,
 id: location.pathname
});
if (document.querySelector("#gitalk")) gitalk.render("gitalk");document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/Arknight-notes/rss.xml" title="Notes|笔记站" type="application/atom+xml">
<style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head><body><div class="loading" style="opacity: 0;"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><div class="navBtn"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><nav><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="数据检索" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup" tabindex="0"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/Arknight-notes/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/Arknight-notes/archives/"><span class="navItemTitle">Archives</span></a></li><li class="navItem"><a class="navBlock" href="/Arknight-notes/about/"><span class="navItemTitle">About</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>2025-11-17-关于动态规划(背包问题为例)</h1><div id="post-info"><span>文章发布时间: <div class="control"><time datetime="2025-11-17T10:24:04.000Z" id="date"> 2025-11-17</time></div></span><br><span>最后更新时间: <div class="control"><time datetime="2025-12-27T07:26:38.651Z" id="updated"> 2025-12-27</time></div></span><br><span id="busuanzi_container_page_pv">页面浏览: <span class="control" id="busuanzi_value_page_pv">加载中...</span></span></div></div><hr><div id="post-content"><h3 id="动态规划介绍"><a href="#动态规划介绍" class="headerlink" title="动态规划介绍"></a>动态规划介绍</h3><p>动态规划（Dynamic Programming，简称 DP）是一种算法设计范式，用于解决具有<strong>重叠子问题</strong>和<strong>最优子结构</strong>性质的优化问题。它通过将原问题分解为若干子问题，先解决子问题并保存结果（通常使用表格或数组），从而避免重复计算，最终构建出原问题的解。</p>
<p>动态规划的核心思想源于数学中的贝尔曼最优性原理：最优策略的子策略总是最优的。与分治法不同，动态规划适用于子问题重叠的情况，能将指数级时间复杂度优化至多项式级。</p>
<p class='item-img' data-src='https://media.geeksforgeeks.org/wp-content/uploads/20220914114911/DynamicProgramming1.jpg'><img src="https://media.geeksforgeeks.org/wp-content/uploads/20220914114911/DynamicProgramming1.jpg" alt=""></p>
<p class='item-img' data-src='https://deen3evddmddt.cloudfront.net/uploads/content-images/dynamic-programming.webp'><img src="https://deen3evddmddt.cloudfront.net/uploads/content-images/dynamic-programming.webp" alt=""></p>
<h4 id="动态规划的适用条件"><a href="#动态规划的适用条件" class="headerlink" title="动态规划的适用条件"></a>动态规划的适用条件</h4><ul>
<li><strong>最优子结构</strong>：原问题的最优解可由子问题的最优解组合得出。</li>
<li><strong>重叠子问题</strong>：子问题在递归求解中会被多次计算。</li>
</ul>
<h4 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h4><ul>
<li><strong>自底向上（表格填充）</strong>：使用循环从小型子问题开始填充 DP 表格，直至原问题（常见于背包问题）。</li>
<li><strong>自顶向下（记忆化递归）</strong>：递归求解并使用备忘录存储已计算子问题结果。</li>
</ul>
<h3 id="以-0-1-背包问题为例"><a href="#以-0-1-背包问题为例" class="headerlink" title="以 0/1 背包问题为例"></a>以 0/1 背包问题为例</h3><p>0/1 背包问题（0/1 Knapsack Problem）是动态规划的经典应用：给定 n 个物品，每个物品有重量 w_i 和价值 v_i，以及一个容量为 W 的背包。每个物品只能选择取或不取（0/1），求背包中物品的最大总价值。</p>
<p class='item-img' data-src='https://media.geeksforgeeks.org/wp-content/uploads/20240805101207/Recursion-Tree-for-01-KnapSack.png'><img src="https://media.geeksforgeeks.org/wp-content/uploads/20240805101207/Recursion-Tree-for-01-KnapSack.png" alt=""></p>
<p class='item-img' data-src='https://media.geeksforgeeks.org/wp-content/uploads/20250312122610325590/Recursion-tree-for-01-Knapsack-3-1.webp'><img src="https://media.geeksforgeeks.org/wp-content/uploads/20250312122610325590/Recursion-tree-for-01-Knapsack-3-1.webp" alt=""></p>
<h4 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h4><ul>
<li><strong>子问题</strong>：考虑前 i 个物品和容量为 j 的背包的最大价值。</li>
<li><strong>状态定义</strong>：<code>dp[i][j]</code> 表示前 i 个物品在容量 j 下的最大价值。</li>
<li><strong>状态转移方程</strong>：<ul>
<li>不取第 i 个物品：<code>dp[i][j] = dp[i-1][j]</code></li>
<li>取第 i 个物品（若 j ≥ w_i）：<code>dp[i][j] = dp[i-1][j - w_i] + v_i</code></li>
<li><code>dp[i][j] = max</code>(以上两种情况)</li>
</ul>
</li>
<li><strong>边界</strong>：<code>dp[0][j] = 0</code>（无物品），<code>dp[i][0] = 0</code>（容量为 0）</li>
</ul>
<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>假设物品：重量<code>[1, 3, 4]</code>，价值<code>[15, 20, 30]</code>，背包容量 W = 4。<br>DP 表格填充过程如下所示：</p>
<h4 id="初始状态（i-0，无物品）"><a href="#初始状态（i-0，无物品）" class="headerlink" title="初始状态（i=0，无物品）"></a>初始状态（i=0，无物品）</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus">容量 w:   <span class="hljs-number">0</span>    <span class="hljs-number">1</span>    <span class="hljs-number">2</span>    <span class="hljs-number">3</span>    <span class="hljs-number">4</span><br>物品 <span class="hljs-selector-tag">i</span><br><span class="hljs-number">0</span>        <span class="hljs-selector-attr">[0]</span>  <span class="hljs-selector-attr">[0]</span>  <span class="hljs-selector-attr">[0]</span>  <span class="hljs-selector-attr">[0]</span>  <span class="hljs-selector-attr">[0]</span><br></code></pre></td></tr></table></figure>
<h4 id="考虑第-1-个物品（重量-1，价值-15）"><a href="#考虑第-1-个物品（重量-1，价值-15）" class="headerlink" title="考虑第 1 个物品（重量 1，价值 15）"></a>考虑第 1 个物品（重量 1，价值 15）</h4><ul>
<li>对于 w &lt; 1：无法放入，只能取上一行值（0）。</li>
<li>对于 w ≥ 1：max(不放入: 0, 放入: 0 + 15) = 15。</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">容量 w:   <span class="hljs-number">0</span>    <span class="hljs-number">1</span>    <span class="hljs-number">2</span>    <span class="hljs-number">3</span>    <span class="hljs-number">4</span><br>物品 <span class="hljs-selector-tag">i</span><br><span class="hljs-number">0</span>        <span class="hljs-selector-attr">[0]</span>  <span class="hljs-selector-attr">[0]</span>  <span class="hljs-selector-attr">[0]</span>  <span class="hljs-selector-attr">[0]</span>  <span class="hljs-selector-attr">[0]</span><br><span class="hljs-number">1</span>        <span class="hljs-selector-attr">[0]</span> <span class="hljs-selector-attr">[15]</span> <span class="hljs-selector-attr">[15]</span> <span class="hljs-selector-attr">[15]</span> <span class="hljs-selector-attr">[15]</span><br></code></pre></td></tr></table></figure>
<h4 id="考虑第-2-个物品（重量-3，价值-20）"><a href="#考虑第-2-个物品（重量-3，价值-20）" class="headerlink" title="考虑第 2 个物品（重量 3，价值 20）"></a>考虑第 2 个物品（重量 3，价值 20）</h4><ul>
<li>对于每个 w：<ul>
<li>如果 w &lt; 3：无法放入，取上一行值。</li>
<li>如果 w ≥ 3：max(不放入: <code>dp[1][w]</code>, 放入: <code>dp[1][w-3] + 20</code>)。</li>
</ul>
</li>
</ul>
<p>计算示例：</p>
<ul>
<li>w=3：max(15, 15 + 20) = 35</li>
<li>w=4：max(15, 15 + 20) = 35</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus">容量 w:   <span class="hljs-number">0</span>    <span class="hljs-number">1</span>    <span class="hljs-number">2</span>    <span class="hljs-number">3</span>    <span class="hljs-number">4</span><br>物品 <span class="hljs-selector-tag">i</span><br><span class="hljs-number">0</span>        <span class="hljs-selector-attr">[0]</span>  <span class="hljs-selector-attr">[0]</span>  <span class="hljs-selector-attr">[0]</span>  <span class="hljs-selector-attr">[0]</span>  <span class="hljs-selector-attr">[0]</span><br><span class="hljs-number">1</span>        <span class="hljs-selector-attr">[0]</span> <span class="hljs-selector-attr">[15]</span> <span class="hljs-selector-attr">[15]</span> <span class="hljs-selector-attr">[15]</span> <span class="hljs-selector-attr">[15]</span><br><span class="hljs-number">2</span>        <span class="hljs-selector-attr">[0]</span> <span class="hljs-selector-attr">[15]</span> <span class="hljs-selector-attr">[15]</span> <span class="hljs-selector-attr">[35]</span> <span class="hljs-selector-attr">[35]</span><br></code></pre></td></tr></table></figure>
<h4 id="考虑第-3-个物品（重量-4，价值-30）"><a href="#考虑第-3-个物品（重量-4，价值-30）" class="headerlink" title="考虑第 3 个物品（重量 4，价值 30）"></a>考虑第 3 个物品（重量 4，价值 30）</h4><ul>
<li>对于每个 w：<ul>
<li>如果 w &lt; 4：无法放入，取上一行值。</li>
<li>如果 w ≥ 4：max(不放入: <code>dp[2][w]</code>, 放入: <code>dp[2][w-4] + 30</code>)。</li>
</ul>
</li>
</ul>
<p>计算示例：</p>
<ul>
<li>w=4：max(35, 0 + 30) = 35（不放入更好）</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">容量 w:   <span class="hljs-number">0</span>    <span class="hljs-number">1</span>    <span class="hljs-number">2</span>    <span class="hljs-number">3</span>    <span class="hljs-number">4</span><br>物品 <span class="hljs-selector-tag">i</span><br><span class="hljs-number">0</span>        <span class="hljs-selector-attr">[0]</span>  <span class="hljs-selector-attr">[0]</span>  <span class="hljs-selector-attr">[0]</span>  <span class="hljs-selector-attr">[0]</span>  <span class="hljs-selector-attr">[0]</span><br><span class="hljs-number">1</span>        <span class="hljs-selector-attr">[0]</span> <span class="hljs-selector-attr">[15]</span> <span class="hljs-selector-attr">[15]</span> <span class="hljs-selector-attr">[15]</span> <span class="hljs-selector-attr">[15]</span><br><span class="hljs-number">2</span>        <span class="hljs-selector-attr">[0]</span> <span class="hljs-selector-attr">[15]</span> <span class="hljs-selector-attr">[15]</span> <span class="hljs-selector-attr">[35]</span> <span class="hljs-selector-attr">[35]</span><br><span class="hljs-number">3</span>        <span class="hljs-selector-attr">[0]</span> <span class="hljs-selector-attr">[15]</span> <span class="hljs-selector-attr">[15]</span> <span class="hljs-selector-attr">[35]</span> <span class="hljs-selector-attr">[35]</span><br></code></pre></td></tr></table></figure>
<p>最终结果：<code>dp[3][4] = 35</code>（选择第 1 和第 2 个物品：重量 1+3=4，价值 15+20=35）。</p>
<h4 id="一维-DP-优化过程简要文本模拟"><a href="#一维-DP-优化过程简要文本模拟" class="headerlink" title="一维 DP 优化过程简要文本模拟"></a>一维 DP 优化过程简要文本模拟</h4><p>一维数组从后向前更新（避免覆盖）：</p>
<p>初始 dp: [0, 0, 0, 0, 0]（容量 0 到 4）</p>
<p>第 1 个物品后： [0, 15, 15, 15, 15]</p>
<p>第 2 个物品后： [0, 15, 15, 35, 35]</p>
<p>第 3 个物品后： [0, 15, 15, 35, 35]</p>
<h4 id="复杂度分析"><a href="#复杂度分析" class="headerlink" title="复杂度分析"></a>复杂度分析</h4><ul>
<li>时间复杂度：O(n × capacity)</li>
<li>空间复杂度：二维 O(n × capacity)，一维 O(capacity)</li>
</ul>
<h4 id="伪代码（自底向上）"><a href="#伪代码（自底向上）" class="headerlink" title="伪代码（自底向上）"></a>伪代码（自底向上）</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs stylus">dp = 二维数组 (n+<span class="hljs-number">1</span>) <span class="hljs-attribute">x</span> (W+<span class="hljs-number">1</span>)，初始化为 <span class="hljs-number">0</span><br><br><span class="hljs-keyword">for</span> <span class="hljs-selector-tag">i</span> = <span class="hljs-number">1</span> to n:<br>    <span class="hljs-keyword">for</span> j = <span class="hljs-number">1</span> to W:<br>        <span class="hljs-keyword">if</span> w<span class="hljs-selector-attr">[i-1]</span> &gt; j:<br>            dp<span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[j]</span> = dp<span class="hljs-selector-attr">[i-1]</span><span class="hljs-selector-attr">[j]</span><br>        <span class="hljs-keyword">else</span>:<br>            dp<span class="hljs-selector-attr">[i]</span><span class="hljs-selector-attr">[j]</span> = <span class="hljs-built_in">max</span>(dp<span class="hljs-selector-attr">[i-1]</span><span class="hljs-selector-attr">[j]</span>, dp<span class="hljs-selector-attr">[i-1]</span><span class="hljs-selector-attr">[j - w[i-1]</span>] + v<span class="hljs-selector-attr">[i-1]</span>)<br><br>返回 dp<span class="hljs-selector-attr">[n]</span><span class="hljs-selector-attr">[W]</span><br></code></pre></td></tr></table></figure>
<p>时间复杂度 O(nW)，空间复杂度 O(nW)（可优化至 O(W) 使用一维数组）</p>
<p>动态规划通过系统地记录子问题解，避免了暴力递归的冗余计算，在组合优化、序列问题等领域广泛应用。理解背包问题有助于掌握 DP 的状态设计与转移核心。</p>
<h3 id="0-1-背包问题的-TypeScript-实现详解"><a href="#0-1-背包问题的-TypeScript-实现详解" class="headerlink" title="0/1 背包问题的 TypeScript 实现详解"></a>0/1 背包问题的 TypeScript 实现详解</h3><p>0/1 背包问题（0/1 Knapsack Problem）是动态规划的经典示例。给定 n 个物品，每个物品具有重量 <code>weights[i]</code> 和价值 <code>values[i]</code>，以及一个背包容量 <code>capacity</code>。每个物品只能选择放入或不放入（不可重复），目标是求背包内物品的最大总价值。</p>
<h4 id="动态规划状态定义与转移"><a href="#动态规划状态定义与转移" class="headerlink" title="动态规划状态定义与转移"></a>动态规划状态定义与转移</h4><ul>
<li><strong>状态</strong>：<code>dp[i][w]</code> 表示考虑前 i 个物品（索引 0 到 i-1），背包容量为 w 时的最大价值。</li>
<li><strong>转移方程</strong>：<ul>
<li>如果不放入第 i 个物品：<code>dp[i][w] = dp[i-1][w]</code></li>
<li>如果放入第 i 个物品（前提 <code>w ≥ weights[i-1]</code>）：<code>dp[i][w] = dp[i-1][w - weights[i-1]] + values[i-1]</code></li>
<li><code>dp[i][w] = Math.max(不放入, 放入)</code></li>
</ul>
</li>
<li><strong>初始条件</strong>：<code>dp[0][w] = 0</code>（无物品），<code>dp[i][0] = 0</code>（容量为 0）。</li>
<li><strong>结果</strong>：<code>dp[n][capacity]</code></li>
</ul>
<h4 id="TypeScript-实现"><a href="#TypeScript-实现" class="headerlink" title="TypeScript 实现"></a>TypeScript 实现</h4><p>以下提供两种实现：标准二维 DP 和空间优化的一维 DP（推荐，后者空间复杂度 O(capacity)）</p>
<h5 id="1-二维-DP-实现"><a href="#1-二维-DP-实现" class="headerlink" title="1. 二维 DP 实现"></a>1. 二维 DP 实现</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">knapsack01</span>(<span class="hljs-params"><span class="hljs-attr">weights</span>: <span class="hljs-built_in">number</span>[], <span class="hljs-attr">values</span>: <span class="hljs-built_in">number</span>[], <span class="hljs-attr">capacity</span>: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {<br>    <span class="hljs-keyword">const</span> n = weights.<span class="hljs-property">length</span>;<br>    <span class="hljs-comment">// 创建 (n+1) x (capacity+1) 的二维数组，初始化为 0</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-attr">dp</span>: <span class="hljs-built_in">number</span>[][] = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: n + <span class="hljs-number">1</span> }, <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Array</span>(capacity + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>));<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) {<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> w = <span class="hljs-number">1</span>; w &lt;= capacity; w++) {<br>            <span class="hljs-keyword">if</span> (weights[i - <span class="hljs-number">1</span>] &gt; w) {<br>                <span class="hljs-comment">// 重量超出，无法放入</span><br>                dp[i][w] = dp[i - <span class="hljs-number">1</span>][w];<br>            } <span class="hljs-keyword">else</span> {<br>                <span class="hljs-comment">// 取最大值</span><br>                dp[i][w] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<br>                    dp[i - <span class="hljs-number">1</span>][w],                              <span class="hljs-comment">// 不放入</span><br>                    dp[i - <span class="hljs-number">1</span>][w - weights[i - <span class="hljs-number">1</span>]] + values[i - <span class="hljs-number">1</span>]  <span class="hljs-comment">// 放入</span><br>                );<br>            }<br>        }<br>    }<br><br>    <span class="hljs-keyword">return</span> dp[n][capacity];<br>}<br></code></pre></td></tr></table></figure>
<h5 id="2-一维-DP-实现（空间优化，使用滚动数组）"><a href="#2-一维-DP-实现（空间优化，使用滚动数组）" class="headerlink" title="2. 一维 DP 实现（空间优化，使用滚动数组）"></a>2. 一维 DP 实现（空间优化，使用滚动数组）</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">knapsack01Optimized</span>(<span class="hljs-params"><span class="hljs-attr">weights</span>: <span class="hljs-built_in">number</span>[], <span class="hljs-attr">values</span>: <span class="hljs-built_in">number</span>[], <span class="hljs-attr">capacity</span>: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {<br>    <span class="hljs-keyword">const</span> n = weights.<span class="hljs-property">length</span>;<br>    <span class="hljs-comment">// 一维数组，dp[w] 表示容量 w 时的最大价值</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-attr">dp</span>: <span class="hljs-built_in">number</span>[] = <span class="hljs-title class_">Array</span>(capacity + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {<br>        <span class="hljs-comment">// 从后向前遍历（防止覆盖前状态）</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> w = capacity; w &gt;= weights[i]; w--) {<br>            dp[w] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[w], dp[w - weights[i]] + values[i]);<br>        }<br>    }<br><br>    <span class="hljs-keyword">return</span> dp[capacity];<br>}<br></code></pre></td></tr></table></figure>
<h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> weights = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];<br><span class="hljs-keyword">const</span> values = [<span class="hljs-number">15</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>];<br><span class="hljs-keyword">const</span> capacity = <span class="hljs-number">4</span>;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">knapsack01Optimized</span>(weights, values, capacity));  <span class="hljs-comment">// 输出 35（放入重量 1 和 3 的物品）</span><br></code></pre></td></tr></table></figure>
<ul>
<li>物品数量 n = 3</li>
<li>重量 weights = [1, 3, 4]</li>
<li>价值 values = [15, 20, 30]</li>
<li>背包容量 capacity = 4</li>
</ul>
<div id="paginator"></div></div><div id="post-footer"><div id="pages"><div class="footer-link" style="width: 50%;text-align:right;border-right:1px #fe2 solid"><a href="/Arknight-notes/posts/29484.html">← 下一篇 2025-11-19-重拾编程语言设计与计科相关概念</a></div><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/Arknight-notes/posts/11830.html">2025-11-17-Arch-Linux运行AppImage相关 上一篇 →</a></div></div></div><div id="comments"><div id="gitalk"></div></div></div><div class="bottom-btn"><div><a class="i-top" id="to-top" onClick="scrolls.scrolltop();" title="回到顶部" style="opacity: 0; display: none;">∧ </a><a class="i-index" id="to-index" href="#toc-div" title="文章目录">≡</a><a class="i-color" id="color-mode" onClick="colorMode.change()" title="切换主题"></a></div></div></article><aside><div id="about"><a href="/Arknight-notes/" id="logo"><img src="https://pic4.zhimg.com/80/v2-d9884f32711e19e80979eac58e943897_720w.webp" alt="Logo" style="margin:20;border-radius:0;"></a><h1 id="Dr"><a href="zhongye">柊野</a></h1><div id="description"><p></p></div></div><div id="aside-block"><div id="toc-div"><h1>目录</h1><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">动态规划介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E7%9A%84%E9%80%82%E7%94%A8%E6%9D%A1%E4%BB%B6"><span class="toc-number">1.1.</span> <span class="toc-text">动态规划的适用条件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.</span> <span class="toc-text">实现方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5-0-1-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E4%B8%BA%E4%BE%8B"><span class="toc-number">2.</span> <span class="toc-text">以 0&#x2F;1 背包问题为例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90"><span class="toc-number">2.1.</span> <span class="toc-text">问题分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">2.2.</span> <span class="toc-text">示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E7%8A%B6%E6%80%81%EF%BC%88i-0%EF%BC%8C%E6%97%A0%E7%89%A9%E5%93%81%EF%BC%89"><span class="toc-number">2.3.</span> <span class="toc-text">初始状态（i&#x3D;0，无物品）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%80%83%E8%99%91%E7%AC%AC-1-%E4%B8%AA%E7%89%A9%E5%93%81%EF%BC%88%E9%87%8D%E9%87%8F-1%EF%BC%8C%E4%BB%B7%E5%80%BC-15%EF%BC%89"><span class="toc-number">2.4.</span> <span class="toc-text">考虑第 1 个物品（重量 1，价值 15）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%80%83%E8%99%91%E7%AC%AC-2-%E4%B8%AA%E7%89%A9%E5%93%81%EF%BC%88%E9%87%8D%E9%87%8F-3%EF%BC%8C%E4%BB%B7%E5%80%BC-20%EF%BC%89"><span class="toc-number">2.5.</span> <span class="toc-text">考虑第 2 个物品（重量 3，价值 20）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%80%83%E8%99%91%E7%AC%AC-3-%E4%B8%AA%E7%89%A9%E5%93%81%EF%BC%88%E9%87%8D%E9%87%8F-4%EF%BC%8C%E4%BB%B7%E5%80%BC-30%EF%BC%89"><span class="toc-number">2.6.</span> <span class="toc-text">考虑第 3 个物品（重量 4，价值 30）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E7%BB%B4-DP-%E4%BC%98%E5%8C%96%E8%BF%87%E7%A8%8B%E7%AE%80%E8%A6%81%E6%96%87%E6%9C%AC%E6%A8%A1%E6%8B%9F"><span class="toc-number">2.7.</span> <span class="toc-text">一维 DP 优化过程简要文本模拟</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90"><span class="toc-number">2.8.</span> <span class="toc-text">复杂度分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%AA%E4%BB%A3%E7%A0%81%EF%BC%88%E8%87%AA%E5%BA%95%E5%90%91%E4%B8%8A%EF%BC%89"><span class="toc-number">2.9.</span> <span class="toc-text">伪代码（自底向上）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0-1-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%E7%9A%84-TypeScript-%E5%AE%9E%E7%8E%B0%E8%AF%A6%E8%A7%A3"><span class="toc-number">3.</span> <span class="toc-text">0&#x2F;1 背包问题的 TypeScript 实现详解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E7%8A%B6%E6%80%81%E5%AE%9A%E4%B9%89%E4%B8%8E%E8%BD%AC%E7%A7%BB"><span class="toc-number">3.1.</span> <span class="toc-text">动态规划状态定义与转移</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TypeScript-%E5%AE%9E%E7%8E%B0"><span class="toc-number">3.2.</span> <span class="toc-text">TypeScript 实现</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E4%BA%8C%E7%BB%B4-DP-%E5%AE%9E%E7%8E%B0"><span class="toc-number">3.2.1.</span> <span class="toc-text">1. 二维 DP 实现</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E4%B8%80%E7%BB%B4-DP-%E5%AE%9E%E7%8E%B0%EF%BC%88%E7%A9%BA%E9%97%B4%E4%BC%98%E5%8C%96%EF%BC%8C%E4%BD%BF%E7%94%A8%E6%BB%9A%E5%8A%A8%E6%95%B0%E7%BB%84%EF%BC%89"><span class="toc-number">3.2.2.</span> <span class="toc-text">2. 一维 DP 实现（空间优化，使用滚动数组）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-1"><span class="toc-number">3.3.</span> <span class="toc-text">示例</span></a></li></ol></li></ol></div></div><footer><nobr><span class="icp-title">GZHU</span><span class="icp-content">193001-0001</span></nobr><br><nobr><span class="icp-title">OUTPOST</span><span class="icp-content">169-2025-0331</span></nobr><br><nobr>构建自 <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> 使用主题 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr> 主题作者 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas></body></html>