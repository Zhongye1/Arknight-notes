<!DOCTYPE html><html lang="en" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>2026-01-28-Next.js初上手 | Zhongye's Blogs</title><link rel="icon" type="image/x-icon" href="/Arknight-notes/favicon.ico"><link rel="preload" as="font" crossorigin="anonymous" href="/Arknight-notes/font/Bender.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="/Arknight-notes/font/BenderLight.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="/Arknight-notes/font/JetBrainsMono-Regular.woff2"><link rel="stylesheet" href="/Arknight-notes/css/arknights.css"><style>@font-face {
  font-family: Bender;
  src: local('Bender'), url("/Arknight-notes/font/Bender.ttf"), url("/Arknight-notes/font/Bender.otf");
}
@font-face {
  font-family: BenderLight;
  src: local('BenderLight'), url("/Arknight-notes/font/BenderLight.ttf");
}
@font-face {
  font-family: 'JetBrains Mono';
  src: local('JetBrains Mono'), url('/Arknight-notes/font/JetBrainsMono-Regular.woff2') format('woff2');
}
</style><script>var config = {"root":"/Arknight-notes/","code_fold":500,"search":{"preload":false,"activeHolder":"键入以继续","blurHolder":"数据检索","noResult":"无 $0 相关数据"},"code":{"codeInfo":"$0 - $1 行","copy":"复制"}}</script><link type="text/css" rel="stylesheet" href="/Arknight-notes/lib/encrypt/hbe.style.css"><script src="/Arknight-notes/js/gitalk.js"></script><script src="//unpkg.com/mermaid@10.5.0/dist/mermaid.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.1/MathJax.js"></script><script>MathJax.Hub.Config({
 menuSettings: {
   zoom: "None"
 },
 showMathMenu: false,
 jax: ["input/TeX","output/CommonHTML"],
 extensions: ["tex2jax.js"],
 TeX: {
   extensions: ["AMSmath.js","AMSsymbols.js"],
   equationNumbers: {
     autoNumber: "AMS"
   }
 },
 tex2jax: {
   inlineMath: [["\\(", "\\)"]],
   displayMath: [["\\[", "\\]"]]
 }
});</script><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link type="text/css" rel="stylesheet" href="/Arknight-notes/lib/fontawesome/css/all.min.css"><script>if (window.localStorage.getItem('theme-mode') === 'light')
 document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark')
 document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/Arknight-notes/font/BenderLight.woff2") format('woff2');
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/Arknight-notes/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><style>:root {
 --dark-background: url('https://picx.zhimg.com/v2-6c94831ec3400e77452e9bd9dde85cb5_r.jpg');
 --light-background: url('https://pica.zhimg.com/v2-0323b00e97b41d914a545c7ccea6ab0a_r.jpg');
 --theme-encrypt-confirm: '确认'
}</style><script defer src="/Arknight-notes/js/arknights.js"></script><script defer src="/Arknight-notes/js/search.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script async src="/Arknight-notes/js/gitalk.js"></script><script defer type="module">import mermaid from '//unpkg.com/mermaid@10.5.0/dist/mermaid.esm.mjs';
window.mermaid = mermaid;
code.paintMermaid();
</script><script src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.1/MathJax.js"></script><script>MathJax.Hub.Config({
  menuSettings: {
    zoom: "None"
  },
  showMathMenu: false,
  jax: ["input/TeX","output/CommonHTML"],
  extensions: ["tex2jax.js"],
  TeX: {
    extensions: ["AMSmath.js","AMSsymbols.js"],
    equationNumbers: {
      autoNumber: "AMS"
    }
  },
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]]
  }
});
</script><script async src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script async src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script async src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script async src="/Arknight-notes/lib/encrypt/hbe.js"></script><script async src="/Arknight-notes/js/pjax.js"></script><script class="pjax-js">reset= () => {gitalk = new Gitalk({
 clientID: 'Ov23ct13Fb0b67x23wnT',
 clientSecret: 'f18ce69dd545e3c0f5e2456afde9c756fe8a254a',
 repo: 'Arknight-notes',
 owner: 'Zhongye1',
 admin: ['Zhongye1'],
 distractionFreeMode: false,
 id: location.pathname
});
if (document.querySelector("#gitalk")) gitalk.render("gitalk");document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js','data-pjax','.busuanzi'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);document.addEventListener('pjax:success', _ => bszCaller.fetch(
 "//busuanzi.ibruce.info/busuanzi?jsonpCallback=BusuanziCallback", a => {
  bszTag.texts(a),
  bszTag.shows()
}));reset()})</script><script class="pjax-js">reset= () => {gitalk = new Gitalk({
 clientID: 'Ov23ct13Fb0b67x23wnT',
 clientSecret: 'f18ce69dd545e3c0f5e2456afde9c756fe8a254a',
 repo: 'Arknight-notes',
 owner: 'Zhongye1',
 admin: ['Zhongye1'],
 distractionFreeMode: false,
 id: location.pathname
});
if (document.querySelector("#gitalk")) gitalk.render("gitalk");document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script><meta name="generator" content="Hexo 7.3.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style><link rel="alternate" href="/Arknight-notes/rss.xml" title="Zhongye's Blogs" type="application/atom+xml">
</head><body><div class="loading" style="opacity: 0;"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><div class="navBtn"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><nav><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="数据检索" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup" tabindex="0"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/Arknight-notes/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/Arknight-notes/archives/"><span class="navItemTitle">Archives</span></a></li><li class="navItem"><a class="navBlock" href="/Arknight-notes/about/"><span class="navItemTitle">About</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>2026-01-28-Next.js初上手</h1><div id="post-info"><span>文章发布时间: <div class="control"><time datetime="2026-01-28T08:24:43.000Z" id="date"> 2026-01-28</time></div></span><br><span>最后更新时间: <div class="control"><time datetime="2026-01-30T19:12:46.290Z" id="updated"> 2026-01-31</time></div></span><br><span id="busuanzi_container_page_pv">页面浏览: <span class="control" id="busuanzi_value_page_pv">加载中...</span></span></div></div><hr><div id="post-content"><p>Next.js 官网：<a target="_blank" rel="noopener" href="https://nextjs.org/">https://nextjs.org/</a><br>Next.js 官方文档：<a target="_blank" rel="noopener" href="https://nextjs.org/docs">https://nextjs.org/docs</a><br>Github 源码：<a target="_blank" rel="noopener" href="https://github.com/vercel/next.js">https://github.com/vercel/next.js</a></p>
<h1 id="0x00-Next-js：React-开发框架"><a href="#0x00-Next-js：React-开发框架" class="headerlink" title="0x00 Next.js：React 开发框架"></a>0x00 Next.js：React 开发框架</h1><p class='item-img' data-src='https://pic4.zhimg.com/80/v2-64fc789d92adce351cd31618ef22b839_720w.webp'><img src="https://pic4.zhimg.com/80/v2-64fc789d92adce351cd31618ef22b839_720w.webp" alt="alt text"></p>
<p>Next.js是一个 React 开发框架，用于构建 React 应用程序用，特性如下：</p>
<ul>
<li><strong>文件系统路由：</strong> Next.js 使用文件系统来自动化路由的创建。你只需要在 <code>pages</code> 目录下创建文件，它就会自动映射为相应的路由，不需要额外的路由配置。</li>
<li><strong>静态生成（SSG）与服务端渲染（SSR）：</strong> Next.js 支持这两种渲染方式，可以根据需要灵活选择。静态生成适用于大多数情况，尤其是内容不会频繁变化的页面，而 SSR 适用于需要动态获取数据的页面。</li>
<li><strong>API 路由：</strong> Next.js 允许你在应用中直接创建 API 路由，可以在 <code>pages/api</code> 目录下轻松创建后端 API 端点，处理前后端逻辑。</li>
<li><strong>自动代码拆分：</strong> 每个页面只会加载它所需的 JavaScript 代码，确保应用启动速度更快，减少不必要的资源消耗。</li>
<li><strong>优化图片：</strong> Next.js 内置了图片优化功能，使用 <code>next/image</code> 组件可以自动为图像选择最佳格式、压缩、懒加载等，以提升页面加载性能。</li>
<li><strong>支持 TypeScript：</strong> Next.js 默认支持 TypeScript，可以让开发者在开发过程中享受更强的类型检查。</li>
</ul>
<p>反正前端找工作不得不学…</p>
<hr>
<h1 id="0x01-创建Next-js项目及相关配置"><a href="#0x01-创建Next-js项目及相关配置" class="headerlink" title="0x01 创建Next.js项目及相关配置"></a>0x01 创建Next.js项目及相关配置</h1><h2 id="项目初建"><a href="#项目初建" class="headerlink" title="项目初建"></a>项目初建</h2><p>在Webstrom中利用脚手架先创建项目：</p>
<p class='item-img' data-src='https://pic1.zhimg.com/v2-f8b7db5814e38e287f25ee3f792fc5f4_r.jpg'><img src="https://pic1.zhimg.com/v2-f8b7db5814e38e287f25ee3f792fc5f4_r.jpg" alt="alt text"></p>
<p>过程如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs bash">C:\nvm4w\nodejs\npx.cmd --<span class="hljs-built_in">yes</span> create-next-app<span class="hljs-string">"@latest"</span> . --ts<br><br>√ Would you like to use React Compiler? ... No / Yes<br>√ Would you like to use Tailwind CSS? ... No / Yes<br>√ Would you like your code inside a `src/` directory? ... No / Yes<br>√ Would you like to use App Router? (recommended) ... No / Yes<br>√ Would you like to customize the import <span class="hljs-built_in">alias</span> (`@/*` by default)? ... No / Yes<br>√ What import <span class="hljs-built_in">alias</span> would you like configured? ... @/*<br>Creating a new Next.js app <span class="hljs-keyword">in</span> E:\TsetRange9\next_0128.<br><br>Using npm.<br><br>Initializing project with template: app-tw<br><br><br>Installing dependencies:<br>- next<br>- react<br>- react-dom<br><br>Installing devDependencies:<br>- @tailwindcss/postcss<br>- @types/node<br>- @types/react<br>- @types/react-dom<br>- babel-plugin-react-compiler<br>- eslint<br>- eslint-config-next<br>- tailwindcss<br>- typescript<br><br><br>added 357 packages <span class="hljs-keyword">in</span> 28s<br><br>141 packages are looking <span class="hljs-keyword">for</span> funding<br>  run `npm fund` <span class="hljs-keyword">for</span> details<br><br>Generating route types...<br>✓ Types generated successfully<br><br>Initialized a git repository.<br><br>Success! Created next_0128 at E:\TsetRange9\next_0128<br><br>Done<br></code></pre></td></tr></table></figure>
<p>过程中的一些交互式配置问题：</p>
<ul>
<li><strong>React Compiler</strong>：启用 React 官方的实验性编译器（优化性能）</li>
<li><strong>Tailwind CSS</strong>：集成流行的原子化 CSS 框架，便于快速样式开发</li>
<li><strong>src/ directory</strong>：将代码放在 src/ 文件夹中（推荐的结构化方式）</li>
<li><strong>App Router</strong>：使用 Next.js 13+ 的新路由系统（基于 app/ 目录，推荐）</li>
<li><strong>Import alias</strong>：配置路径别名（如 @/components），默认 @/*</li>
<li>自动初始化 Git 仓库，并创建初始 commit</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">Success! Created next_0128 at E:\TsetRange9\next_0128<br>Done<br></code></pre></td></tr></table></figure>
<p>项目创建成功后，接下来进入目录运行 npm run dev 启动开发服务器<br>（<a target="_blank" rel="noopener" href="http://localhost:3000">http://localhost:3000</a>）</p>
<p class='item-img' data-src='https://picx.zhimg.com/v2-f80a073f2031acdacebfc0a68d57ff13_r.jpg'><img src="https://picx.zhimg.com/v2-f80a073f2031acdacebfc0a68d57ff13_r.jpg" alt="alt text"></p>
<h2 id="代码质量工具ESlint，Stylelint，Prettier和CommitLint"><a href="#代码质量工具ESlint，Stylelint，Prettier和CommitLint" class="headerlink" title="代码质量工具ESlint，Stylelint，Prettier和CommitLint"></a>代码质量工具ESlint，Stylelint，Prettier和CommitLint</h2><h3 id="关于ESlint"><a href="#关于ESlint" class="headerlink" title="关于ESlint"></a>关于ESlint</h3><p>ESLint 是一个可配置的 JavaScript 检查器。它可以帮助你发现并修复 JavaScript 代码中的问题。问题可以指潜在的运行时漏洞、未使用最佳实践、风格问题等。</p>
<p>参考：<a target="_blank" rel="noopener" href="https://zh-hans.eslint.org/docs/latest/use/getting-started">ESLint 入门 - ESLint - 插件化的 JavaScript 代码检查工具</a><br>目前在脚手架中已经自动配置</p>
<p>创建项目后，目录下有文件 eslint.config.mjs，直接进行对应的配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> { dirname } <span class="hljs-keyword">from</span> <span class="hljs-string">"path"</span>;<br><span class="hljs-keyword">import</span> { fileURLToPath } <span class="hljs-keyword">from</span> <span class="hljs-string">"url"</span>;<br><span class="hljs-keyword">import</span> { <span class="hljs-title class_">FlatCompat</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@eslint/eslintrc"</span>;<br><br><span class="hljs-comment">// TypeScript 官方 ESLint 配置与解析器</span><br><span class="hljs-keyword">import</span> tseslint <span class="hljs-keyword">from</span> <span class="hljs-string">"typescript-eslint"</span>;<br><span class="hljs-comment">// 关闭与 Prettier 冲突的 ESLint 规则集合</span><br><span class="hljs-keyword">import</span> prettierConfig <span class="hljs-keyword">from</span> <span class="hljs-string">"eslint-config-prettier"</span>;<br><span class="hljs-comment">// 让 ESLint 直接报告 Prettier 格式问题的插件</span><br><span class="hljs-keyword">import</span> prettierPlugin <span class="hljs-keyword">from</span> <span class="hljs-string">"eslint-plugin-prettier"</span>;<br><span class="hljs-comment">// 检测并可自动移除未使用 import 的实用插件</span><br><span class="hljs-keyword">import</span> unusedImportsPlugin <span class="hljs-keyword">from</span> <span class="hljs-string">"eslint-plugin-unused-imports"</span>;<br><br><span class="hljs-keyword">const</span> __filename = <span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>);<br><span class="hljs-keyword">const</span> __dirname = <span class="hljs-title function_">dirname</span>(__filename);<br><br><span class="hljs-keyword">const</span> compat = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FlatCompat</span>({<br>    <span class="hljs-attr">baseDirectory</span>: __dirname, <span class="hljs-comment">// 用于解析相对路径的基准目录</span><br>});<br><br><span class="hljs-comment">// 导出 ESLint 平面配置</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> tseslint.<span class="hljs-title function_">config</span>(<br>    <span class="hljs-comment">// 引入 Next.js 官方推荐的核心规则集（包含 React、Core Web Vitals 等）</span><br>    ...compat.<span class="hljs-title function_">extends</span>(<span class="hljs-string">"next/core-web-vitals"</span>, <span class="hljs-string">"next/typescript"</span>),<br><br>    <span class="hljs-comment">// 引入 TypeScript 官方推荐规则（包含 parser 和基础类型检查规则）</span><br>    ...tseslint.<span class="hljs-property">configs</span>.<span class="hljs-property">recommended</span>,<br><br>    <span class="hljs-comment">// 自定义插件与规则区域</span><br>    {<br>        <span class="hljs-comment">// 注册使用的插件</span><br>        <span class="hljs-attr">plugins</span>: {<br>            <span class="hljs-attr">prettier</span>: prettierPlugin, <span class="hljs-comment">// 集成 Prettier 检查</span><br>            <span class="hljs-string">"unused-imports"</span>: unusedImportsPlugin, <span class="hljs-comment">// 未使用导入检测与清理</span><br>        },<br><br>        <span class="hljs-comment">// 自定义规则：覆盖默认行为或添加项目特定规则</span><br>        <span class="hljs-attr">rules</span>: {<br>            <span class="hljs-comment">// 在 Next.js + TS 项目中这两个 import 规则常误报，关闭</span><br>            <span class="hljs-string">"import/default"</span>: <span class="hljs-number">0</span>,<br>            <span class="hljs-string">"import/no-named-as-default-member"</span>: <span class="hljs-number">0</span>,<br><br>            <span class="hljs-comment">// 关闭原生 no-unused-vars，改用 TS 专用版本以更好支持 type-only imports</span><br>            <span class="hljs-string">"no-unused-vars"</span>: <span class="hljs-string">"off"</span>,<br><br>            <span class="hljs-comment">// Next.js App Router 模式下不再需要显式 import React</span><br>            <span class="hljs-string">"react/react-in-jsx-scope"</span>: <span class="hljs-string">"off"</span>,<br><br>            <span class="hljs-comment">// 允许使用 @ts-ignore / @ts-expect-error 等注释（可根据团队规范调整）</span><br>            <span class="hljs-string">"@typescript-eslint/ban-ts-comment"</span>: <span class="hljs-string">"off"</span>,<br><br>            <span class="hljs-comment">// 检测到未使用的 import 时给出警告（配合 --fix 可自动删除）</span><br>            <span class="hljs-string">"unused-imports/no-unused-imports"</span>: <span class="hljs-string">"warn"</span>,<br><br>            <span class="hljs-comment">// React + TS 项目依靠 TypeScript 类型检查，无需 prop-types</span><br>            <span class="hljs-string">"react/prop-types"</span>: <span class="hljs-string">"off"</span>,<br><br>            <span class="hljs-comment">// 将 Prettier 格式问题视为 ESLint 错误（强制代码风格一致）</span><br>            <span class="hljs-string">"prettier/prettier"</span>: <span class="hljs-string">"error"</span>,<br><br>            <span class="hljs-comment">// 允许 console 但给出警告（开发阶段方便，CI 可升级为 error）</span><br>            <span class="hljs-string">"no-console"</span>: <span class="hljs-string">"warn"</span>,<br><br>            <span class="hljs-comment">// TypeScript 专用的未使用变量检查（更精准，支持 _ 前缀忽略）</span><br>            <span class="hljs-string">"@typescript-eslint/no-unused-vars"</span>: <span class="hljs-string">"warn"</span>,<br><br>            <span class="hljs-comment">// 对 any 类型仅警告而非报错（适合逐步减少 any 的过渡阶段）</span><br>            <span class="hljs-string">"@typescript-eslint/no-explicit-any"</span>: <span class="hljs-string">"warn"</span>,<br>        },<br>    },<br><br>    <span class="hljs-comment">// Prettier 冲突规则关闭集合</span><br>    prettierConfig,<br><br>    <span class="hljs-comment">// 这些文件/目录不会被 ESLint 检查</span><br>    {<br>        <span class="hljs-attr">ignores</span>: [<br>            <span class="hljs-string">".next/**"</span>, <span class="hljs-comment">// Next.js 编译输出目录</span><br>            <span class="hljs-string">"out/**"</span>, <span class="hljs-comment">// 静态导出目录</span><br>            <span class="hljs-string">"build/**"</span>, <span class="hljs-comment">// 其他可能的构建目录</span><br>            <span class="hljs-string">"next-env.d.ts"</span>, <span class="hljs-comment">// Next.js 自动生成的类型声明文件</span><br>            <span class="hljs-string">"node_modules/**"</span>, <span class="hljs-comment">// 依赖目录</span><br>            <span class="hljs-string">"**/*.mjs"</span>, <span class="hljs-comment">// 纯 ESM 工具文件（视项目需要）</span><br>            <span class="hljs-string">"**/*.min.js"</span>, <span class="hljs-comment">// 已压缩的文件</span><br>        ],<br>    },<br>);<br></code></pre></td></tr></table></figure>
<h3 id="关于Stylelint"><a href="#关于Stylelint" class="headerlink" title="关于Stylelint"></a>关于Stylelint</h3><p>Stylelint 是一个强大、先进的 CSS 代码检查器（linter），可以帮助规避 CSS 代码中的错误并保持一致的编码风格。</p>
<p>安装 Stylelint 并创建配置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save-dev stylelint stylelint-config-standard stylelint-order stylelint-config-recess-order postcss-html<br>npm install --save-dev stylelint-config-standard-scss<br></code></pre></td></tr></table></figure>
<p>在项目根目录下创建 <code>.stylelintrc.mjs</code> 文件，并添加以下内容：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">import('stylelint').Config</span>} */</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {<br>  <span class="hljs-attr">extends</span>: [<br>    <span class="hljs-comment">// 基础配置 (包含了 CSS Modules 和 现代 CSS 特性检查)</span><br>    <span class="hljs-string">"stylelint-config-standard"</span>,<br>    <span class="hljs-comment">// 如果你使用 SCSS，取消下面这行的注释，并注释掉上面那行</span><br>    <span class="hljs-comment">// "stylelint-config-standard-scss",</span><br>    <span class="hljs-comment">// 属性自动排序</span><br>    <span class="hljs-string">"stylelint-config-recess-order"</span>,<br>  ],<br><br>  <span class="hljs-comment">// 针对不同文件类型的特定覆盖</span><br>  <span class="hljs-attr">overrides</span>: [<br>    {<br>      <span class="hljs-attr">files</span>: [<span class="hljs-string">"**/*.{html,vue}"</span>],<br>      <span class="hljs-attr">customSyntax</span>: <span class="hljs-string">"postcss-html"</span>,<br>    },<br>    {<br>      <span class="hljs-attr">files</span>: [<span class="hljs-string">"**/*.{jsx,tsx}"</span>],<br>      <span class="hljs-attr">customSyntax</span>: <span class="hljs-string">"postcss-styled-syntax"</span>, <span class="hljs-comment">// 如果使用 CSS-in-JS    }</span><br>  ],<br><br>  <span class="hljs-attr">rules</span>: {<br>    <span class="hljs-comment">// 1. 强制使用现代颜色函数 (如 oklch, lab, 或逗号分隔的 rgb 新语法)</span><br>    <span class="hljs-string">"color-function-notation"</span>: <span class="hljs-string">"modern"</span>,<br><br>    <span class="hljs-comment">// 2. 透明度使用百分比写法 (opacity: 50% 而不是 0.5)    "alpha-value-notation": "percentage",</span><br><br>    <span class="hljs-comment">// 3. 限制选择器特异性 (防止嵌套过深，配合原生 CSS Nesting)    "selector-max-specificity": "0,4,0",</span><br>    <span class="hljs-string">"max-nesting-depth"</span>: <span class="hljs-number">3</span>,<br><br>    <span class="hljs-comment">// 4. 强制使用伪元素双冒号 (::before 而不是 :before)    "selector-pseudo-element-colon-notation": "double",</span><br><br>    <span class="hljs-comment">// 5. 禁止未知的伪类 (兼容未来的 CSS 伪类)</span><br>    <span class="hljs-string">"selector-pseudo-class-no-unknown"</span>: [<br>      <span class="hljs-literal">true</span>,<br>      {<br>        <span class="hljs-attr">ignorePseudoClasses</span>: [<span class="hljs-string">"global"</span>, <span class="hljs-string">"deep"</span>, <span class="hljs-string">"slotted"</span>],<br>      },<br>    ],<br><br>    <span class="hljs-comment">/* ------------------------------------------------</span><br><span class="hljs-comment">       逻辑属性 (Logical Properties)</span><br><span class="hljs-comment">       强制使用 margin-inline-start 而非 margin-left</span><br><span class="hljs-comment">       ------------------------------------------------ */</span><br>       <span class="hljs-comment">// 6. 禁止空的代码块</span><br>    <span class="hljs-string">"block-no-empty"</span>: <span class="hljs-literal">true</span>,<br><br>    <span class="hljs-comment">// 7. 自定义类名模式 (BEM 或 Kebab-case)    "selector-class-pattern": [</span><br>      <span class="hljs-string">"^[a-z]([a-z0-9-]+)?(__([a-z0-9]+))?(--([a-z0-9]+))?$"</span>,<br>      {<br>        <span class="hljs-attr">message</span>: <span class="hljs-string">"Expected class selector to be BEM pattern"</span>,<br>      },<br>    ],<br><br>    <span class="hljs-comment">/* ------------------------------------------------</span><br><span class="hljs-comment">       与 Prettier 的兼容</span><br><span class="hljs-comment">    ------------------------------------------------ */</span><br>    <span class="hljs-comment">// "comment-empty-line-before": null,</span><br>},<br><br>  <span class="hljs-comment">// 忽略文件</span><br>  <span class="hljs-attr">ignoreFiles</span>: [<span class="hljs-string">"dist/**/*"</span>, <span class="hljs-string">"node_modules/**/*"</span>, <span class="hljs-string">"**/*.min.css"</span>],<br>};<br></code></pre></td></tr></table></figure>
<p>在项目根目录下创建 <code>.stylelintignore</code> 文件，并添加以下内容：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json">coverage<br>node_modules<br><span class="hljs-comment">//其他要忽略的内容,比如引入tailwindcss那个</span><br></code></pre></td></tr></table></figure>
<h3 id="格式化工具prettier"><a href="#格式化工具prettier" class="headerlink" title="格式化工具prettier"></a>格式化工具prettier</h3><p>在前端工程化项目（ React、Next.js、TypeScript 等大型团队项目）中，Prettier 被广泛用于强制代码格式一致性，避免风格争议。它是“opinionated”（有主见）的格式化工具，通常与 ESLint 结合使用（通过 eslint-config-prettier 关闭冲突规则），并通过 Husky + lint-staged 在 git commit 前自动格式化。</p>
<blockquote>
<p>opinionated（主见性）: 工具开发者预设了一套强烈的、特定的最佳实践和规则，用户配置选项较少，必须遵循这些预设方式</p>
</blockquote>
<p>作为代码质量工具，会移除所有原始样式，并确保所有输出的代码符合一致的风格</p>
<p>安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save-dev --save-exact prettier<br></code></pre></td></tr></table></figure>
<p>创建一个空的配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">node --<span class="hljs-built_in">eval</span> <span class="hljs-string">"fs.writeFileSync('.prettierrc.json','{}\n')"</span><br></code></pre></td></tr></table></figure>
<p>创建一个 .prettierignore 文件，让 Prettier CLI 和编辑器知道哪些文件不需要格式化</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">node --<span class="hljs-built_in">eval</span> <span class="hljs-string">"fs.writeFileSync('.prettierignore','# Ignore artifacts:\nbuild\ncoverage\n')"</span><br></code></pre></td></tr></table></figure>
<p>运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">npx prettier . --check<br>npx prettier . --write<br></code></pre></td></tr></table></figure>
<p><code>--check</code> 类似于 <code>--write</code>，但仅检查文件是否已格式化，而不是覆盖它们。<code>prettier --write</code> 和 <code>prettier --check</code> 是运行 Prettier 的最常见方法。</p>
<p>将格式化工具与编辑器集成参考: <a target="_blank" rel="noopener" href="https://prettier.node.org.cn/docs/en/editors">https://prettier.node.org.cn/docs/en/watching-files</a></p>
<p class='item-img' data-src='https://pic1.zhimg.com/v2-02c25d68bccecc044945537251575750_r.jpg'><img src="https://pic1.zhimg.com/v2-02c25d68bccecc044945537251575750_r.jpg" alt="alt text"></p>
<h3 id="关于CommitLint"><a href="#关于CommitLint" class="headerlink" title="关于CommitLint"></a>关于CommitLint</h3><p><code>commitlint</code> 是一个专为 Git 提交信息设计的语义化校验引擎，它通过可配置的规则集确保提交信息符合预定义的规范。</p>
<p>安装 <code>commitlint</code> 及其核心依赖：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -D @commitlint/cli @commitlint/config-conventional<br></code></pre></td></tr></table></figure>
<ul>
<li><code>@commitlint/cli</code>：命令行工具，负责解析参数和执行校验流程</li>
<li><code>@commitlint/config-conventional</code>：内置的 Conventional Commits 规范配置集</li>
</ul>
<p>创建<code>commitlint</code>配置<code>commitlint.config.js</code>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// commitlint.config.js</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {<br>    <span class="hljs-attr">extends</span>: [<span class="hljs-string">"@commitlint/config-conventional"</span>],<br>};<br></code></pre></td></tr></table></figure>
<h3 id="husky-与自动化提交检查"><a href="#husky-与自动化提交检查" class="headerlink" title="husky 与自动化提交检查"></a>husky 与自动化提交检查</h3><p><code>husky</code> 是一个专为现代前端项目设计的 Git 钩子管理系统，它解决了传统 Git 钩子管理的诸多痛点</p>
<p>初始化：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npx husky init<br></code></pre></td></tr></table></figure>
<p>这一步会创建 <code>.husky</code> 目录</p>
<p>安装 <code>lint-staged</code>来只检查暂存区的文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save-dev lint-staged<br></code></pre></td></tr></table></figure>
<p>在 <code>package.json</code> 添加脚本：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs JSON"><span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><br>    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"next dev"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"next build"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"next start"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"lint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eslint . &amp;&amp; stylelint **/*.{css,scss,less}"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"lint:css"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"stylelint **/*.{css,scss,less}"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"lint:css:fix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"stylelint --fix **/*.{css,scss,less}"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"lint:fix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eslint . --fix &amp;&amp; stylelint **/*.{css,scss,less} --fix"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"prettier --write \"**/*.{js,jsx,ts,tsx,json,md,css}\""</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"format:check"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"prettier --check \"**/*.{js,jsx,ts,tsx,json,md,css}\""</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"prepare"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"husky"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"commitlint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"commitlint --edit"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"precommit"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"lint-staged"</span><br>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure>
<p>结合 Husky + lint-staged（commit 前自动修复）：<br>在 <code>package.json</code>中添加 <code>lint-staged</code>配置：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs JSON"><span class="hljs-punctuation">{</span><br>  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><br>    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"next dev"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"next build"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"next start"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"lint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eslint . &amp;&amp; stylelint **/*.{css,scss,less}"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"lint:css"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"stylelint **/*.{css,scss,less}"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"lint:css:fix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"stylelint --fix **/*.{css,scss,less}"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"lint:fix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eslint . --fix &amp;&amp; stylelint **/*.{css,scss,less} --fix"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"prettier --write \"**/*.{js,jsx,ts,tsx,json,md,css}\""</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"format:check"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"prettier --check \"**/*.{js,jsx,ts,tsx,json,md,css}\""</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"prepare"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"husky"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"commitlint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"commitlint --edit"</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"precommit"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"lint-staged"</span><br>  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">"lint-staged"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><br>    <span class="hljs-attr">"*.{js,jsx,ts,tsx}"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-string">"eslint --fix"</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">"prettier --write"</span><br>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"*.{css,scss,less}"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-string">"stylelint --fix"</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">"prettier --write"</span><br>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">"*.{json,md}"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-string">"prettier --write"</span><br>    <span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">}</span><br><span class="hljs-punctuation">}</span><br></code></pre></td></tr></table></figure>
<p>配置自动化提交检查：在 <code>.husky</code> 目录中， <code>pre-commit</code> 和 <code>commit-msg</code> 钩子应该配置如下：（没有则创建）</p>
<p class='item-img' data-src='https://picx.zhimg.com/80/v2-62592624dce90d7a9b506c727b230e21_720w.webp'><img src="https://picx.zhimg.com/80/v2-62592624dce90d7a9b506c727b230e21_720w.webp" alt="0"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#pre-commit</span><br>npx --no-install commitlint --config commitlint.config.js --edit <span class="hljs-variable">$1</span><br></code></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/sh</span><br><span class="hljs-comment"># commit-msg</span><br>. <span class="hljs-string">"<span class="hljs-subst">$(dirname <span class="hljs-string">"<span class="hljs-variable">$0</span>"</span>)</span>/_/husky.sh"</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">"开始代码检查..."</span><br><br><span class="hljs-comment"># 运行 lint-staged</span><br>npx lint-staged<br><br><span class="hljs-comment"># 检查执行结果</span><br><span class="hljs-keyword">if</span> [ $? -ne 0 ]; <span class="hljs-keyword">then</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-string">"代码检查未通过，请修复错误后重新提交"</span><br>  <span class="hljs-built_in">exit</span> 1<br><span class="hljs-keyword">fi</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">"代码检查通过"</span><br></code></pre></td></tr></table></figure>
<p>配置后，在提交前会：</p>
<ul>
<li>运行 ESLint 检查 JavaScript/TypeScript</li>
<li>运行 Stylelint 检查 CSS/SASS/LESS</li>
<li>运行 Prettier 格式化代码</li>
<li>只检查暂存区的文件，提高效率</li>
<li>自动修复可自动修复的问题，会重新提示暂存文件</li>
</ul>
<p>在commitlint.config.js中配置的<code>@commitlint/config-conventional</code>，提交信息应该符合Conventional Commits规范，格式为：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>(<span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>): <span class="hljs-tag">&lt;<span class="hljs-name">subject</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>其中，type是提交的类型，必须是以下之一：</p>
<ul>
<li>feat: 新功能</li>
<li>fix: 修复bug</li>
<li>docs: 文档更新</li>
<li>style: 代码格式调整（不影响代码运行）</li>
<li>refactor: 重构</li>
<li>test: 测试相关</li>
<li>chore: 构建过程或辅助工具的变动</li>
</ul>
<p>例如，一个简单的提交信息：</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-symbol">feat:</span> 添加用户登录功能<br></code></pre></td></tr></table></figure>
<p>我们也可以自定义type <a target="_blank" rel="noopener" href="https://commitlint.js.org/reference/configuration.html">Configuration | commitlint</a></p>
<hr>
<p>devtools</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fpages%2Fbuilding-your-application%2Fconfiguring%2Feslint" title="https://nextjs.org/docs/pages/building-your-application/configuring/eslint">Configuring: ESLint | Next.js</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fpages%2Fbuilding-your-application%2Fconfiguring%2Feslint%23usage-with-other-tools" title="https://nextjs.org/docs/pages/building-your-application/configuring/eslint#usage-with-other-tools">Next.js ESlint Usage With Other Tools</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fprettier.io%2Fdocs%2Fen%2Finstall" title="https://prettier.io/docs/en/install">Prettier</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fprettier%2Feslint-config-prettier" title="https://github.com/prettier/eslint-config-prettier">eslint-config-prettier</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftailwindlabs%2Fprettier-plugin-tailwindcss" title="https://github.com/tailwindlabs/prettier-plugin-tailwindcss">prettier-plugin-tailwindcss</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftypicode%2Fhusky" title="https://github.com/typicode/husky">husky</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fokonet%2Flint-staged" title="https://github.com/okonet/lint-staged">lint-staged</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcommitlint.js.org%2F%23%2F%3Fid%3Dgetting-started" title="https://commitlint.js.org/#/?id=getting-started">commitlint</a></li>
</ul>
<div id="paginator"></div></div><div id="post-footer"><div id="pages" style="justify-content: flex-end"><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/Arknight-notes/posts/24060.html">2026-01-24-前端开发速查（语法，类型，运算符，字符串，数组，对象） 上一篇 →</a></div></div></div><div id="comments"><div id="gitalk"></div></div></div><div class="bottom-btn"><div><a class="i-top" id="to-top" onClick="scrolls.scrolltop();" title="回到顶部" style="opacity: 0; display: none;">∧ </a><a class="i-index" id="to-index" href="#toc-div" title="文章目录">≡</a><a class="i-color" id="color-mode" onClick="colorMode.change()" title="切换主题"></a></div></div></article><aside><div id="about"><a href="/Arknight-notes/" id="logo"><img src="https://pic4.zhimg.com/80/v2-d9884f32711e19e80979eac58e943897_720w.webp" alt="Logo" style="margin:20;border-radius:0;"></a><h1 id="Dr"><a href="zhongye">Zhongye</a></h1><div id="description"><p></p></div></div><div id="aside-block"><div id="toc-div"><h1>目录</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#0x00-Next-js%EF%BC%9AReact-%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6"><span class="toc-number">1.</span> <span class="toc-text">0x00 Next.js：React 开发框架</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0x01-%E5%88%9B%E5%BB%BANext-js%E9%A1%B9%E7%9B%AE%E5%8F%8A%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">0x01 创建Next.js项目及相关配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%BB%BA"><span class="toc-number">2.1.</span> <span class="toc-text">项目初建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%E5%B7%A5%E5%85%B7ESlint%EF%BC%8CStylelint%EF%BC%8CPrettier%E5%92%8CCommitLint"><span class="toc-number">2.2.</span> <span class="toc-text">代码质量工具ESlint，Stylelint，Prettier和CommitLint</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8EESlint"><span class="toc-number">2.2.1.</span> <span class="toc-text">关于ESlint</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8EStylelint"><span class="toc-number">2.2.2.</span> <span class="toc-text">关于Stylelint</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%B7%A5%E5%85%B7prettier"><span class="toc-number">2.2.3.</span> <span class="toc-text">格式化工具prettier</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8ECommitLint"><span class="toc-number">2.2.4.</span> <span class="toc-text">关于CommitLint</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#husky-%E4%B8%8E%E8%87%AA%E5%8A%A8%E5%8C%96%E6%8F%90%E4%BA%A4%E6%A3%80%E6%9F%A5"><span class="toc-number">2.2.5.</span> <span class="toc-text">husky 与自动化提交检查</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">2.3.</span> <span class="toc-text">参考</span></a></li></ol></li></ol></div></div><footer><nobr><span class="icp-title">GZHU</span><span class="icp-content">193001-0001</span></nobr><br><nobr><span class="icp-title">OUTPOST</span><span class="icp-content">169-2025-0331</span></nobr><br><nobr>构建自 <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> 使用主题 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr> 主题作者 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside><!-- ── 访客信息获取脚本（建议放在页面底部 layout/_partial/after-footer.pug 或单独引入） ──--><script>(function() {
  const MAX_RETRY = 1;
  let retryCount = 0;

  async function fetchVisitorInfo() {
    const controller = new AbortController();
    const timeoutId = setTimeout(() => {
      controller.abort(new Error('Request timeout after 1000ms'));
    }, 1000);

    try {
      const response = await fetch('https://ipapi.co/json/', {
        signal: controller.signal
      });

      clearTimeout(timeoutId);

      if (!response.ok) {
        throw new Error('Network response was not ok');
      }

      const data = await response.json();

      document.getElementById('visitor-ip').textContent = data.ip || '无法获取';
      
      const parts = [];
      if (data.city) parts.push(data.city);
      if (data.region) parts.push(data.region);
      if (data.country_name) parts.push(data.country_name);
      
      document.getElementById('visitor-location').textContent = 
        parts.length > 0 ? parts.join(' - ') : '未知地区';

    } catch (err) {
      clearTimeout(timeoutId);

      // 如果是超时错误，且还有重试次数，则重试一次
      if (err.name === 'AbortError' && retryCount < MAX_RETRY) {
        retryCount++;
        // 可选：显示「正在重试...」提示
        document.getElementById('visitor-ip').textContent = '超时，正在重试...';
        document.getElementById('visitor-location').textContent = '——';
        
        // 立即重试（也可加个很短的延迟，如 300ms）
        setTimeout(fetchVisitorInfo, 300);
        return;
      }

      // 最终失败
      document.getElementById('visitor-ip').textContent = '████';
      document.getElementById('visitor-location').textContent = '████';
    }
  }

  // 页面加载完成后获取访客信息
  fetchVisitorInfo();

  // 添加对PJAX事件的监听，以便在页面切换后重新获取访客信息
  document.addEventListener('pjax:complete', function() {
    // 延迟执行，确保DOM已经更新完成
    setTimeout(fetchVisitorInfo, 100);
  });
})();</script></main><canvas id="canvas-dust"></canvas></body></html>